{"name":"SemanticsTester","code":"te6ccgICAVAAAQAAQOUAAAPu/wAgj2kwAdBy1yHSANIA+kAhEDRQZm8E+GEC+GLbPBEQk18PMOBwL9dJIMIfljEP0x8REN4BwAABwSGwk18PMOAO+QGC8Nnb31eUunWGLDJpZdTHYTv5rmlObOuiqDy64EeALzEwuuMCXw/ywILh9KQT9LzyyAsBLwABAAIB3hDOVRvbPDHIfwHKAFXgUP4BgQEBzwBME1C6UCPKAAEBgQEBzwCBAQHPAMhVM1A0gQEBzwBQI1AjygABAYEBAc8AgQEBzwDIRDMFUCPKAAEBgQEBzwCBAQHPABT0ABL0ABT0ABLKAMlYzMkBzMntVAAmAgJxAAMABAIBIAAFAAYCASAAFAAVAgEgAAcACAIBIAAJAAoCASAAKAApAgEgAEQARQIBIAALAAwCASAADQAOAgFIAE4ATwIBIABjAGQCASAADwAQAgFIAHgAeQIBIAARABICEa1j7Z5tnjZ4wAEvABMCEKsV2zzbPGzxAS8A1gIBIABrAGwAgvgo+CrIcAHKAG0wyXBZIPkAIvkAWtdlAddlggIBNMjLF8sPyw/L/8v/cfkEAMh0AcsCEsoHy//J0CHHBVEQxwWwAgEgAIMAhAIBIAAWABcCASAAGAAZAgEgAB4AHwIBIAC+AL8CASAAGgAbAgEgAPQA9QIBIAAcAB0CEKhw2zzbPGzxAS8A/AIBIAEAAQECASAAIAAhAgFIACIAIwIBIAEFAQYCAVgBEAERAgEgACQAJQIBIAElASYCD6Yvtnm2eNnjAS8BFQIBbgEXARgE8lR+3FR+3FR+3FR+3FR+3Ns8DhEdDg0RHA0MERsMCxEaCwoRGQoJERgJCBEXCAcRFgcGERUGBREUBQQREwQDERIDAhERAgEREAEP2zxs8Y6Jf4BNgFiAI9s8kXDif4BNgFgRERESEREREBESERAPERIPDhESDg0REg0AtgE0AL0AJwGWDBESDAsREgsKERIKCRESCQgREggHERIHBhESBgUREgUEERIEAxESA4Aj2zwBERABsBDvEN4QzRC8EKsQmhCJEHgQZxBWEEUQNEEwAL0CASAAKgArAhGzqbbPNs8bPGABLwA2AgEgADoAOwIBIAAsAC0CASAALgAvAhCqYNs82zxs8QEvADUCD6W5tnm2eNnjAS8AMAIPpVG2ebZ42eMBLwAyBEBx2zzCAZF/joUgpv7bPOIhwAIiwwKRf46GAts8wgIT4gEuADQBLgAxAkCRf46FIqb92zzikX+OhgLbPMIDE+IDwAOwAZJwMt8BsAA0AS4EQHHbPMICjoUgpv7bPJFw4iHAAiLAAo6FAts8wgOSAnDiAS4ANAEuADMCRI6FIKb92zyRcOKOhNs8wgORcOIBwAMTsAGzkgGzkjFw4rAANAEuAAxxAakEwgAABPgoBFRx2zzCAiHAAgLbPMICIcADFLAhwgOOhQHbPMIClCHCAhLiIcADE7AhwgIBLgEuAS4ANwRQkyHCAo6GAds8wgIS4iLAAxKwAts8wgOTIMAEjoTbPMID4iHABBSwAQEuAS4BLgA4BDLbPMIFjoTbPMIDkyDCBeIhwAUTsAHbPMIFAS4BLgEuADkDlo6E2zzAB5MgwAbiIcAHE7AB2zzCCJMgwAiOhNs8wAniAcAJErAHs5JwON8HknA13wSScDLfAZJwMt8BkbOSMHDikjBw35JwMt8BsAEuAS4BLgIQqQrbPNs8bPEBLwA8AgEgAEAAQQSaI9s8VeDbPI49L4EBAXFZ9A1voZIwbd8gbpIwbY4c0IEBAdcA0gCBAQHXAAEBgQEB1wBVIBA0bBRvBOIgbvLQgG8kXwPAFJFw4pFw4w0APQE0AFIAPgH2IIEBAXFZ9A1voZIwbd8gbpIwbY4c0IEBAdcA0gCBAQHXAAEBgQEB1wBVIBA0bBRvBOIgbvLQgG8kAaYeJIEBAXFZ9A1voZIwbd8gbpIwbY4c0IEBAdcA0gCBAQHXAAEBgQEB1wBVIBA0bBRvBOIgbvLQgG8kbBMwMSG6AD8C/o4/L4EBAXFZ9A1voZIwbd8gbpIwbY4c0IEBAdcA0gCBAQHXAAEBgQEB1wBVIBA0bBRvBOIgbvLQgG8kbBMwMcAjkXDikXDjDVYQgQEB9IVvpSCREpUxbTJtAeKQjh8wIMABErCBAQFWEkATWfR4b6UglALUMFiVMW0ybQHi6FsAVQB/AJCSXwTgE4EBAVAzcQXIVTBQNIEBAc8AUCNQI8oAAQGBAQHPAIEBAc8AyRIgbpUwWfRaMJRBM/QV4oEBAXJZ9FowgQEBc1n0WjACD6Wztnm2eNnjAS8AQgIPpxO2ebZ42eMBLwEsBDpx2zzCAZF/joLbPOIhwAIiwwKRf46GAts8wgIT4gEuAKkBLgBDAjqRf46C2zzikX+OhgLbPMIDE+IDwAOwAZJwMt8BsACpAS4CEbMFts82zxs8YAEvAEYCASAARwBIARJ/gE2AWIAj2zwAvQIRrLTtnm2eNnjAAS8AegIRrAVtnm2eNnjAAS8ASQP0VH7cVH7cVH7cVH7cVH7c2zxbDhEbDg0RGg0MERkMCxEYCwoRFwoJERYJCBEVCAcRFAcGERMGBRESBQQREQQDERADEC8BERsBERrbPJQREcD/k1cRcOKTD8BNkj9w4pMNwFiSPXDilBESwBSTVxJw4pQREMD/k1cQcOIAtgE0AEoD+pMOwCOSPnDikwzACpI8cOKUERHAAJNXEXDikw/AA5I/cOKTDcAKkj1w4pMPwAWSP3Dikg9ukj9w4o49L4EBAXFZ9A1voZIwbd8gbpIwbY4c0IEBAdcA0gCBAQHXAAEBgQEB1wBVIBA0bBRvBOIgbvLQgG8kXwPAFJFw4uMPAFIAcwBLBKCOPy+BAQFxWfQNb6GSMG3fIG6SMG2OHNCBAQHXANIAgQEB1wABAYEBAdcAVSAQNGwUbwTiIG7y0IBvJGwTMDHABZFw4pFw4w2RcOMNkXDjDQBVAUcAcgBMBKCOPy+BAQFyWfQNb6GSMG3fIG6SMG2OHNCBAQHXANIAgQEB1wABAYEBAdcAVSAQNGwUbwTiIG7y0IBvJGwTMDHAZJFw4pFw4w2RcOMNkXDjDQFKAUsAdQBNAtyOQS+BAQFzWfQNb6GSMG3fIG6SMG2OHNCBAQHXANIAgQEB1wABAYEBAdcAVSAQNGwUbwTiIG7y0IBvJGwTMDGBAJa6kXDikXDjDVYQgQEB9IVvpSCREpUxbTJtAeKQiuhbVxBPHQtQ6RwYEGdEVAFOAU8CEKol2zzbPGzxAS8AUAIDeSAAVgBXBJoj2zxV4Ns8jj0vgQEBcVn0DW+hkjBt3yBukjBtjhzQgQEB1wDSAIEBAdcAAQGBAQHXAFUgEDRsFG8E4iBu8tCAbyRfA8AUkXDikXDjDQBRATQAUgBTAfYggQEBcVn0DW+hkjBt3yBukjBtjhzQgQEB1wDSAIEBAdcAAQGBAQHXAFUgEDRsFG8E4iBu8tCAbyQBpigkgQEBcVn0DW+hkjBt3yBukjBtjhzQgQEB1wDSAIEBAdcAAQGBAQHXAFUgEDRsFG8E4iBu8tCAbyRsEzAxIboAVAB8L4EBAXFZ9A1voZIwbd8gbpIwbY4c0IEBAdcA0gCBAQHXAAEBgQEB1wBVIBA0bBRvBOIgbvLQgG8kbBNbwP8C/o4/L4EBAXFZ9A1voZIwbd8gbpIwbY4c0IEBAdcA0gCBAQHXAAEBgQEB1wBVIBA0bBRvBOIgbvLQgG8kbBMwMcAtkXDikXDjDVYQgQEB9IVvpSCREpUxbTJtAeKQjh8wIMABErCBAQFWEkATWfR4b6UglALUMFiVMW0ybQHi6FsAVQB/AJKTXwVt4BOBAQFQM3EFyFUwUDSBAQHPAFAjUCPKAAEBgQEBzwCBAQHPAMkSIG6VMFn0WjCUQTP0FeKBAQFyWfRaMIEBAXNZ9FowAH4vgQEBcVn0DW+hkjBt3yBukjBtjhzQgQEB1wDSAIEBAdcAAQGBAQHXAFUgEDRsFG8E4iBu8tCAbyRsE2whwAoCD682zzbPGzxgAS8AWAIPrHbPNs8bPGABLwBdAezIegHKBXUBygVyAcoFySDQIdBTAQH5AQH5AboC0gVTIAH5AQH5Ab2TAcAKkjFw4hOwAdIFUwMB+QEB+QG6kwHACpIxcOISsALSBdIFA9IFUwQB+QEB+QG9kwPABZIzcOKTAcACkjFw4pLABZIwcOITsALSBVMCAFkB/gH5AQH5AbqTAcACkjFw4hOwIdFTIQH5AQH5AbqwItFTIQH5AQH5AbqTAccAkjFw4pMBxwCSMXDisCHQ0gUBwAoSsFRxEQH5AQH5AboSsALSBVMgAfkBAfkBvZMBwAWSMXDiE7AC0gVTIAH5AQH5Ab2TAcACkjFw4hOwAdIFUwMAWgLYAfkBAfkBvZMBwAWSMXDiErAB0gVTAwH5AQH5AbqTAcACkjFw4pMCxwCSMnDikwHHAJIxcOKwIdDSBQHAChKwIds8sAHSBdIFAsAFksACkjBw4pLHAJIwcOKwAdDSBQHAChKwAds8ErABxwCwAFsAXAAu0gXSBSDRAsAFksACkjBw4pLHAJIwcOIALtIF0gUg0QLABZLAApIwcOKTIMcAkXDiAvZ/yHoBygXKAHIBywXJf8h6AcoFygByAcsFyVMBAfkAAfkAush1AcoFUjDMych1AcoFUjDMyVMBAfkAAfkAuhOwiMh1AcoFzMlTIAH5AAH5AL2ZUzAB+QAB+QC9kXDimVNQAfkAAfkAvZFw4plTQAH5AAH5AL2RcOISsAIAggBeBP7QA9AB0APSBQLSBQXSBQPABZMBwAWSMXDiksAFkjBw4hOwI8gBzxbJIsgBzxbJAfkAAfkAuo4TIsgBzxbJIsgBzxbJAfkAAfkAvZFw4o4TIsgBzxbJJMgBzxbJAfkAAfkAvZFw4rAB1ATUBNRQgwH5AAH5ALqTMDRw4w3jDxSwAF8AYABhAGIAEBUB+QAB+QC6ARSIUAUB+QAB+QC6AIIABDRwA64ByAHPFskDyAHPFskCyAHPFslTIwH5AAH5ALqZUwMB+QAB+QC6kXDijoqIUAQB+QAB+QC6kjNw4o6JiFgB+QAB+QC6kjFw4o6JiFgB+QAB+QC6kjFw4rAAggCCAIICEa6IbZ5tnjZ4wAEvAGUCEa+6bZ5tnjZ4wAEvATQD8n/IegHKBcoAcgHLBcl/yHoBygXKAHIBywXJf8jKAHoBygVyAcsFyXDIegHKBcoAcgHLBclwyMoAegHKBXIBywXJUzQB+QAB+QC6UzUB+QAB+QC9mVMlAfkAAfkAvZFw4plTFQH5AAH5AL2RcOKwUzQB+QAB+QC94w8AZgBzAGcAElMkAfkAAfkAvQH+mVIVAfkAAfkAvZI0cOIUsFMSAfkAAfkAvZhdAfkAAfkAvZFw4rBQMwH5AAH5AL0SsALQAdAB0gUC0gACwAqSwP+SMHDiE7AiyAHPFskiyAHPFskB+QAB+QC9sAHSAAHA/xKwIsgBzxbJIsgBzxbJAfkAAfkAvbAC0gUBwAoTsABoBPohyAHPFskjyAHPFslTAQH5AAH5ALoTsAHQAtAC0wUD0wUCwAKSwAKSMHDiErCIA8gBzxbJEwH5AAH5ALqOjogByAHPFskB+QAB+QC6kjBw4rAB0wUD0wUCwAKSwAKSMHDiErACyAHPFskByAHPFslTAQH5AAH5ALqSMXDjDQCCAIIAaQBqARKIWAH5AAH5ALoAggEgjomIAQH5AAH5ALqSMHDisACCAg+m57Z5tnjZ4wEvAG0CD6d7tnm2eNnjAS8AbwHuf3qAMn96gDJUdUPIVSBQI8oAAQGBAQHPAIEBAc8AyVUgyFUgUCPKAAEBgQEBzwCBAQHPAMkhAfkAAfkAulRxEQH5AAH5ALoSsAHQ0gCBAQHXAAEBgQEB1wBVIAPRWFNyupNQZrqTMTVw4pNTNLqRcOISsIBkUAUAbgCWyFUgUCPKAAEBgQEBzwCBAQHPAMlTAQH5AAH5AL0UsBSAZFADyFUgUCPKAAEBgQEBzwCBAQHPAMlRIgH5AAH5ALqwWQH5AAH5AL2wA/RUftxUftxUftxUftxUftzbPFsOERsODREaDQwRGQwLERgLChEXCgkRFgkIERUIBxEUBwYREwYFERIFBBERBAMREAMQLwERGwERGts8lBERwP+TVxFw4pMPwGOSP3Dikw3AYpI9cOKUERLAFJNXEnDilBEQwP+TVxBw4gBwATQAcQEwNDQ0f4BjgGKBAQFxQFX0WjBGE1BU2zwwAQID+pMOwAWSPnDikwzACpI8cOKUERHAAJNXEXDikw/AA5I/cOKTDcAKkj1w4pMPwAWSP3Dikg9ukj9w4o49L4EBAXJZ9A1voZIwbd8gbpIwbY4c0IEBAdcA0gCBAQHXAAEBgQEB1wBVIBA0bBRvBOIgbvLQgG8kXwPAFJFw4uMPAHIAcwB0AHwvgQEBcln0DW+hkjBt3yBukjBtjhzQgQEB1wDSAIEBAdcAAQGBAQHXAFUgEDRsFG8E4iBu8tCAbyRsE1vA/wACcASgjj8vgQEBcln0DW+hkjBt3yBukjBtjhzQgQEB1wDSAIEBAdcAAQGBAQHXAFUgEDRsFG8E4iBu8tCAbyRsEzAxwGSRcOKRcOMNkXDjDZFw4w0BSgFLAHUAdgB8L4EBAXNZ9A1voZIwbd8gbpIwbY4c0IEBAdcA0gCBAQHXAAEBgQEB1wBVIBA0bBRvBOIgbvLQgG8kbBNbwAAC3I5BL4EBAXNZ9A1voZIwbd8gbpIwbY4c0IEBAdcA0gCBAQHXAAEBgQEB1wBVIBA0bBRvBOIgbvLQgG8kbBMwMYEAlrqRcOKRcOMNVhCBAQH0hW+lIJESlTFtMm0B4pCK6FtXEE8dC1DpHBgQZ0RUAU4AdwBMMCDAApF/kyDAA+ISsIEBAVYSQBNZ9HhvpSCUAtQwWJUxbTJtAeICEKpG2zzbPGzxAS8AegIQqX/bPNs8bPEBLwCABJoj2zxV4Ns8jj0vgQEBcVn0DW+hkjBt3yBukjBtjhzQgQEB1wDSAIEBAdcAAQGBAQHXAFUgEDRsFG8E4iBu8tCAbyRfA8AAkXDikXDjDQB7ATQAfAB9AGowbYEBAXFwcCEiyFUwUDSBAQHPAFAjUCPKAAEBgQEBzwCBAQHPAMkgbpUwWfRaMJRBM/QV4gB8L4EBAXFZ9A1voZIwbd8gbpIwbY4c0IEBAdcA0gCBAQHXAAEBgQEB1wBVIBA0bBRvBOIgbvLQgG8kbBNbwAAC/o4/L4EBAXFZ9A1voZIwbd8gbpIwbY4c0IEBAdcA0gCBAQHXAAEBgQEB1wBVIBA0bBRvBOIgbvLQgG8kbBMwMcAAkXDikXDjDVYQgQEB9IVvpSCREpUxbTJtAeKQjh8wIMABErCBAQFWEkATWfR4b6UglALUMFiVMW0ybQHi6FsAfgB/AH4vgQEBcVn0DW+hkjBt3yBukjBtjhzQgQEB1wDSAIEBAdcAAQGBAQHXAFUgEDRsFG8E4iBu8tCAbyRsE2whwAAACFcQVQ4C7H/IegHKBcoAcgHLBcl/yHoBygXKAHIBywXJyHUBygVSIMzJyHUBygVSIMzJiMh1AcoFzMkC0AHQAtBTIQH5AQH5AbpTIQH5AQH5Ab2ZUzEB+QEB+QG9kXDisALSBSHABRSwU0MB+QEB+QG9sATSBTEBwAUUsF0AggCBAdYB+QEB+QG6sAHSBQHABRKwUyEB+QEB+QG9mVMxAfkBAfkBvZFw4rAC1ATUA9RQgwH5AAH5ALqYFQH5AAH5ALqTMDRw4o6KiFAFAfkAAfkAupI0cOKwUTEB+QEB+QG6lwH5AQH5AbqSW3DisACCAAACASAAhQCGAgEgAIkAigIBIACHAIgCAUgAlwCYAgEgAI8AkAIRrqdtnm2eNnjAAS8BAwIBIACfAKACASAAiwCMAgFIAKoAqwIBIACNAI4CEKqv2zzbPGzxAS8AsQIQqS3bPNs8bPEBLwETAhCrINs82zxs8QEvAJECEKgl2zzbPGzxAS8AlAQgVHqYKts82zzbPF8EVH7cLgEjAQkBHgCSBCDbPGxE2zzbPFYSVhJWElYSASMBCQEeAJMEiNs8XwTbPF8E2zxfBA4RGg4NERkNDBEYDAsRFwsKERYKCREVCQgRFAgHERMHBhESBgUREQUEERAEED8CERoCAREZAREYASMBIQEiALAEEnLbPNs82zwwcgEsASoBKQCVBBDbPDHbPNs8cgEsASoBKQCWAzTbPDDbPDDbPDACwAKSwAaSMHDiksAGkjBw4gEsAS4BLQIQqwHbPNs8bPEBLwCZAhCoBNs82zxs8QEvAJwEIFR6mCrbPNs82zxfBFR+3C4BIgEfAQkAmgQg2zxsRNs82zxWElYSVhJWEgEiAR8BCQCbBIjbPF8E2zxfBNs8XwQOERoODREZDQwRGAwLERcLChEWCgkRFQkIERQIBxETBwYREgYFEREFBBEQBBA/AhEaAgERGQERGAEiASMBIQELBBJy2zzbPNs8MHIBLgEOASkAnQQQ2zwx2zzbPHIBLgEOASkAngM02zww2zww2zwwAsADksAGkjBw4pLABpIwcOIBLgEsAS0CEa4z7Z5tnjZ4wAEvAKECASAApAClBBJy2zzbPNs8MHIBLgEpAQ4AogQQ2zwx2zzbPHIBLgEpAQ4AowM02zww2zww2zwwAsADksAGkjBw4pLABpIwcOIBLgEtASwCEKo+2zzbPGzxAS8ApgIQqiTbPNs8bPEBLwCnAIT4KCD6RMh0AcsCEsoHy//J0AHHBXD4KshwAcoAbTDJyFkCzMzJ+QBcyHQBywISygfL/8nQbBL6RAHAAJG6kltw4rAEOnHbPMICjoLbPJFw4iHAAiLAAo6FAts8wgOSAnDiAS4AqQEuAKgCPo6C2zyRcOKOhNs8wgORcOIBwAMTsAGzkgGzkjFw4rAAqQEuAALrAg+mD7Z5tnjZ4wEvAKwCD6aHtnm2eNnjAS8ArQJ6I4EBAXJZ9A1voZIwbd8gbpIwbY4c0IEBAdcA0gCBAQHXAAEBgQEB1wBVIBA0bBRvBOIgbvLQgG8k2zzbPAD+ATQEIFR6mCrbPNs82zxfBFR+3C4BIwEeAQkArgQg2zxsRNs82zxWElYSVhJWEgEjAR4BCQCvBIjbPF8E2zxfBNs8XwQOERoODREZDQwRGAwLERcLChEWCgkRFQkIERQIBxETBwYREgYFEREFBBEQBBA/AhEaAgERGQERGAEjASIBIQCwAeTbPJQRF8AUk1cXcOKUERXA/5NXFXDilBETwAWTVxNw4pQREcAKk1cRcOKTD8AVkj9w4pMNwACSPXDikwvABpI7cOKTCcALkjlw4pMHwBWSN3DilBERwACTVxFw4pMPwAaSP3Dikw3AC5I9cOIQP07QXqEBNARIVH7cVH7cVH7cVH7cVH7c2zzbPFR/7VR/7VR/7VR/7VR/7ds8ALMBNAC3ALIE+ts8DhEeDg0RHQ0MERwMCxEbCwoRGgoJERkJCBEYCAcRFwcGERYGBREVBQQRFAQDERMDAhESAgEREQERENs8jjsOER4ODREdDQwRHAwLERsLChEaCgkRGQkIERgIBxEXBwYRFgYFERUFBBEUBAMREwMCERICARERAREQcOMNALMBNAC0ALUBCNs8Xw8AtgF4DhEeDg0RHQ0MERwMCxEbCwoRGgoJERkJCBEYCAcRFwcGERYGBREVBQQRFAQDERMDAhESAgEREQERENs8ATQEkAEREAGwD9s8bP/bPNs8DhEeDg0RHQ0MERwMCxEbCwoRGgoJERkJCBEYCAcRFwcGERYGBREVBQQRFAQDERMDAhESAgEREQEREAC3ALgAuQC6AB40NDR/gE2AWAimHkYYUFQAHlR+3FR+3FR+3FR+3FR+3AEI2zxs/wC7AQjbPGz/ALwC4Ns8jsl/cYAPERERIRERERARIBEQDxEfDw4RHg4NER0NDBEcDAsRGwsKERoKCREZCQgRGAgHERcHBhEWBgURFQUEERQEAxETA3XbPGzxjh9XEFcQVxBXEFcQVxBXEFcQVxBXEFcQVxBXEFcQVxBw4rABNAC9ADwFpASkVH7cVH7cVH7cVH2cU+1WExETERQREw8REw8ALAazVH7cVH7cVH7WVH7cU+1WFA8RFQ8EvFKkupNSgrqSMXDik1JgupIwcOKTK8AUkXDikyrA/5Fw4pNSkLqSMHDikyfACpFw4pMtwACRcOKTLMADkXDikyvACpFw4pMuwAWRcOKSIm6RcOKRcOMNkXDjDZFw4w0BNgE3ATgBOQIBIADAAMECEa9tbZ5tnjZ4wAEvAMwCASAAwgDDAhCrits82zxs8QEvANoCD6bptnm2eNnjAS8AxAICdgDUANUD8FR+3FR+3FR+3FR+3C6BAQFxQDP0WjCBAQFyWfRaMA4RGw4NERoNDBEZDAsRGAsKERcKCREWCQgRFQgHERQHBhETBgUREgUEEREEAxEQAxAvAREbAREa2zyUERHAAJNXEXDikw/AAJI/cOKTDcAOkj1w4pNXEnDjDQE0AMUAxgAIERLAFASilBEQwP+TVxBw4pMOwAWSPnDikwzACpI8cOKUERHAAJNXEXDikw/AA5I/cOKTDcAKkj1w4pMPwAWSP3DikxEQbpNXEHDikXDjDZFw4w2RcOMNAMcAyADJAMoAei6BAQFzWfQNb6GSMG3fIG6SMG2OHNCBAQHXANIAgQEB1wABAYEBAdcAVSAQNGwUbwTiIG7y0IBvJF8DwAUAfC6BAQFzWfQNb6GSMG3fIG6SMG2OHNCBAQHXANIAgQEB1wABAYEBAdcAVSAQNGwUbwTiIG7y0IBvJGwTW8AAAIIugQEBc1n0DW+hkjBt3yBukjBtjhzQgQEB1wDSAIEBAdcAAQGBAQHXAFUgEDRsFG8E4iBu8tCAbyRsEzAxgQCWugH+jj8ugQEBc1n0DW+hkjBt3yBukjBtjhzQgQEB1wDSAIEBAdcAAQGBAQHXAFUgEDRsFG8E4iBu8tCAbyRsE2whwACRcOIvgQEB9IVvpSCREpUxbTJtAeKQjh8wIMADErCBAQFWEUATWfR4b6UglALUMFiVMW0ybQHi6Fs/T+1MGwDLAA5IGRBnRRRZAfZTEYEBAYBkWfQNb6GSMG3fIG6SMG2X0PQEATFvAeIgbvLQgG8hgQEBeln0DW+hkjBt3yBukjBtjhzQgQEB1wDSAIEBAdcAAQGBAQHXAFUgEDRsFG8E4iBu8tCAbyQxgQPoI8AUkyLA/5Fw4pF/kXDikyHACpFw4iWBAQEAzQL49IVvpSCREpUxbTJtAeKQjsMgbpIwbZfQ9AQBMW8B4iBu8tCAbyEggQEB9IVvpSCREpUxbTJtAeKQiuhfA4EBAScCWfR4b6UglALUMFiVMW0ybQHi6FttgQEBelR3ZCjIVTBQNIEBAc8AUCNQI8oAAQGBAQHPAIEBAc8AyQFEAM4D/iBulTBZ9FowlEEz9BXibRaBAQFQZHoGyFUwUDSBAQHPAFAjUCPKAAEBgQEBzwCBAQHPAMkUEyBulTBZ9FowlEEz9BXiIoEBAfSFb6UgkRKVMW0ybQHikIroWyCBAQH0hW+lIJESlTFtMm0B4pCK6F8DgQEBgGQDyAEB9ADJEDQAzwDQANEA0CBukjBtjhzQgQEB1wDSAIEBAdcAAQGBAQHXAFUgEDRsFG8E4iBu8tCAbyQkwAqTA8AUkjNw4pMBwP+SMXDilIED6LqSMHDiksAKkjBw4hOwgQEBVEQUWfR4b6UglALUMFiVMW0ybQHiANAgbpIwbY4c0IEBAdcA0gCBAQHXAAEBgQEB1wBVIBA0bBRvBOIgbvLQgG8kJMAKkwPAFJIzcOKTAcD/kjFw4pSBA+i6kjBw4pLACpIwcOITsIEBAVRCFFn0eG+lIJQC1DBYlTFtMm0B4gP8QUAgbpUwWfRaMJRBM/QV4iCBAQH0hW+lIJESlTFtMm0B4pCOwyBukjBtl9D0BAExbwHiIG7y0IBvISCBAQH0hW+lIJESlTFtMm0B4pCK6F8DgQEBIgJZ9HhvpSCUAtQwWJUxbTJtAeLoXwNV4Ns8AREQAbAQ7xDeEM0QvBCrANIBNADTAN4gbpIwbY4c0IEBAdcA0gCBAQHXAAEBgQEB1wBVIBA0bBRvBOIgbvLQgG8kJsBkkyTACpFw4pMDwBSSM3DikwHA/5IxcOKUgQPoupIwcOKSwAqSMHDiFbCBAQFUQhZZ9HhvpSCUAtQwWJUxbTJtAeIAIBCaEIkQeBBnEFYQRRA0QTACD6v2zzbPGzxgAS8A1gIPqTbPNs8bPGABLwDXAAJ/BCBUepgq2zzbPNs8XwRUftwuASEBHwEeANgEINs8bETbPNs8VhJWElYSVhIBIQEfAR4A2QSI2zxfBNs8XwTbPF8EDhEaDg0RGQ0MERgMCxEXCwoRFgoJERUJCBEUCAcREwcGERIGBRERBQQREAQQPwIRGgIBERkBERgBIQEjASIBJAHwUzOBAQFxWfQNb6GSMG3fIG6SMG2OHNCBAQHXANIAgQEB1wABAYEBAdcAVSAQNGwUbwTiIG7y0IBvJF8DIYEBAXFZ9A1voZIwbd8gbpIwbY4c0IEBAdcA0gCBAQHXAAEBgQEB1wBVIBA0bBRvBOIgbvLQgG8kXwO6ANsB/I55JIEBAXFZ9A1voZIwbd8gbpIwbY4c0IEBAdcA0gCBAQHXAAEBgQEB1wBVIBA0bBRvBOIgbvLQgG8kbBNbIYEBAXFZ9A1voZIwbd8gbpIwbY4c0IEBAdcA0gCBAQHXAAEBgQEB1wBVIBA0bBRvBOIgbvLQgG8kbBNbupFw4gDcBBiRcOMNkXDjDZFw4w0A3QDeAN8A4AD2JIEBAXFZ9A1voZIwbd8gbpIwbY4c0IEBAdcA0gCBAQHXAAEBgQEB1wBVIBA0bBRvBOIgbvLQgG8kbBMwMSGBAQFxWfQNb6GSMG3fIG6SMG2OHNCBAQHXANIAgQEB1wABAYEBAdcAVSAQNGwUbwTiIG7y0IBvJGwTMDG6APYkgQEBcVn0DW+hkjBt3yBukjBtjhzQgQEB1wDSAIEBAdcAAQGBAQHXAFUgEDRsFG8E4iBu8tCAbyRsE2whIYEBAXFZ9A1voZIwbd8gbpIwbY4c0IEBAdcA0gCBAQHXAAEBgQEB1wBVIBA0bBRvBOIgbvLQgG8kbBNsIboA7iSBAQFyWfQNb6GSMG3fIG6SMG2OHNCBAQHXANIAgQEB1wABAYEBAdcAVSAQNGwUbwTiIG7y0IBvJF8DIYEBAXJZ9A1voZIwbd8gbpIwbY4c0IEBAdcA0gCBAQHXAAEBgQEB1wBVIBA0bBRvBOIgbvLQgG8kXwO6AfyOeSSBAQFyWfQNb6GSMG3fIG6SMG2OHNCBAQHXANIAgQEB1wABAYEBAdcAVSAQNGwUbwTiIG7y0IBvJGwTWyGBAQFyWfQNb6GSMG3fIG6SMG2OHNCBAQHXANIAgQEB1wABAYEBAdcAVSAQNGwUbwTiIG7y0IBvJGwTW7qRcOIA4QQYkXDjDZFw4w2RcOMNAOIA4wDkAOUA9iSBAQFyWfQNb6GSMG3fIG6SMG2OHNCBAQHXANIAgQEB1wABAYEBAdcAVSAQNGwUbwTiIG7y0IBvJGwTMDEhgQEBcln0DW+hkjBt3yBukjBtjhzQgQEB1wDSAIEBAdcAAQGBAQHXAFUgEDRsFG8E4iBu8tCAbyRsEzAxugD2JIEBAXJZ9A1voZIwbd8gbpIwbY4c0IEBAdcA0gCBAQHXAAEBgQEB1wBVIBA0bBRvBOIgbvLQgG8kbBNsISGBAQFyWfQNb6GSMG3fIG6SMG2OHNCBAQHXANIAgQEB1wABAYEBAdcAVSAQNGwUbwTiIG7y0IBvJGwTbCG6AO4kgQEBc1n0DW+hkjBt3yBukjBtjhzQgQEB1wDSAIEBAdcAAQGBAQHXAFUgEDRsFG8E4iBu8tCAbyRfAyGBAQFzWfQNb6GSMG3fIG6SMG2OHNCBAQHXANIAgQEB1wABAYEBAdcAVSAQNGwUbwTiIG7y0IBvJF8DugH8jnkkgQEBc1n0DW+hkjBt3yBukjBtjhzQgQEB1wDSAIEBAdcAAQGBAQHXAFUgEDRsFG8E4iBu8tCAbyRsE1shgQEBc1n0DW+hkjBt3yBukjBtjhzQgQEB1wDSAIEBAdcAAQGBAQHXAFUgEDRsFG8E4iBu8tCAbyRsE1u6kXDiAOYEnJFw4w2RcOMNjj0ggQEBcVn0DW+hkjBt3yBukjBtjhzQgQEB1wDSAIEBAdcAAQGBAQHXAFUgEDRsFG8E4iBu8tCAbyRfA8AUkXDikXDjDQDnAOgA6QDqAPYkgQEBc1n0DW+hkjBt3yBukjBtjhzQgQEB1wDSAIEBAdcAAQGBAQHXAFUgEDRsFG8E4iBu8tCAbyRsEzAxIYEBAXNZ9A1voZIwbd8gbpIwbY4c0IEBAdcA0gCBAQHXAAEBgQEB1wBVIBA0bBRvBOIgbvLQgG8kbBMwMboA9iSBAQFzWfQNb6GSMG3fIG6SMG2OHNCBAQHXANIAgQEB1wABAYEBAdcAVSAQNGwUbwTiIG7y0IBvJGwTbCEhgQEBc1n0DW+hkjBt3yBukjBtjhzQgQEB1wDSAIEBAdcAAQGBAQHXAFUgEDRsFG8E4iBu8tCAbyRsE2whugB8IIEBAXFZ9A1voZIwbd8gbpIwbY4c0IEBAdcA0gCBAQHXAAEBgQEB1wBVIBA0bBRvBOIgbvLQgG8kbBNbwP8EoI4/IIEBAXFZ9A1voZIwbd8gbpIwbY4c0IEBAdcA0gCBAQHXAAEBgQEB1wBVIBA0bBRvBOIgbvLQgG8kbBMwMcAFkXDikXDjDZFw4w2RcOMNAOsA7ADtAO4AfiCBAQFxWfQNb6GSMG3fIG6SMG2OHNCBAQHXANIAgQEB1wABAYEBAdcAVSAQNGwUbwTiIG7y0IBvJGwTbCHACgB6IIEBAXJZ9A1voZIwbd8gbpIwbY4c0IEBAdcA0gCBAQHXAAEBgQEB1wBVIBA0bBRvBOIgbvLQgG8kXwPAFAB8IIEBAXJZ9A1voZIwbd8gbpIwbY4c0IEBAdcA0gCBAQHXAAEBgQEB1wBVIBA0bBRvBOIgbvLQgG8kbBNbwP8EoI4/IIEBAXJZ9A1voZIwbd8gbpIwbY4c0IEBAdcA0gCBAQHXAAEBgQEB1wBVIBA0bBRvBOIgbvLQgG8kbBMwMcBkkXDikXDjDZFw4w2RcOMNAO8A8ADxAPIAfiCBAQFyWfQNb6GSMG3fIG6SMG2OHNCBAQHXANIAgQEB1wABAYEBAdcAVSAQNGwUbwTiIG7y0IBvJGwTbCHAAAB6IIEBAXNZ9A1voZIwbd8gbpIwbY4c0IEBAdcA0gCBAQHXAAEBgQEB1wBVIBA0bBRvBOIgbvLQgG8kXwPABQB8IIEBAXNZ9A1voZIwbd8gbpIwbY4c0IEBAdcA0gCBAQHXAAEBgQEB1wBVIBA0bBRvBOIgbvLQgG8kbBNbwAAD4I5BIIEBAXNZ9A1voZIwbd8gbpIwbY4c0IEBAdcA0gCBAQHXAAEBgQEB1wBVIBA0bBRvBOIgbvLQgG8kbBMwMYEAlrqRcOKRcOMNjoRV4Ns8k1XgcOJWEIEBAfSFb6UgkRKVMW0ybQHikIroW1cQVQ4A8wE0AU8AfiCBAQFzWfQNb6GSMG3fIG6SMG2OHNCBAQHXANIAgQEB1wABAYEBAdcAVSAQNGwUbwTiIG7y0IBvJGwTbCHAAAIQqXvbPNs8bPEBLwD2AhCogNs82zxs8QEvAPkEWnHbPMICIcACIsACsCLCAo6FAts8wgKSAnDiIcACFLAhwAKOhQHbPMIDkgFw4gEuAS4BLgD3BFqOhNs8wgORcOIhwAMTsCHAA46FAds8wgOSAXDijoTbPMIEkXDiIcAFE7AhwAUBLgEuAS4A+AOGjoUB2zzCBpIBcOKOhNs8wgaRcOKOhNs8wgaRcOIBwAYSsASzkX+RcOKSBLOSNHDikgGzkjFw4pIwcN+SAbOSMXDisAEuAS4BLgQScts82zzbPDByAS0BKgEOAPoEENs8Mds82zxyAS0BKgEOAPsDNNs8MNs8MNs8MALABJLABZIwcOKSwAWSMHDiAS0BLgEsBBxUepgq2zzbPFR7qSvbPAD+ATQBIwD9BNzbPA4REw4NERINDBERDAsREAsQrwkREwkIERIIBxERBwYREAYQXwQREwQDERIDAhERAgEREAEP2zyUVhLAFJFw4pRWEcD/kXDilFYQwAWRcOKTL8AKkXDiAREUAbADERIDAhERAgEREAEP2zxfBAD+ATQBIwD/AQjbPF8EARQCnts8AxESAwIREQIBERABERPbPJQREsB4k1cScOKUERDA/5NXEHDikw7ABpI+cOKUERDACpNXEHDiHLAQrxCeEI0QfBBrEFoQSRA4R2AVXiEBFAE0Ag+lpbZ5tnjZ4wEvAQICD6bXtnm2eNnjAS8BAwH2VHl5DhERDg0REA0QzwsREQsKERAKEJ8IEREIBxEQBxBvBRERBQQREAQQPwIREQIBERABD9s8kX+RcOKUERHA/5NXEXDikX+RcOKTD8AKkj9w4pMNwP+SPXDikX+RcOKRf5Fw4hDPEL4QrRCcEIsQehBpEFgQRxA2RUATATQC6FR6mCrbPA4REg4NERENDBEQDBC/ChESCgkREQkIERAIEH8GERIGBRERBQQREAQQPwIREgIBEREBERDbPJMPwACSP3DilBERwACTVxFw4pMPwACSP3Dikw3AAJI9cOIQvxCuEJ0QjBB7EGoQWRBIEDdGUF4hAQQBNAAMXwRwcCEiAhCr5ts82zxs8QEvAQcCEKjj2zzbPGzxAS8BDAQgVHqYKts82zzbPF8EVH7cLgEiAQkBHwEIBCDbPGxE2zzbPFYSVhJWElYSASIBCQEfAQoBCNs8bEQBIQSI2zxfBNs8XwTbPF8EDhEaDg0RGQ0MERgMCxEXCwoRFgoJERUJCBEUCAcREwcGERIGBRERBQQREAQQPwIRGgIBERkBERgBIgEhASMBCwHk2zyUERfAFZNXF3DilBEVwP+TVxVw4pQRE8AGk1cTcOKUERHAC5NXEXDikw/AFZI/cOKTDcAAkj1w4pMLwAaSO3DikwnAC5I5cOKTB8AVkjdw4pQREcAAk1cRcOKTD8AGkj9w4pMNwAuSPXDiED9O0F6hATQEEnLbPNs82zwwcgEtAQ4BKgENBBDbPDHbPNs8cgEtAQ4BKgEPAQbbPDEBLAM02zww2zww2zwwAsAEksAFkjBw4pLABZIwcOIBLQEsAS4CD6Vjtnm2eNnjAS8BEgIPphG2ebZ42eMBLwETAYJUephUei26k1MtupFw4pNTHLqRcOKTUwu6kXDikwPAFJIzcOKTAcD/kjFw4pLABZIwcOKSwAqSMHDijoLbPJFw4gE0AuhUepgq2zwOERIODRERDQwREAwQvwoREgoJEREJCBEQCBB/BhESBgUREQUEERAEED8CERICARERAREQ2zyTD8B4kj9w4pQREcD/k1cRcOKTD8AGkj9w4pMNwAqSPXDiEL8QrhCdEIwQexBqEFkQSBA3RlBeIQEUATQADgOmZAGkUAMCoFR+3FR+3FR+3FR+3FR+3A4RHQ4NERwNDBEbDAsRGgsKERkKCREYCQgRFwgHERYHBhEVBgURFAUEERMEAxESAwIREQIBERABD9s8k2z/cOMNATQBFgF6DhEdDg0RHA0MERsMCxEaCwoRGQoJERgJCBEXCAcRFgcGERUGBREUBQQREwQDERIDAhERAgEREAEP2zxs8QE0Ag+122ebZ42eMAEvARkCD7D7Z5tnjZ4wAS8BHARecds8wgEhwAJ/I8ACErAjwgGRf46GA9s8wgIU4iTAAhKwJMMCkX+OhgTbPMICFeIBLgEuAS4BGgRikX+OhgTbPMIDFeIlwAMSsCXDA5F/joYF2zzBAxbikX+OhgXbPMEEFuImwAUSsCbDBQEuAS4BLgEbA4CRf46GBts8wgUX4pF/joYG2zzCBhfikX+OhgbbPMIGF+IHwAawBZJwNN8DknAy3wGSMHDfkbOSMHDiknAy3wGwAS4BLgEuBCBUepgq2zzbPNs8XwRUftwuASEBHgEfAR0EINs8bETbPNs8VhJWElYSVhIBIQEeAR8BIAEI2zxsRAEiAQjbPGxEASMEiNs8XwTbPF8E2zxfBA4RGg4NERkNDBEYDAsRFwsKERYKCREVCQgRFAgHERMHBhESBgUREQUEERAEED8CERoCAREZAREYASEBIgEjASQAEAKzVHMBJRBGABgDpAGkA6RUcSMjEFcACFRzISMB5Ns8lBEXwBSTVxdw4pQRFcAAk1cVcOKUERPABZNXE3DilBERwAqTVxFw4pMPwBWSP3Dikw3AAJI9cOKTC8AGkjtw4pMJwAuSOXDikwfAFZI3cOKUERHAAJNXEXDikw/ABpI/cOKTDcALkj1w4hA/TtBeoQE0Ag+lhbZ5tnjZ4wEvAScCD6fTtnm2eNnjAS8BMAQScts82zzbPDByASwBKQEqASgEENs8Mds82zxyASwBKQEqASsBBts8MQEtAQbbPDEBLgM02zww2zww2zwwAsACksAFkjBw4pLABZIwcOIBLAEtAS4AAiAABqoAIAAEpCAB2O1E0NIAAY5ggQEB1wABAdIAgQEB1wABAYEBAdcAVSAD1AHQgQEB1wDSAIEBAdcAAQGBAQHXAFUgEDQE1DDQ0gCBAQHXAAEBgQEB1wBVIAP0BPQE9ATSADAQvxC+EJoQiRB4EFYQRWwf4DDbPAExAvYjgQEBcXBwVhNyyFUwUDSBAQHPAFAjUCPKAAEBgQEBzwCBAQHPAMkgbpUwWfRaMJRBM/QV4lXg2zyOPS+BAQFxWfQNb6GSMG3fIG6SMG2OHNCBAQHXANIAgQEB1wABAYEBAdcAVSAQNGwUbwTiIG7y0IBvJF8DwACRcOIBNAE1AfJ1f3V6bCGAFH91em1tbXBwcIALMIAOcHOBAQFxVH7cLshVMFA0gQEBzwBQI1AjygABAYEBAc8AgQEBzwDJEDsgbpUwWfRaMJRBM/QV4lPLgGRwgQEBUENyUTXIVTBQNIEBAc8AUCNQI8oAAQGBAQHPAIEBAc8AyRA0ATIB/iBulTBZ9FowlEEz9BXigQCWdXCBAQEDcwbIVTBQNIEBAc8AUCNQI8oAAQGBAQHPAIEBAc8AyUEwIG6VMFn0WjCUQTP0FeJtgQEBelR/7S/IVTBQNIEBAc8AUCNQI8oAAQGBAQHPAIEBAc8AySBulTBZ9FowlEEz9BXigQEBgGQBMwBOAsgBAfQAyRA5EiBulTBZ9FowlEEz9BXiHRCMGxCKGRcQRhA1QQQDBMImwACTJcAAkXDikyTADpFw4pMqwBSRcOKTKcD/kXDikyjABZFw4pMnwAqRcOKTLcAAkXDikyzAA5Fw4pMrwAqRcOKTLsAFkXDikiJukXDikiJukXDikXDjDZFw4w2RcOMNATYBNwE4ATkEno4+L4EBAXFZ9A1voZIwbd8gbpIwbY4c0IEBAdcA0gCBAQHXAAEBgQEB1wBVIBA0bBRvBOIgbvLQgG8kbBNbwACRcOKRcOMNkXDjDZFw4w0BRQFGAUcBSAB6I4EBAXFZ9A1voZIwbd8gbpIwbY4c0IEBAdcA0gCBAQHXAAEBgQEB1wBVIBA0bBRvBOIgbvLQgG8kXwPAFAB8I4EBAXFZ9A1voZIwbd8gbpIwbY4c0IEBAdcA0gCBAQHXAAEBgQEB1wBVIBA0bBRvBOIgbvLQgG8kbBNbwP8AfiOBAQFxWfQNb6GSMG3fIG6SMG2OHNCBAQHXANIAgQEB1wABAYEBAdcAVSAQNGwUbwTiIG7y0IBvJGwTMDHABQSgjj8jgQEBcVn0DW+hkjBt3yBukjBtjhzQgQEB1wDSAIEBAdcAAQGBAQHXAFUgEDRsFG8E4iBu8tCAbyRsE2whwAqRcOKRcOMNkXDjDZFw4w0BOgE7ATwBPQB6I4EBAXJZ9A1voZIwbd8gbpIwbY4c0IEBAdcA0gCBAQHXAAEBgQEB1wBVIBA0bBRvBOIgbvLQgG8kXwPAFAB8I4EBAXJZ9A1voZIwbd8gbpIwbY4c0IEBAdcA0gCBAQHXAAEBgQEB1wBVIBA0bBRvBOIgbvLQgG8kbBNbwP8AfiOBAQFyWfQNb6GSMG3fIG6SMG2OHNCBAQHXANIAgQEB1wABAYEBAdcAVSAQNGwUbwTiIG7y0IBvJGwTMDHAZASgjj8jgQEBcln0DW+hkjBt3yBukjBtjhzQgQEB1wDSAIEBAdcAAQGBAQHXAFUgEDRsFG8E4iBu8tCAbyRsE2whwACRcOKRcOMNkXDjDZFw4w0BPgE/AUABQQB6I4EBAXNZ9A1voZIwbd8gbpIwbY4c0IEBAdcA0gCBAQHXAAEBgQEB1wBVIBA0bBRvBOIgbvLQgG8kXwPABQB8I4EBAXNZ9A1voZIwbd8gbpIwbY4c0IEBAdcA0gCBAQHXAAEBgQEB1wBVIBA0bBRvBOIgbvLQgG8kbBNbwAAAgiOBAQFzWfQNb6GSMG3fIG6SMG2OHNCBAQHXANIAgQEB1wABAYEBAdcAVSAQNGwUbwTiIG7y0IBvJGwTMDGBAJa6AuCOPyOBAQFzWfQNb6GSMG3fIG6SMG2OHNCBAQHXANIAgQEB1wABAYEBAdcAVSAQNGwUbwTiIG7y0IBvJGwTbCHAAJFw4iSBAQH0hW+lIJESlTFtMm0B4pCK6FsigQEB9IVvpSCREpUxbTJtAeKQiuhbAUIBQwBYMCDAAZF/kyDAAuKRf5MgwAPiErCBAQFURhNZ9HhvpSCUAtQwWJUxbTJtAeIBhiBukjBtl9D0BAExbwHiIG7y0IBvISCBAQH0hW+lIJESlTFtMm0B4pCK6F8DgQEBJAJZ9HhvpSCUAtQwWJUxbTJtAeIBRADaIG6SMG2OHNCBAQHXANIAgQEB1wABAYEBAdcAVSAQNGwUbwTiIG7y0IBvJCbAZJMkwAqRcOKTA8AUkjNw4pMBwP+SMXDiksAFkjBw4pLACpIwcOIUsIEBAVRCFVn0eG+lIJQC1DBYlTFtMm0B4gB+L4EBAXFZ9A1voZIwbd8gbpIwbY4c0IEBAdcA0gCBAQHXAAEBgQEB1wBVIBA0bBRvBOIgbvLQgG8kbBMwMcAFAH4vgQEBcVn0DW+hkjBt3yBukjBtjhzQgQEB1wDSAIEBAdcAAQGBAQHXAFUgEDRsFG8E4iBu8tCAbyRsE2whwAIAei+BAQFyWfQNb6GSMG3fIG6SMG2OHNCBAQHXANIAgQEB1wABAYEBAdcAVSAQNGwUbwTiIG7y0IBvJF8DwBQEno4+L4EBAXJZ9A1voZIwbd8gbpIwbY4c0IEBAdcA0gCBAQHXAAEBgQEB1wBVIBA0bBRvBOIgbvLQgG8kbBNbwP+RcOKRcOMNkXDjDZFw4w0BSQFKAUsBTAB+L4EBAXJZ9A1voZIwbd8gbpIwbY4c0IEBAdcA0gCBAQHXAAEBgQEB1wBVIBA0bBRvBOIgbvLQgG8kbBMwMcBkAH4vgQEBcln0DW+hkjBt3yBukjBtjhzQgQEB1wDSAIEBAdcAAQGBAQHXAFUgEDRsFG8E4iBu8tCAbyRsE2whwAAAei+BAQFzWfQNb6GSMG3fIG6SMG2OHNCBAQHXANIAgQEB1wABAYEBAdcAVSAQNGwUbwTiIG7y0IBvJF8DwAUDzI4+L4EBAXNZ9A1voZIwbd8gbpIwbY4c0IEBAdcA0gCBAQHXAAEBgQEB1wBVIBA0bBRvBOIgbvLQgG8kbBNbwACRcOKRcOMNkXDjDVYQgQEB9IVvpSCREpUxbTJtAeKQiuhbVxBVDgFNAU4BTwCCL4EBAXNZ9A1voZIwbd8gbpIwbY4c0IEBAdcA0gCBAQHXAAEBgQEB1wBVIBA0bBRvBOIgbvLQgG8kbBMwMYEAlroAfi+BAQFzWfQNb6GSMG3fIG6SMG2OHNCBAQHXANIAgQEB1wABAYEBAdcAVSAQNGwUbwTiIG7y0IBvJGwTbCHAAABaMCDAAZF/kyDAAuKRf5MgwAPiErCBAQFWEkATWfR4b6UglALUMFiVMW0ybQHi","abi":"{\"name\":\"SemanticsTester\",\"types\":[{\"name\":\"DataSize\",\"header\":null,\"fields\":[{\"name\":\"cells\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"bits\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"refs\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}}]},{\"name\":\"StateInit\",\"header\":null,\"fields\":[{\"name\":\"code\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":false}},{\"name\":\"data\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":false}}]},{\"name\":\"Context\",\"header\":null,\"fields\":[{\"name\":\"bounceable\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"sender\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"value\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"raw\",\"type\":{\"kind\":\"simple\",\"type\":\"slice\",\"optional\":false}}]},{\"name\":\"SendParameters\",\"header\":null,\"fields\":[{\"name\":\"mode\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"body\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}},{\"name\":\"code\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}},{\"name\":\"data\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}},{\"name\":\"value\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"to\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"bounce\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}}]},{\"name\":\"MessageParameters\",\"header\":null,\"fields\":[{\"name\":\"mode\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"body\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}},{\"name\":\"value\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"to\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"bounce\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}}]},{\"name\":\"DeployParameters\",\"header\":null,\"fields\":[{\"name\":\"mode\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"body\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}},{\"name\":\"value\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"bounce\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"init\",\"type\":{\"kind\":\"simple\",\"type\":\"StateInit\",\"optional\":false}}]},{\"name\":\"StdAddress\",\"header\":null,\"fields\":[{\"name\":\"workchain\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":8}},{\"name\":\"address\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":256}}]},{\"name\":\"VarAddress\",\"header\":null,\"fields\":[{\"name\":\"workchain\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":32}},{\"name\":\"address\",\"type\":{\"kind\":\"simple\",\"type\":\"slice\",\"optional\":false}}]},{\"name\":\"BasechainAddress\",\"header\":null,\"fields\":[{\"name\":\"hash\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":true,\"format\":257}}]},{\"name\":\"SA\",\"header\":null,\"fields\":[{\"name\":\"a1\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"a2\",\"type\":{\"kind\":\"simple\",\"type\":\"SB\",\"optional\":false}}]},{\"name\":\"SB\",\"header\":null,\"fields\":[{\"name\":\"b1\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"b2\",\"type\":{\"kind\":\"simple\",\"type\":\"SC\",\"optional\":false}},{\"name\":\"b3\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}}]},{\"name\":\"SC\",\"header\":null,\"fields\":[{\"name\":\"c1\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}}]},{\"name\":\"MapWrapper\",\"header\":null,\"fields\":[{\"name\":\"m\",\"type\":{\"kind\":\"dict\",\"key\":\"int\",\"value\":\"SA\",\"valueFormat\":\"ref\"}}]},{\"name\":\"SemanticsTester$Data\",\"header\":null,\"fields\":[{\"name\":\"sC\",\"type\":{\"kind\":\"simple\",\"type\":\"SC\",\"optional\":false}},{\"name\":\"sB\",\"type\":{\"kind\":\"simple\",\"type\":\"SB\",\"optional\":false}},{\"name\":\"sA\",\"type\":{\"kind\":\"simple\",\"type\":\"SA\",\"optional\":false}},{\"name\":\"uB\",\"type\":{\"kind\":\"simple\",\"type\":\"SB\",\"optional\":false}},{\"name\":\"mA\",\"type\":{\"kind\":\"dict\",\"key\":\"int\",\"value\":\"SA\",\"valueFormat\":\"ref\"}},{\"name\":\"mB\",\"type\":{\"kind\":\"dict\",\"key\":\"int\",\"value\":\"bool\"}},{\"name\":\"mC\",\"type\":{\"kind\":\"dict\",\"key\":\"int\",\"value\":\"MapWrapper\",\"valueFormat\":\"ref\"}},{\"name\":\"mutateContractStateResult\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}}]}],\"receivers\":[{\"receiver\":\"internal\",\"message\":{\"kind\":\"empty\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"text\",\"text\":\"mutate\"}}],\"getters\":[{\"name\":\"checkAllContractFieldsAreUnchanged\",\"methodId\":89972,\"arguments\":[],\"returnType\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"structAssign1\",\"methodId\":126129,\"arguments\":[],\"returnType\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"structAssign2\",\"methodId\":122066,\"arguments\":[],\"returnType\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"paramStruct1\",\"methodId\":101710,\"arguments\":[],\"returnType\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"paramStruct2\",\"methodId\":113965,\"arguments\":[],\"returnType\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"mutateParamStruct1\",\"methodId\":122731,\"arguments\":[],\"returnType\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"mutateParamStruct2\",\"methodId\":126728,\"arguments\":[],\"returnType\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"testReturnedStructs\",\"methodId\":120944,\"arguments\":[],\"returnType\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"mutatesChainStruct1\",\"methodId\":111427,\"arguments\":[],\"returnType\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"mutatesChainStruct2\",\"methodId\":99104,\"arguments\":[],\"returnType\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"mutatesChainStruct3\",\"methodId\":103169,\"arguments\":[],\"returnType\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"mutatesChainStruct4\",\"methodId\":123878,\"arguments\":[],\"returnType\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"mutatesChainStruct5\",\"methodId\":127943,\"arguments\":[],\"returnType\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"mutatesChainStruct6\",\"methodId\":115620,\"arguments\":[],\"returnType\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"mapAssign1\",\"methodId\":116618,\"arguments\":[],\"returnType\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"mapAssign2\",\"methodId\":129001,\"arguments\":[],\"returnType\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"paramMap1\",\"methodId\":94790,\"arguments\":[],\"returnType\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"paramMap2\",\"methodId\":82469,\"arguments\":[],\"returnType\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"mutateParamMap1\",\"methodId\":78185,\"arguments\":[],\"returnType\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"mutateParamMap2\",\"methodId\":65802,\"arguments\":[],\"returnType\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"testReturnedMaps1\",\"methodId\":110855,\"arguments\":[],\"returnType\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"mutateNestedMap1\",\"methodId\":118490,\"arguments\":[],\"returnType\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"contractAssign1\",\"methodId\":127255,\"arguments\":[],\"returnType\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"contractAssign2\",\"methodId\":115060,\"arguments\":[],\"returnType\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"paramContract\",\"methodId\":92093,\"arguments\":[],\"returnType\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"mutateParamContract\",\"methodId\":79882,\"arguments\":[],\"returnType\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"address\",\"methodId\":69216,\"arguments\":[],\"returnType\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"testReturnedContracts\",\"methodId\":113327,\"arguments\":[],\"returnType\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"mutateContractStateFlag\",\"methodId\":67465,\"arguments\":[],\"returnType\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"changesPersisted\",\"methodId\":76822,\"arguments\":[],\"returnType\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"mutatesChainInt1\",\"methodId\":119936,\"arguments\":[],\"returnType\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"mutatesChainInt2\",\"methodId\":124131,\"arguments\":[],\"returnType\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"mutatesChainInt3\",\"methodId\":128194,\"arguments\":[],\"returnType\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"mutatesChainInt4\",\"methodId\":99365,\"arguments\":[],\"returnType\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"mutatesChainInt5\",\"methodId\":103428,\"arguments\":[],\"returnType\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"mutatesChainInt6\",\"methodId\":107623,\"arguments\":[],\"returnType\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"andMutateShortCircuit\",\"methodId\":119163,\"arguments\":[],\"returnType\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"andInfiniteLoopShortCircuit\",\"methodId\":110116,\"arguments\":[],\"returnType\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"andExceptionShortCircuit\",\"methodId\":68264,\"arguments\":[],\"returnType\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"orMutateShortCircuit\",\"methodId\":127918,\"arguments\":[],\"returnType\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"orInfiniteLoopShortCircuit\",\"methodId\":66777,\"arguments\":[],\"returnType\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"orExceptionShortCircuit\",\"methodId\":67804,\"arguments\":[],\"returnType\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"ternaryMutateShortCircuit\",\"methodId\":73382,\"arguments\":[],\"returnType\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"ternaryInfiniteLoopShortCircuit\",\"methodId\":115599,\"arguments\":[],\"returnType\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"ternaryExceptionShortCircuit\",\"methodId\":90901,\"arguments\":[],\"returnType\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"testAddressEquality\",\"methodId\":92871,\"arguments\":[],\"returnType\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"testInversesParseStdAddressAndNewAddress\",\"methodId\":109118,\"arguments\":[],\"returnType\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"testSliceEquality1\",\"methodId\":83228,\"arguments\":[],\"returnType\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"testSliceEquality2\",\"methodId\":95615,\"arguments\":[],\"returnType\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"testCellEquality1\",\"methodId\":91507,\"arguments\":[],\"returnType\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"testCellEquality2\",\"methodId\":87312,\"arguments\":[],\"returnType\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"testCellEquality3\",\"methodId\":83249,\"arguments\":[],\"returnType\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}}],\"errors\":{\"2\":{\"message\":\"Stack underflow\"},\"3\":{\"message\":\"Stack overflow\"},\"4\":{\"message\":\"Integer overflow\"},\"5\":{\"message\":\"Integer out of expected range\"},\"6\":{\"message\":\"Invalid opcode\"},\"7\":{\"message\":\"Type check error\"},\"8\":{\"message\":\"Cell overflow\"},\"9\":{\"message\":\"Cell underflow\"},\"10\":{\"message\":\"Dictionary error\"},\"11\":{\"message\":\"'Unknown' error\"},\"12\":{\"message\":\"Fatal error\"},\"13\":{\"message\":\"Out of gas error\"},\"14\":{\"message\":\"Virtualization error\"},\"32\":{\"message\":\"Action list is invalid\"},\"33\":{\"message\":\"Action list is too long\"},\"34\":{\"message\":\"Action is invalid or not supported\"},\"35\":{\"message\":\"Invalid source address in outbound message\"},\"36\":{\"message\":\"Invalid destination address in outbound message\"},\"37\":{\"message\":\"Not enough Toncoin\"},\"38\":{\"message\":\"Not enough extra currencies\"},\"39\":{\"message\":\"Outbound message does not fit into a cell after rewriting\"},\"40\":{\"message\":\"Cannot process a message\"},\"41\":{\"message\":\"Library reference is null\"},\"42\":{\"message\":\"Library change action error\"},\"43\":{\"message\":\"Exceeded maximum number of cells in the library or the maximum depth of the Merkle tree\"},\"50\":{\"message\":\"Account state size exceeded limits\"},\"128\":{\"message\":\"Null reference exception\"},\"129\":{\"message\":\"Invalid serialization prefix\"},\"130\":{\"message\":\"Invalid incoming message\"},\"131\":{\"message\":\"Constraints error\"},\"132\":{\"message\":\"Access denied\"},\"133\":{\"message\":\"Contract stopped\"},\"134\":{\"message\":\"Invalid argument\"},\"135\":{\"message\":\"Code of a contract was not found\"},\"136\":{\"message\":\"Invalid standard address\"}},\"interfaces\":[\"org.ton.introspection.v0\",\"org.ton.abi.ipfs.v0\",\"org.ton.deploy.lazy.v0\",\"org.ton.debug.v0\"]}","init":{"kind":"direct","args":[],"prefix":{"bits":1,"value":0},"deployment":{"kind":"system-cell","system":null}},"sources":{"e2e-emulated/contracts/semantics.tact":"c3RydWN0IFNBIHsKICAgIGExOiBJbnQ7CiAgICBhMjogU0I7Cn0KCnN0cnVjdCBTQiB7CiAgICBiMTogQm9vbDsKICAgIGIyOiBTQzsKICAgIGIzOiBJbnQ7Cn0KCnN0cnVjdCBTQyB7CiAgICBjMTogSW50Owp9CgovLyBXcmFwcGVyIHN0cnVjdCBpbiBvcmRlciB0byBwYXNzIG1hcHMgdG8gbXV0YXRpbmcgZnVuY3Rpb25zLiBTZWUgaXNzdWUgIzgxNS4KLy8gQWxzbywgaXQgaXMgdXNlZnVsIGZvciBuZXN0aW5nIG1hcHMgaW5zaWRlIG1hcHMuCnN0cnVjdCBNYXBXcmFwcGVyIHsKICAgIG06IG1hcDxJbnQsU0E+Cn0KCi8qKioqIEF1eGlsaWFyeSBmdW5jdGlvbnMgZm9yIHN0cnVjdHMgKioqKioqKioqKi8KCmZ1biBnZXROZXdTdHJ1Y3QoczogU0EpOiBTQSB7CiAgICAvLyBSZWFzc2lnbiB0aGUgcGFyYW1ldGVyIHZhbHVlCiAgICAvLyBUaGlzIGRvZXMgbm90IGNoYW5nZSB0aGUgc3RydWN0IHBhc3NlZCBhcyBwYXJhbWV0ZXIgdG8gdGhlIGZ1bmN0aW9uCiAgICBzID0gU0Ege2ExOiAwLCBhMjogU0Ige2IxOiBmYWxzZSwgYjI6IFNDIHtjMTogMH0sIGIzOiAwfX07CiAgICByZXR1cm4gczsKfQoKZnVuIGNvcHlBbmRNb2RpZnlTdHJ1Y3QoczogU0EpOiBTQSB7CiAgICAvLyBDaGFuZ2Ugc29tZSBmaWVsZHMgaW4gdGhlIHN0cnVjdCBnaXZlbiBhcyBwYXJhbWV0ZXIKICAgIC8vIFNpbmNlIHN0cnVjdHMgYXJlIHBhc3NlZCBieSB2YWx1ZSwgdGhpcyBkb2VzIG5vdCBjaGFuZ2UgdGhlIHN0cnVjdCBwYXNzZWQgYXMgcGFyYW1ldGVyIHRvIHRoZSBmdW5jdGlvbgogICAgcy5hMSArPSAxMDA7CiAgICBzLmEyLmIyLmMxICs9IDE7CiAgICByZXR1cm4gczsKfQoKZXh0ZW5kcyBtdXRhdGVzIGZ1biByZWFzc2lnblN0cnVjdChzZWxmOiBTQSkgewogICAgLy8gUmVhc3NpZ25pbmcgdGhlIHBhcmFtZXRlciB3aWxsIGNoYW5nZSB0aGUgc3RydWN0IGdpdmVuIGFzIHBhcmFtZXRlcgogICAgc2VsZiA9IFNBIHthMTogMCwgYTI6IFNCIHtiMTogZmFsc2UsIGIyOiBTQyB7YzE6IDB9LCBiMzogMH19Owp9CgpleHRlbmRzIG11dGF0ZXMgZnVuIGNoYW5nZVNvbWVGaWVsZHMoc2VsZjogU0EpIHsKICAgIC8vIENoYW5nZSBzb21lIGZpZWxkcyBpbiB0aGUgc3RydWN0IGdpdmVuIGFzIHBhcmFtZXRlcgogICAgLy8gVGhpcyB3aWxsIGNoYW5nZSB0aGUgc3RydWN0IHBhc3NlZCBhcyBwYXJhbWV0ZXIgdG8gdGhlIGZ1bmN0aW9uCiAgICBzZWxmLmExICs9IDEwMDsKICAgIHNlbGYuYTIuYjIuYzEgKz0gMTsKfQoKZXh0ZW5kcyBmdW4gY29weVN0cnVjdChzZWxmOiBTQSk6IFNBIHsKICAgIC8vIFNpbmNlIHN0cnVjdHMgYXJlIHBhc3NlZCBieSB2YWx1ZSwgInNlbGYiIHdpbGwgYmUgYSBjb3B5IG9mIHRoZSBzdHJ1Y3QgZ2l2ZW4gYXMgcGFyYW1ldGVyCiAgICByZXR1cm4gc2VsZjsKfQoKLy8gSWRlbnRpdHkgZnVuY3Rpb24sIGp1c3QgdG8gdGVzdCBjaGFpbmluZyBvZiBtdXRhdGluZyBmdW5jdGlvbnMuCmV4dGVuZHMgbXV0YXRlcyBmdW4gcmVmbGVjdFN0cnVjdChzZWxmOiBTQSk6IFNBIHsKICAgIHJldHVybiBzZWxmOwp9CgpleHRlbmRzIG11dGF0ZXMgZnVuIGluY3JlbWVudEludEZpZWxkcyhzZWxmOiBTQSk6IFNBIHsKICAgIHNlbGYuYTEgKz0gMTsKICAgIHNlbGYuYTIuYjIuYzEgKz0gMTsKICAgIHNlbGYuYTIuYjMgKz0gMTsKICAgIHJldHVybiBzZWxmOwp9CgpleHRlbmRzIG11dGF0ZXMgZnVuIGZsaXBCb29sZWFuRmllbGRzKHNlbGY6IFNBKTogU0EgewogICAgc2VsZi5hMi5iMSA9ICFzZWxmLmEyLmIxOwogICAgcmV0dXJuIHNlbGY7Cn0KCgovKioqKiBBdXhpbGlhcnkgZnVuY3Rpb25zIGZvciBtYXBzICoqKioqKioqKiovCgpmdW4gZ2V0TmV3TWFwKG06IG1hcDxJbnQsU0E+KTogbWFwPEludCxTQT4gewogICAgLy8gUmVhc3NpZ24gdGhlIHBhcmFtZXRlciB2YWx1ZQogICAgLy8gVGhpcyBkb2VzIG5vdCBjaGFuZ2UgdGhlIG1hcCBwYXNzZWQgYXMgcGFyYW1ldGVyIHRvIHRoZSBmdW5jdGlvbgogICAgbSA9IGVtcHR5TWFwKCk7CiAgICAKICAgIG0uc2V0KDEsIFNBIHthMTogMCwgYTI6IFNCIHtiMTogZmFsc2UsIGIyOiBTQyB7YzE6IDB9LCBiMzogMH19KTsKCiAgICByZXR1cm4gbTsKfQoKZnVuIGNvcHlBbmRNb2RpZnlNYXAobTogbWFwPEludCxTQT4pOiBtYXA8SW50LFNBPiB7CiAgICAvLyBDaGFuZ2Ugc29tZSBlbnRyaWVzIGluIHRoZSBtYXAgZ2l2ZW4gYXMgcGFyYW1ldGVyCiAgICAvLyBTaW5jZSBtYXBzIGFyZSBwYXNzZWQgYnkgdmFsdWUsIHRoaXMgZG9lcyBub3QgY2hhbmdlIHRoZSBtYXAgcGFzc2VkIGFzIHBhcmFtZXRlciB0byB0aGUgZnVuY3Rpb24KCiAgICAvLyBOb3RlIHRoYXQgaXQgaXMgbm90IHBvc3NpYmxlIHRvIGRpcmVjdGx5IGNoYW5nZSB0aGUgc3RydWN0IGluIGVudHJ5IDEgbGlrZSAKICAgIC8vIG0uZ2V0KDEpISEuYTIuYjIuYzEgKz0gNDA7CiAgICAvLyBiZWNhdXNlIHRoZSBjb21waWxlciBvbmx5IGFsbG93cyBwYXRoIGV4cHJlc3Npb25zIG9uIHRoZSBsZWZ0IG9mIGFzc2lnbm1lbnRzLgogICAgLy8gU28sIHdlIG5lZWQgdG8gcmVhZCBtLmdldCgxKSBhbmQgc3RvcmUgaXQgaW4gYSB2YXJpYWJsZToKCiAgICBsZXQgYyA9IG0uZ2V0KDEpISE7CgogICAgLy8gVGhlbiBjaGFuZ2UgdGhlIHN0cnVjdCBmaWVsZCBoZXJlCiAgICBjLmEyLmIyLmMxICs9IDQwOwoKICAgIC8vIEFuZCB0aGVuIHJlYXNzaWduIGVudHJ5IDEKICAgIC8vIElmIHdlIGRvIG5vdCByZWFzc2lnbiBlbnRyeSAxIGluIG0sIHRoZSBjaGFuZ2Ugd2UgZGlkIGluIHRoZSBwcmV2aW91cyBsaW5lCiAgICAvLyB0byBjIHdpbGwgbm90IGJlIHJlZmxlY3RlZCBpbiB0aGUgbWFwIG0sIGJlY2F1c2Ugc3RydWN0IGMgaXMgYSBjb3B5ISEhIChSZWNhbGwgdGhhdAogICAgLy8gc3RydWN0cyBhcmUgYXNzaWduZWQgYnkgdmFsdWUgYXMgd2VsbCkuCiAgICAvLyBUbyBjaGVjayB0aGUgcHJldmlvdXMgY2xhaW0sIHRoaXMgZnVuY3Rpb24gd2lsbCByZXR1cm4gYW4gZW1wdHlNYXAoKQogICAgLy8gaWYgbS5nZXQoMSkhIS5hMi5iMi5jMSA9PSBjLmEyLmIyLmMxIGF0IHRoaXMgcG9pbnQgKHdoaWNoIHdpbGwgbm90IGJlIHRydWUpOgoKICAgIGlmIChtLmdldCgxKSEhLmEyLmIyLmMxID09IGMuYTIuYjIuYzEpIHsKICAgICAgICByZXR1cm4gZW1wdHlNYXAoKTsKICAgIH0KCiAgICBtLnNldCgxLCBjKTsKCiAgICAvLyBOb3cgZGVsZXRlIGVudHJpZXMgMiBhbmQgMwoKICAgIG0uZGVsKDIpOwogICAgbS5kZWwoMyk7CgogICAgcmV0dXJuIG07Cn0KCi8qCkN1cnJlbnRseSwgdGhlIGNvbXBpbGVyIGRvZXMgbm90IGFsbG93IHBhc3NpbmcgbWFwcyB0byBleHRlbnNpb24gKGFuZCBoZW5jZSBtdXRhdGluZykgZnVuY3Rpb25zIAppbiB0aGVpciAic2VsZiIgYXJndW1lbnQuCgpPbmUgd29ya2Fyb3VuZCBpcyB0byB3cmFwIHRoZSBtYXAgdXNpbmcgYSBzdHJ1Y3QsIHNpbmNlIHN0cnVjdHMgYXJlIGFsbG93ZWQgaW4gZXh0ZW5zaW9uIGZ1bmN0aW9ucyAKKHNlZSBpc3N1ZSAjODE1KQoqLwoKZXh0ZW5kcyBtdXRhdGVzIGZ1biByZWFzc2lnbk1hcChzZWxmOiBNYXBXcmFwcGVyKSB7CiAgICAvLyBSZWFzc2lnbmluZyB0aGUgcGFyYW1ldGVyIHdpbGwgY2hhbmdlIHRoZSBtYXAgZ2l2ZW4gYXMgcGFyYW1ldGVyCiAgICBzZWxmID0gTWFwV3JhcHBlciB7bTogZW1wdHlNYXAoKX07CiAgICBzZWxmLm0uc2V0KDEsIFNBIHthMTogMCwgYTI6IFNCIHtiMTogZmFsc2UsIGIyOiBTQyB7YzE6IDB9LCBiMzogMH19KTsKfQoKZXh0ZW5kcyBtdXRhdGVzIGZ1biBjaGFuZ2VTb21lRW50cmllcyhzZWxmOiBNYXBXcmFwcGVyKSB7CiAgICAvLyBDaGFuZ2Ugc29tZSBlbnRyaWVzIGluIHRoZSBtYXAgZ2l2ZW4gYXMgcGFyYW1ldGVyCiAgICAvLyBUaGlzIHdpbGwgY2hhbmdlIHRoZSBtYXAgcGFzc2VkIGFzIHBhcmFtZXRlciB0byB0aGUgZnVuY3Rpb24KCiAgICAvLyBTaW1pbGFyIHRvIGNvbW1lbnRzIGluIGZ1bmN0aW9uIGNvcHlBbmRNb2RpZnlNYXAsIGl0IGlzIG5vdCBwb3NzaWJsZQogICAgLy8gdG8gZGlyZWN0bHkgbXV0YXRlIHRoZSBzdHJ1Y3QgaW4gZW50cnkgMSBvZiB0aGUgbWFwLgogICAgLy8gU28sIGZpcnN0IG1ha2UgYSBsb2NhbCBjb3B5IG9mIHRoZSBzdHJ1Y3QuCiAgICAKICAgIGxldCBjID0gc2VsZi5tLmdldCgxKSEhOwoKICAgIC8vIE1vZGlmeSB0aGUgc3RydWN0CiAgICBjLmEyLmIyLmMxICs9IDMwOwoKICAgIC8vIEFuZCBhc3NpZ24gaXQgYmFjayBpbnRvIGVudHJ5IDEsIGJlY2F1c2UgYyBpcyBhIGNvcHkgc28gZmFyLgogICAgLy8gVG8gY2hlY2sgdGhlIHByZXZpb3VzIGNsYWltLCB0aGlzIGZ1bmN0aW9uIHdpbGwgaW1tZWRpYXRlbHkgcmV0dXJuCiAgICAvLyBpZiBzZWxmLm0uZ2V0KDEpISEuYTIuYjIuYzEgPT0gYy5hMi5iMi5jMSBhdCB0aGlzIHBvaW50ICh3aGljaCB3aWxsIG5vdCBiZSB0cnVlKToKCiAgICBpZiAoc2VsZi5tLmdldCgxKSEhLmEyLmIyLmMxID09IGMuYTIuYjIuYzEpIHsKICAgICAgICByZXR1cm47CiAgICB9CgogICAgc2VsZi5tLnNldCgxLCBjKTsKCiAgICAvLyBOb3cgZGVsZXRlIGVudHJpZXMgMiBhbmQgMwoKICAgIHNlbGYubS5kZWwoMik7CiAgICBzZWxmLm0uZGVsKDMpOwp9CgpleHRlbmRzIGZ1biB1bndyYXBBbmRDb3B5TWFwKHNlbGY6IE1hcFdyYXBwZXIpOiBtYXA8SW50LFNBPiB7CiAgICAvLyBTaW5jZSBzdHJ1Y3RzIGFyZSBwYXNzZWQgYnkgdmFsdWUsICJzZWxmIiB3aWxsIGJlIGEgY29weSBvZiB0aGUgd3JhcHBlZCBtYXAgZ2l2ZW4gYXMgcGFyYW1ldGVyCiAgICAvLyBIZW5jZSwgdGhlIHVud3JhcHBlZCBtYXAgaXMgYSBjb3B5IG9mIHRoZSBtYXAuCiAgICByZXR1cm4gc2VsZi5tOwp9CgpleHRlbmRzIG11dGF0ZXMgZnVuIHVud3JhcE1hcChzZWxmOiBNYXBXcmFwcGVyKTogbWFwPEludCxTQT4gewogICAgLy8gRXZlbiB0aG91Z2ggInNlbGYiIGlzIGEgY29weSwgdGhlIG11dGF0ZXMgZnVuY3Rpb24gd2lsbCBhc3NpZ24gdGhlIGNvcHkgYmFjayBpbnRvICJzZWxmIiBvbmNlIHRoZSBmdW5jdGlvbiBmaW5pc2hlcy4KICAgIC8vIE9ic2VydmUgdGhhdCB0aGUgZnVuY3Rpb24gd2lsbCByZXR1cm4gYSBjb3B5IG9mIHRoZSB3cmFwcGVkIG1hcCBhcyB3ZWxsLgogICAgLy8gVGhpcyBtZWFucyB0aGF0IHRoZXJlIGFyZSBhY3R1YWxseSBUV08gYXNzaWdubWVudHMgd2hlbiBvbmUgZG9lcyBzb21ldGhpbmcgbGlrZSB0aGlzOgogICAgLy8gbSA9IHdtLnVud3JhcE1hcCgpOwogICAgLy8gQWZ0ZXIgInVud3JhcE1hcCIgZmluaXNoZXMgZXhlY3V0aW9uLCB3bSB3aWxsIGJlIHJlYXNzaWduZWQgd2l0aCB0aGUgY29weSBvZiBzZWxmICh3aGljaCBpbiB0aGlzIGNhc2UgaXMgaWRlbnRpY2FsCiAgICAvLyB0byB0aGUgaW5wdXQgdG8gInVud3JhcE1hcCIpLCBhbmQgbSB3aWxsIGJlIGFzc2lnbmVkIHdpdGggInNlbGYubSIgKGNvbXB1dGVkIHVzaW5nIHRoZSBjb3B5IG9mICJzZWxmIikuCiAgICByZXR1cm4gc2VsZi5tOwp9CgovLyBJZGVudGl0eSBmdW5jdGlvbiwganVzdCB0byB0ZXN0IGNoYWluaW5nIG9mIG11dGF0aW5nIGZ1bmN0aW9ucy4KZXh0ZW5kcyBtdXRhdGVzIGZ1biByZWZsZWN0TWFwKHNlbGY6IE1hcFdyYXBwZXIpOiBNYXBXcmFwcGVyIHsKICAgIHJldHVybiBzZWxmOwp9CgovKioqKiBBdXhpbGlhcnkgZnVuY3Rpb25zIGZvciBjb250cmFjdHMgKioqKioqKioqKi8KCmZ1biBjb3B5QW5kTW9kaWZ5Q29udHJhY3QoYzogU2VtYW50aWNzVGVzdGVyKTogU2VtYW50aWNzVGVzdGVyIHsKICAgIC8vIFNpbmNlIGNvbnRyYWN0cyBhcmUgcGFzc2VkIGJ5IHZhbHVlLCB0aGlzIGZ1bmN0aW9uIGNyZWF0ZXMgYSBjb3B5IG9mIHRoZSBjb250cmFjdCB3aGVuIGNhbGxlZC4KICAgIC8vIEluIG90aGVyIHdvcmRzLCBjIGlzIGEgY29weSBvZiB0aGUgY29udHJhY3QgcGFzc2VkIGFzIHBhcmFtZXRlciB0byB0aGUgZnVuY3Rpb24uCgogICAgLy8gTGV0IHVzIG1vZGlmeSBzb21lIGZpZWxkcyBpbiB0aGUgY29weSBjCiAgICBjLnVCID0gU0Ige2IxOiB0cnVlLCBiMjogU0Mge2MxOiA5OX0sIGIzOiA5OH07CiAgICBjLm1BLmRlbCgxKTsKCiAgICAvLyBJdCBpcyBhbHNvIHBvc3NpYmxlIHRvIGNhbGwgY29udHJhY3QgZnVuY3Rpb25zIG9uIHRoZSBjb3B5CiAgICAvLyBUaGlzIGNhbGwgd2lsbCBub3QgY2hhbmdlIHRoZSBzdGF0ZSBvZiBjIGJleW9uZCB0aG9zZSBjaGFuZ2VzIGluIHRoZSBwcmV2aW91cyBsaW5lcy4KICAgIGMuc3RydWN0QXNzaWduMigpOwoKICAgIHJldHVybiBjOwp9CgpleHRlbmRzIG11dGF0ZXMgZnVuIGNoYW5nZVNvbWVDb250cmFjdEZpZWxkcyhzZWxmOiBTZW1hbnRpY3NUZXN0ZXIpIHsKICAgIC8vIENoYW5nZSBzb21lIGZpZWxkcyBpbiB0aGUgY29udHJhY3QgZ2l2ZW4gYXMgcGFyYW1ldGVyCiAgICAvLyBUaGlzIHdpbGwgY2hhbmdlIHRoZSBjb250cmFjdCBwYXNzZWQgYXMgcGFyYW1ldGVyIHRvIHRoZSBmdW5jdGlvbgogICAgc2VsZi51QiA9IFNCIHtiMTogdHJ1ZSwgYjI6IFNDIHtjMTogNzd9LCBiMzogODh9OwogICAgc2VsZi5zQS5hMi5iMi5jMSArPSAzMDsKfQoKLy8gSWRlbnRpdHkgZnVuY3Rpb24sIGJ1dCBhcyBhIHNpbXBsZSBleHRlbmRzIGZ1bmN0aW9uLgpleHRlbmRzIGZ1biBjb3B5Q29udHJhY3Qoc2VsZjogU2VtYW50aWNzVGVzdGVyKTogU2VtYW50aWNzVGVzdGVyIHsKICAgIHJldHVybiBzZWxmOwp9CgovLyBJZGVudGl0eSBmdW5jdGlvbiwganVzdCB0byB0ZXN0IGNoYWluaW5nIG9mIG11dGF0aW5nIGZ1bmN0aW9ucy4KZXh0ZW5kcyBtdXRhdGVzIGZ1biByZWZsZWN0Q29udHJhY3Qoc2VsZjogU2VtYW50aWNzVGVzdGVyKTogU2VtYW50aWNzVGVzdGVyIHsKICAgIHJldHVybiBzZWxmOwp9CgpleHRlbmRzIG11dGF0ZXMgZnVuIGluY3JlbWVudEludEZpZWxkc0luVUIoc2VsZjogU2VtYW50aWNzVGVzdGVyKTogU2VtYW50aWNzVGVzdGVyIHsKICAgIHNlbGYudUIuYjIuYzEgKz0gMTsKICAgIHNlbGYudUIuYjMgKz0gMTsKICAgIHJldHVybiBzZWxmOwp9CgpleHRlbmRzIG11dGF0ZXMgZnVuIGZsaXBCb29sZWFuRmllbGRzSW5VQihzZWxmOiBTZW1hbnRpY3NUZXN0ZXIpOiBTZW1hbnRpY3NUZXN0ZXIgewogICAgc2VsZi51Qi5iMSA9ICFzZWxmLnVCLmIxOwogICAgcmV0dXJuIHNlbGY7Cn0KCgovKioqKiBBdXhpbGlhcnkgZnVuY3Rpb25zIGZvciBpbnRlZ2VycyAqKioqKioqKioqLwoKZXh0ZW5kcyBtdXRhdGVzIGZ1biBtdWx0aXBseUJ5MihzZWxmOiBJbnQpOiBJbnQgewogICAgc2VsZiAqPSAyOwogICAgcmV0dXJuIHNlbGY7Cn0KCmV4dGVuZHMgbXV0YXRlcyBmdW4gaW5jcmVtZW50KHNlbGY6IEludCk6IEludCB7CiAgICBzZWxmICs9IDE7CiAgICByZXR1cm4gc2VsZjsKfQoKZXh0ZW5kcyBtdXRhdGVzIGZ1biBkb05vdGhpbmcoc2VsZjogSW50KTogSW50IHsKICAgIHJldHVybiBzZWxmOwp9CgoKLyoqKiogQXV4aWxpYXJ5IGZ1bmN0aW9ucyBmb3IgYm9vbGVhbiBleHByZXNzaW9ucyAqKioqKioqKioqLwoKZnVuIGluZmluaXRlTG9vcCgpOiBCb29sIHsKICAgIHdoaWxlICh0cnVlKSB7fQogICAgcmV0dXJuIHRydWU7Cn0KCmZ1biB0aHJvd0V4Y2VwdGlvbih2OiBJbnQpOiBCb29sIHsKICAgIC8vIEkgY2Fubm90IHVzZSBkaXJlY3RseSB0aHJvdyh2KSBiZWNhdXNlIG9mIGlzc3VlICM5MDQKICAgIC8vIFNvLCBJIHdpbGwgZ2VuZXJhdGUgYSBkaXZpc2lvbiBieSB6ZXJvCiAgICByZXR1cm4gMSAvIHYgPiAwOwp9CgoKCi8qKioqKiBBdXhpbGlhcnkgZnVuY3Rpb25zIGZvciBzbGljZXMgKi8KCi8vIFJlYWRzIHR3byA2LWJpdCBpbnRlZ2VycyAod2l0aCB2YWx1ZXMgNSBhbmQgMikgZnJvbSB0aGUgc2xpY2UgYW5kIGNoZWNrcyB0aGF0IHRoZSBzbGljZSBpcyBlbXB0eSBhZnRlcndhcmRzLgovLyBUaGlzIHdpbGwgbm90IG1vZGlmeSB0aGUgc2xpY2UgZ2l2ZW4gYXMgcGFyYW1ldGVyLgpmdW4gZnVsbHlSZWFkU2xpY2UoczogU2xpY2UpOiBCb29sIHsKICAgIGxldCBpMSA9IHMubG9hZEludCg2KTsgIC8vIDUKICAgIGxldCBpMiA9IHMubG9hZEludCg2KTsgIC8vIDIKICAgIHMuZW5kUGFyc2UoKTsKCiAgICByZXR1cm4gaTEgPT0gNSAmJiBpMiA9PSAyICYmIHMuZW1wdHkoKTsKfQoKLy8gUmVhZHMgdHdvIDYtYml0IGludGVnZXJzICh3aXRoIHZhbHVlcyA1IGFuZCAyKSBmcm9tIHRoZSBzbGljZSBhbmQgY2hlY2tzIHRoYXQgdGhlIHNsaWNlIGlzIGVtcHR5IGFmdGVyd2FyZHMuCi8vIFRoaXMgd2lsbCBtb2RpZnkgdGhlIHNsaWNlIGdpdmVuIGFzIHBhcmFtZXRlci4KZXh0ZW5kcyBtdXRhdGVzIGZ1biBmdWxseVJlYWRBbmRNb2RpZnlTbGljZShzZWxmOiBTbGljZSk6IEJvb2wgewogICAgbGV0IGkxID0gc2VsZi5sb2FkSW50KDYpOyAgLy8gNQogICAgbGV0IGkyID0gc2VsZi5sb2FkSW50KDYpOyAgLy8gMgogICAgc2VsZi5lbmRQYXJzZSgpOwoKICAgIHJldHVybiBpMSA9PSA1ICYmIGkyID09IDIgJiYgc2VsZi5lbXB0eSgpOwp9CgoKCmNvbnRyYWN0IFNlbWFudGljc1Rlc3RlciB7CgogICAgLy8gQ3VycmVudGx5LCBkZWNsYXJpbmcgZmllbGRzIGxpa2UgdGhpczoKICAgIC8vIAogICAgLy8gc0M6IFNDID0gU0Mge2MxOiA1fTsgCiAgICAvLyBzQjogU0IgPSBTQiB7YjE6IHRydWUsIGIyOiBzQywgYjM6IDEwfTsKICAgIC8vIHNBOiBTQSA9IFNBIHthMTogMjAsIGEyOiBzQn07CiAgICAvLwogICAgLy8gb3IgbGlrZSB0aGlzOgogICAgLy8KICAgIC8vIHNDOiBTQyA9IFNDIHtjMTogNX07IAogICAgLy8gc0I6IFNCID0gU0Ige2IxOiB0cnVlLCBiMjogc2VsZi5zQywgYjM6IDEwfTsKICAgIC8vIHNBOiBTQSA9IFNBIHthMTogMjAsIGEyOiBzZWxmLnNCfTsKICAgIC8vCiAgICAvLyBnaXZlcyBhIGNvbXBpbGF0aW9uIGVycm9yLiBTbywgd2UgbmVlZCB0byBkZWZpbmUgdGhlIGZpZWxkcyBsaWtlIHRoaXM6CgogICAgc0M6IFNDID0gU0Mge2MxOiA1fTsgCiAgICBzQjogU0IgPSBTQiB7YjE6IHRydWUsIGIyOiBTQyB7YzE6IDV9LCBiMzogMTB9OwogICAgc0E6IFNBID0gU0Ege2ExOiAyMCwgYTI6IFNCIHtiMTogdHJ1ZSwgYjI6IFNDIHtjMTogNX0sIGIzOiAxMH19OwogICAgdUI6IFNCOwoKICAgIC8vIEFuIGFsdGVybmF0aXZlIHdvdWxkIGJlIHRvIGFzc2lnbiB0aGVtIGluIHRoZSBpbml0KCkgZnVuY3Rpb24sIHdoaWNoIGFsbG93cyB0aGUgdXNlIG9mIHNlbGYuCgoKICAgIC8vIERlY2xhcmUgc29tZSBtYXBzCgogICAgbUE6IG1hcDxJbnQsU0E+OwogICAgbUI6IG1hcDxJbnQsQm9vbD47CiAgICBtQzogbWFwPEludCxNYXBXcmFwcGVyPjsgICAvLyBTaW11bGF0ZSBuZXN0ZWQgbWFwcyBieSB3cmFwcGluZyB0aGVtIGluIGEgc3RydWN0LCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICJNb3JhbGx5IiwgbUMgaGFzIHR5cGUgbWFwPEludCxtYXA8SW50LFNBPj4uCgoKICAgIC8vIEZsYWcgc3RvcmluZyB0aGUgcmVzdWx0IG9mIGNhbGxpbmcgbWV0aG9kIG11dGF0ZUNvbnRyYWN0U3RhdGUuCiAgICAvLyBTbyB0aGF0IHdlIGNhbiBnZXQgdGhlIHJlc3VsdCB1c2luZyBhIGdldHRlciBtZXRob2QKCiAgICBtdXRhdGVDb250cmFjdFN0YXRlUmVzdWx0OiBCb29sID0gZmFsc2U7CgogICAgaW5pdCgpIHsgCgogICAgICAgIC8qKioqKiBTdHJ1Y3RzICoqKioqLwoKICAgICAgICBzZWxmLnVCLmIxID0gZmFsc2U7ICAgICAgIC8vIFdoYXQgaXMgdGhlIG1lYW5pbmcgb2YgdGhpcz8gc2VsZi51QiBpcyBub3QgaW5pdGlhbGl6ZWQuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJcyB0aGlzIGluc3RhbnRpYXRpbmcgYSBwYXJ0aWFsbHkgY29uc3RydWN0ZWQgc3RydWN0IFNCPwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTmV2ZXJ0aGVsZXNzLCBpdCBpcyBub3QgcG9zc2libGUgdG8gY2hlY2sgaWYgaXQgaXMgYSBwYXJ0aWFsbHkgaW5pdGlhbGl6ZWQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHN0cnVjdCBiZWNhdXNlIHRoZSBjb21waWxlciB3aWxsIG5vdCBhbGxvdyByZWZlcmVuY2luZyBzZWxmLnVCIGluIGFuIGV4cHJlc3Npb24KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVudGlsIHNlbGYudUIgaXMgYWN0dWFsbHkgYXNzaWduZWQuCiAgICAgICAgc2VsZi51Qi5iMiA9IFNDIHtjMTogNDB9OwogICAgICAgIHNlbGYudUIgPSBTQiB7YjE6IGZhbHNlLCBiMjogU0Mge2MxOiAwfSwgYjM6IDExfTsKICAgICAgICBzZWxmLnVCLmIzID0gMTQ7ICAgICAgICAgIC8vIEdldHRlciBzdHJ1Y3RJbml0Q2hlY2sgbGF0ZXIgY2hlY2tzIHRoYXQgaW5pdCByZXNwZWN0cyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMgbGFzdCBhc3NpZ25tZW50CgogICAgICAgIHNlbGYuc0IuYjEgPSBmYWxzZTsKICAgICAgICBzZWxmLnNCLmIyID0gU0Mge2MxOiAzfTsKCiAgICAgICAgCiAgICAgICAgLyoqKiogTWFwcyAqKioqKi8KICAgICAgICAKICAgICAgICAvLyBJbml0aWFsaXplIHRoZSBtQSBtYXAKICAgICAgICBzZWxmLm1BLnNldCgxLCBzZWxmLnNBKTsgICAgIC8vIFRoZSBjb21waWxlciBkb2VzIG5vdCBjb21wbGFpbiB0aGF0IHNlbGYubUEgaXMgbm90IGluaXRpYWxpemVkLCBiZWNhdXNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBtYXAgZmllbGRzIGluIGNvbnRyYWN0cyBhcmUgaW1wbGljaXRseSBpbml0aWFsaXplZCBhcyBlbXB0eS4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZ1bmN0aW9uIGNoZWNrTWFwSW5pdCB3aWxsIGxhdGVyIGNoZWNrIHRoaXMuCiAgICAgICAgCiAgICAgICAgLy8gTWFrZSBhIGNvcHkgb2Ygc0EgdG8gYXNzaWduIGEgZGlmZmVyZW50IGtleSB2YWx1ZSBwYWlyIGluIHRoZSBtYXAKICAgICAgICBsZXQgcyA9IHNlbGYuc0E7CiAgICAgICAgcy5hMi5iMi5jMSA9IDEwMDsKICAgICAgICBzLmEyLmIzID0gMDsKCiAgICAgICAgc2VsZi5tQS5zZXQoMiwgcyk7CgogICAgICAgIC8vIE1vZGlmeSBzdHJ1Y3QgYWdhaW4gdG8gaW5zZXJ0IGFub3RoZXIga2V5LXZhbHVlIHBhaXIKICAgICAgICBzLmEyLmIyLmMxID0gMTUwOwogICAgICAgIHMuYTEgPSA1OwogICAgICAgIHMuYTIuYjEgPSBmYWxzZTsKCiAgICAgICAgc2VsZi5tQS5zZXQoMywgcyk7CgogICAgICAgIC8vIEluaXRpYWxpemUgdGhlIG1DIG1hcC4gVGhlIG5lc3RlZCBtYXAgd2lsbCBjb250YWluIGEgY29weSBvZiBzZWxmLnNBLgogICAgICAgIGxldCBuZXN0ZWRNYXAgPSBNYXBXcmFwcGVyIHttOiBlbXB0eU1hcCgpfTsKICAgICAgICBuZXN0ZWRNYXAubS5zZXQoMTAsIHNlbGYuc0EpOwogICAgICAgIHNlbGYubUMuc2V0KDEwMCwgbmVzdGVkTWFwKTsKICAgICAgICAKICAgICAgICAvKioqKioqIENvbnRyYWN0cyAqKioqKi8KCiAgICAgICAgLyogSSBjb21tZW50ZWQgb3V0IHRoZSBmb2xsb3dpbmcgY29kZSBiZWNhdXNlIAogICAgICAgICAgIHJlYWRpbmcgdGhlIHNlbGYgdmFyaWFibGUgaW5zaWRlIGluaXQgc2hvdWxkIG5vdCBiZSBhbGxvd2VkLiBTZWUgaXNzdWUgIzgxNi4KICAgICAgICAKICAgICAgICBsZXQgY29udHJhY3RfY29weSA9IHNlbGY7CiAgICAgICAgY29udHJhY3RfY29weS5zQyA9IFNDIHtjMTogOH07CiAgICAgICAgKi8KICAgIH0KCiAgICByZWNlaXZlKCkgeyB9CgogICAgcmVjZWl2ZSgibXV0YXRlIikgewogICAgICAgIHNlbGYubXV0YXRlQ29udHJhY3RTdGF0ZVJlc3VsdCA9IHNlbGYubXV0YXRlQ29udHJhY3RTdGF0ZSgpOwogICAgfQoKCiAgICAvLyBJTVBPUlRBTlQ6IFRoZSBvcGVyYXRvciA9PSBkb2VzIG5vdCBhbGxvdyBjb21wYXJpbmcgdHdvIHN0cnVjdHMuCiAgICAvLyBTbywgdG8gY29tcGFyZSBpZiB0d28gc3RydWN0cyBhcmUgZXF1YWwgdXNpbmcgPT0sIG9uZSBuZWVkcyB0byBjb21wYXJlIGVhY2gKICAgIC8vIGZpZWxkIG9mIGJvdGggc3RydWN0cyBtYW51YWxseS4KCgogICAgZ2V0IGZ1biBjaGVja0FsbENvbnRyYWN0RmllbGRzQXJlVW5jaGFuZ2VkKCk6IEJvb2wgewogICAgICAgIAogICAgICAgIGxldCByZXN1bHQgPSAKICAgICAgICAgICAgICAgLy8gc2VsZi51QiBpcyBjb3JyZWN0bHkgaW5pdGlhbGl6ZWQKCiAgICAgICAgICAgICAgIHNlbGYudUIuYjEgPT0gZmFsc2UgJiYKICAgICAgICAgICAgICAgc2VsZi51Qi5iMi5jMSA9PSAwICYmCiAgICAgICAgICAgICAgIHNlbGYudUIuYjMgPT0gMTQgJiYKCiAgICAgICAgICAgICAgIC8vIGluaXQgZG9lcyBub3QgbW9kaWZ5IGRlZmF1bHQgdmFsdWUgb2Ygc2VsZi5zQQogICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgc2VsZi5zQS5hMSA9PSAyMCAmJiAKICAgICAgICAgICAgICAgc2VsZi5zQS5hMi5iMSA9PSB0cnVlICYmCiAgICAgICAgICAgICAgIHNlbGYuc0EuYTIuYjIuYzEgPT0gNSAmJgogICAgICAgICAgICAgICBzZWxmLnNBLmEyLmIzID09IDEwICYmCgogICAgICAgICAgICAgICAvLyBpbml0IG1vZGlmaWVzIGRlZmF1bHQgdmFsdWUgb2Ygc2VsZi5zQgoKICAgICAgICAgICAgICAgc2VsZi5zQi5iMSA9PSBmYWxzZSAmJgogICAgICAgICAgICAgICBzZWxmLnNCLmIyLmMxID09IDMgJiYKICAgICAgICAgICAgICAgc2VsZi5zQi5iMyA9PSAxMCAmJgoKICAgICAgICAgICAgICAgLy8gaW5pdCBkb2VzIG5vdCBjaGFuZ2UgZGVmYXVsdCB2YWx1ZSBvZiBzZWxmLnNDLgoKICAgICAgICAgICAgICAgc2VsZi5zQy5jMSA9PSA1ICYmCgogICAgICAgICAgICAgICAvLyB0aGUgbWFwIHNlbGYubUIgaXMgZW1wdHkKICAgICAgICAgICAgICAgLy8gKHNlbGYubUIgPT0gZW1wdHlNYXAoKSkgJiYgIC8vIENvbW1lbnRlZCBvdXQgYmVjYXVzZSBpdCBjYXVzZXMgYW4gaW50ZXJuYWwgY29tcGlsZXIgZXJyb3IgKHNlZSBpc3N1ZSAjODA4KQogICAgICAgICAgICAgICBzZWxmLm1CID09IG51bGwgJiYgICAgLy8gRXF1aXZhbGVudCB3YXkgb2Ygc2F5aW5nIGl0IGlzIGVtcHR5IAogICAgICAgICAgICAgICBzZWxmLm1CLmlzRW1wdHkoKSAmJiAgIC8vIEFub3RoZXIgZXF1aXZhbGVudCB3YXkgb2Ygc2F5aW5nIGl0IGlzIGVtcHR5CgogICAgICAgICAgICAgICAvLyB0aGUgbWFwIHNlbGYubUEgaGFzIHRoZXNlIHRocmVlIGtleS12YWx1ZSBwYWlyczoKCiAgICAgICAgICAgICAgIHNlbGYubUEuZ2V0KDEpISEuYTEgPT0gMjAgJiYgCiAgICAgICAgICAgICAgIHNlbGYubUEuZ2V0KDEpISEuYTIuYjEgPT0gdHJ1ZSAmJgogICAgICAgICAgICAgICBzZWxmLm1BLmdldCgxKSEhLmEyLmIyLmMxID09IDUgJiYKICAgICAgICAgICAgICAgc2VsZi5tQS5nZXQoMSkhIS5hMi5iMyA9PSAxMCAmJgoKICAgICAgICAgICAgICAgc2VsZi5tQS5nZXQoMikhIS5hMSA9PSAyMCAmJiAKICAgICAgICAgICAgICAgc2VsZi5tQS5nZXQoMikhIS5hMi5iMSA9PSB0cnVlICYmCiAgICAgICAgICAgICAgIHNlbGYubUEuZ2V0KDIpISEuYTIuYjIuYzEgPT0gMTAwICYmCiAgICAgICAgICAgICAgIHNlbGYubUEuZ2V0KDIpISEuYTIuYjMgPT0gMCAmJgoKICAgICAgICAgICAgICAgc2VsZi5tQS5nZXQoMykhIS5hMSA9PSA1ICYmIAogICAgICAgICAgICAgICBzZWxmLm1BLmdldCgzKSEhLmEyLmIxID09IGZhbHNlICYmCiAgICAgICAgICAgICAgIHNlbGYubUEuZ2V0KDMpISEuYTIuYjIuYzEgPT0gMTUwICYmCiAgICAgICAgICAgICAgIHNlbGYubUEuZ2V0KDMpISEuYTIuYjMgPT0gMDsKCiAgICAgICAgLy8gQW5kIG5vIG90aGVyIGVudHJpZXMKICAgICAgICBmb3JlYWNoIChrLCBfIGluIHNlbGYubUEpIHsKICAgICAgICAgICAgcmVzdWx0ICYmPSAoayA9PSAxIHx8IGsgPT0gMiB8fCBrID09IDMpOwogICAgICAgIH0KCiAgICAgICAgLy8gVGhlIG1hcCBzZWxmLm1DIGhhcyBhIHNpbmdsZSBlbnRyeSAxMDAgLT4gTWFwV3JhcHBlciB7bTogMTAgLT4gc2VsZi5zQX0uCiAgICAgICAgZm9yZWFjaCAoazEsIHYxIGluIHNlbGYubUMpIHsKICAgICAgICAgICAgZm9yZWFjaCAoazIsIHYyIGluIHYxLm0pIHsKICAgICAgICAgICAgICAgIHJlc3VsdCAmJj0gCiAgICAgICAgICAgICAgICAgICAgICAgICBrMSA9PSAxMDAgJiYgCiAgICAgICAgICAgICAgICAgICAgICAgICBrMiA9PSAxMCAmJgogICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICB2Mi5hMSA9PSAyMCAmJiAKICAgICAgICAgICAgICAgICAgICAgICAgIHYyLmEyLmIxID09IHRydWUgJiYKICAgICAgICAgICAgICAgICAgICAgICAgIHYyLmEyLmIyLmMxID09IDUgJiYKICAgICAgICAgICAgICAgICAgICAgICAgIHYyLmEyLmIzID09IDEwOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgfQoKICAgIC8qKioqKioqKioqKioqKiogU3RydWN0cyAqKioqKioqKioqKioqKioqKioqKi8KCiAgICAvLyBBc3NpZ25pbmcgYSBzdHJ1Y3QgdG8gYSB2YXJpYWJsZSBwcmVzZXJ2ZXMgZmllbGRzCgogICAgZ2V0IGZ1biBzdHJ1Y3RBc3NpZ24xKCk6IEJvb2wgeyAKICAgICAgICBsZXQgcyA9IHNlbGYuc0E7CgogICAgICAgIC8vIFRoZSBmaWVsZHMgb2YgcyBhbmQgc2VsZi5zQSBhcmUgZXF1YWwsIGFuZCB0aGUgdmFsdWVzIGRpZCBub3QgY2hhbmdlCiAgICAgICAgcmV0dXJuIHMuYTEgPT0gc2VsZi5zQS5hMSAmJiAKICAgICAgICAgICAgICAgcy5hMi5iMSA9PSBzZWxmLnNBLmEyLmIxICYmCiAgICAgICAgICAgICAgIHMuYTIuYjIuYzEgPT0gc2VsZi5zQS5hMi5iMi5jMSAmJgogICAgICAgICAgICAgICBzLmEyLmIzID09IHNlbGYuc0EuYTIuYjMgJiYKICAgICAgICAgICAgICAgcy5hMSA9PSAyMCAmJiAKICAgICAgICAgICAgICAgcy5hMi5iMSA9PSB0cnVlICYmCiAgICAgICAgICAgICAgIHMuYTIuYjIuYzEgPT0gNSAmJgogICAgICAgICAgICAgICBzLmEyLmIzID09IDEwICYmCiAgICAgICAgICAgICAgIHNlbGYuY2hlY2tBbGxDb250cmFjdEZpZWxkc0FyZVVuY2hhbmdlZCgpOwogICAgfQoKICAgIC8vIEFzc2lnbm1lbnQgb2Ygc3RydWN0cyBpcyBkb25lIGJ5IHZhbHVlCgogICAgZ2V0IGZ1biBzdHJ1Y3RBc3NpZ24yKCk6IEJvb2wgeyAKICAgICAgICAvLyBNYWtlIGEgbG9jYWwgY29weSBvZiB0aGUgc3RydWN0CiAgICAgICAgbGV0IHMgPSBzZWxmLnNBOwoKICAgICAgICAvLyBNb2RpZnkgdHdvIGZpZWxkcyBpbiB0aGUgbG9jYWwgY29weQogICAgICAgIHMuYTEgPSA1MDsKICAgICAgICBzLmEyLmIyLmMxID0gNzA7CgogICAgICAgIC8vIE1ha2UgYSBjb3B5IG9mIGFuIGludGVybmFsIHN0cnVjdCBvZiBzCiAgICAgICAgbGV0IHQgPSBzLmEyOwoKICAgICAgICAvLyBNb2RpZnkgdGhlIGNvcHkKICAgICAgICB0LmIzID0gMTAwOwogICAgICAgIAogICAgICAgIC8vIHNlbGYuc0EgcmVtYWlucyB1bmNoYW5nZWQsCiAgICAgICAgLy8gdGhlIGNvcHkgdCBpbmhlcml0cyB0aGUgdmFsdWUgYjIuYzEgPSA3MCBtb2RpZmllZCBieSBzLAogICAgICAgIC8vIHRoZSBjb3B5IHMgZG9lcyBub3QgY2hhbmdlIGl0cyBiMyBmaWVsZC4KICAgICAgICByZXR1cm4gc2VsZi5jaGVja0FsbENvbnRyYWN0RmllbGRzQXJlVW5jaGFuZ2VkKCkgJiYKICAgICAgICAgICAgICAgcy5hMSA9PSA1MCAmJiAKICAgICAgICAgICAgICAgcy5hMi5iMSA9PSB0cnVlICYmCiAgICAgICAgICAgICAgIHMuYTIuYjIuYzEgPT0gNzAgJiYKICAgICAgICAgICAgICAgcy5hMi5iMyA9PSAxMCAmJgogICAgICAgICAgICAgICB0LmIxID09IHRydWUgJiYKICAgICAgICAgICAgICAgdC5iMi5jMSA9PSA3MCAmJgogICAgICAgICAgICAgICB0LmIzID09IDEwMDsKICAgIH0KCiAgICBnZXQgZnVuIHBhcmFtU3RydWN0MSgpOiBCb29sIHsKICAgICAgICAKICAgICAgICAvLyBUaGlzIHNob3VsZCBub3QgbW9kaWZ5IHNlbGYuc0EuCgogICAgICAgIGxldCBzID0gZ2V0TmV3U3RydWN0KHNlbGYuc0EpOwoKICAgICAgICByZXR1cm4gc2VsZi5jaGVja0FsbENvbnRyYWN0RmllbGRzQXJlVW5jaGFuZ2VkKCkgJiYKICAgICAgICAgICAgICAgcy5hMSA9PSAwICYmIAogICAgICAgICAgICAgICBzLmEyLmIxID09IGZhbHNlICYmCiAgICAgICAgICAgICAgIHMuYTIuYjIuYzEgPT0gMCAmJgogICAgICAgICAgICAgICBzLmEyLmIzID09IDA7CiAgICB9CgogICAgZ2V0IGZ1biBwYXJhbVN0cnVjdDIoKTogQm9vbCB7CiAgICAgICAgCiAgICAgICAgLy8gVGhpcyBzaG91bGQgbm90IG1vZGlmeSBzZWxmLnNBLgoKICAgICAgICBsZXQgcyA9IGNvcHlBbmRNb2RpZnlTdHJ1Y3Qoc2VsZi5zQSk7CgogICAgICAgIHJldHVybiBzZWxmLmNoZWNrQWxsQ29udHJhY3RGaWVsZHNBcmVVbmNoYW5nZWQoKSAmJgogICAgICAgICAgICAgICBzLmExID09IDEyMCAmJiAKICAgICAgICAgICAgICAgcy5hMi5iMSA9PSB0cnVlICYmCiAgICAgICAgICAgICAgIHMuYTIuYjIuYzEgPT0gNiAmJgogICAgICAgICAgICAgICBzLmEyLmIzID09IDEwOwogICAgfQoKICAgIGdldCBmdW4gbXV0YXRlUGFyYW1TdHJ1Y3QxKCk6IEJvb2wgewoKICAgICAgICBsZXQgcyA9IHNlbGYuc0E7CgogICAgICAgIC8vIFRoaXMgc2hvdWxkIHJlYXNzaWduIHMsIGJ1dCBsZWF2ZSBzZWxmLnNBIHVuY2hhbmdlZC4KCiAgICAgICAgcy5yZWFzc2lnblN0cnVjdCgpOwoKICAgICAgICByZXR1cm4gc2VsZi5jaGVja0FsbENvbnRyYWN0RmllbGRzQXJlVW5jaGFuZ2VkKCkgJiYKICAgICAgICAgICAgICAgcy5hMSA9PSAwICYmIAogICAgICAgICAgICAgICBzLmEyLmIxID09IGZhbHNlICYmCiAgICAgICAgICAgICAgIHMuYTIuYjIuYzEgPT0gMCAmJgogICAgICAgICAgICAgICBzLmEyLmIzID09IDA7CiAgICB9CgogICAgZ2V0IGZ1biBtdXRhdGVQYXJhbVN0cnVjdDIoKTogQm9vbCB7CgogICAgICAgIGxldCBzID0gc2VsZi5zQTsKCiAgICAgICAgLy8gVGhpcyBzaG91bGQgbXV0YXRlIHNvbWUgZmllbGRzIG9mIHMsIGJ1dCBsZWF2ZSBzZWxmLnNBIHVuY2hhbmdlZC4KICAgICAgICAKICAgICAgICBzLmNoYW5nZVNvbWVGaWVsZHMoKTsKCiAgICAgICAgcmV0dXJuIHNlbGYuY2hlY2tBbGxDb250cmFjdEZpZWxkc0FyZVVuY2hhbmdlZCgpICYmCiAgICAgICAgICAgICAgIHMuYTEgPT0gMTIwICYmIAogICAgICAgICAgICAgICBzLmEyLmIxID09IHRydWUgJiYKICAgICAgICAgICAgICAgcy5hMi5iMi5jMSA9PSA2ICYmCiAgICAgICAgICAgICAgIHMuYTIuYjMgPT0gMTA7CiAgICB9CgogICAgZ2V0IGZ1biB0ZXN0UmV0dXJuZWRTdHJ1Y3RzKCk6IEJvb2wgewogICAgICAgIC8vIFRoZSBjYWxsIHRvIHRoZSBub24tbXV0YXRpbmcgZXh0ZW5kcyBmdW5jdGlvbiAiY29weVN0cnVjdCIgYWx3YXlzIG1ha2VzIGEgY29weQogICAgICAgIC8vIG9mIHRoZSBwYXJhbWV0ZXIgc3RydWN0LiBUaGVyZWZvcmUsIHBhc3NpbmcgdGhlIHJlc3VsdCB0byB0aGUgbXV0YXRpbmcgZnVuY3Rpb24gCiAgICAgICAgLy8gImNoYW5nZVNvbWVGaWVsZHMiIHdpbGwgbW9kaWZ5IHRoZSBjb3B5LCBub3QgdGhlIG9yaWdpbmFsIHN0cnVjdC4gCiAgICAKICAgICAgICBzZWxmLnNBLmNvcHlTdHJ1Y3QoKS5jaGFuZ2VTb21lRmllbGRzKCk7CgogICAgICAgIGxldCByZXN1bHQgPSAKICAgICAgICAgICAgICAgc2VsZi5jaGVja0FsbENvbnRyYWN0RmllbGRzQXJlVW5jaGFuZ2VkKCk7CgogICAgICAgIC8vIEZvciB0aGUgZm9sbG93aW5nIHRlc3QsIG1ha2UgYSBjb3B5IG9mIHNlbGYuc0EuCiAgICAgICAgbGV0IHMgPSBzZWxmLnNBOwoKICAgICAgICAvLyBXaGF0IGlzIHRoZSBlZmZlY3Qgb2YgZXhlY3V0aW5nIHRoZSBmb2xsb3dpbmcgbGluZT8KCiAgICAgICAgcy5yZWZsZWN0U3RydWN0KCkuY2hhbmdlU29tZUZpZWxkcygpOwoKICAgICAgICAvLyBGaXJzdCwgcmVmbGVjdFN0cnVjdCBtYWtlcyBhIGNvcHkgb2Ygcy4gV2hlbiByZWZsZWN0U3RydWN0IGZpbmFsaXplcywgaXQgYXNzaWducyB0aGUgY29weSBiYWNrIGludG8KICAgICAgICAvLyBzLiBBZGRpdGlvbmFsbHksIHJlZmxlY3RTdHJ1Y3QgcmV0dXJucyB0aGUgY29weSBvZiBzLCBjYWxsIGl0IHMnLiAKICAgICAgICAvLyBzJyBpcyB0aGVuIHBhc3NlZCB0byBjaGFuZ2VTb21lRmllbGRzLCB3aGljaCBtYWtlcyBhZ2FpbiBhIGNvcHkgb2YgcycsIGNhbGwgaXQgcycnLgogICAgICAgIC8vIGNoYW5nZVNvbWVGaWVsZHMgY2hhbmdlcyBzb21lIGZpZWxkcyBvZiBzJycgYW5kIHJlYXNzaWducyBzJyB3aXRoIHRoaXMgY2hhbmdlZCBzJycuIAogICAgICAgIC8vIEFkZGl0aW9uYWxseSBjaGFuZ2VTb21lRmllbGRzIHJldHVybnMgdGhlIGNoYW5nZWQgcycnLgogICAgICAgIC8vIE5vdGUgdGhhdCB0aGUgb25seSBwbGFjZSB3aGVyZSBzIGlzIHJlYXNzaWduZWQgaXMgYWZ0ZXIgcmVmbGVjdFN0cnVjdCBleGVjdXRlcy4KICAgICAgICAvLyBUaGlzIG1lYW5zIHRoYXQgdGhlIGFib3ZlIGV4cHJlc3Npb24gZG9lcyBOT1QgY2hhbmdlIHMuCgogICAgICAgIHJlc3VsdCAmJj0KICAgICAgICAgICAgICAgc2VsZi5jaGVja0FsbENvbnRyYWN0RmllbGRzQXJlVW5jaGFuZ2VkKCkgJiYKICAgICAgICAgICAgICAgcy5hMSA9PSAyMCAmJiAgICAKICAgICAgICAgICAgICAgcy5hMi5iMSA9PSB0cnVlICYmCiAgICAgICAgICAgICAgIHMuYTIuYjIuYzEgPT0gNSAmJiAKICAgICAgICAgICAgICAgcy5hMi5iMyA9PSAxMDsKCiAgICAgICAgLy8gVGhlcmVmb3JlLCBpZiB3ZSBhY3R1YWxseSB3YW50IHRvIGNoYW5nZSBzIHVzaW5nIGNoYW5nZVNvbWVGaWVsZHMsIHdlIAogICAgICAgIC8vIHNob3VsZCBzcGxpdCB0aGUgY2hhaW4gc3RlcHM6CgogICAgICAgIHMucmVmbGVjdFN0cnVjdCgpOyAgIC8vIEVhY2ggc3RlcCBjaGFuZ2VzIHMKICAgICAgICBzLmNoYW5nZVNvbWVGaWVsZHMoKTsKCiAgICAgICAgLy8gTm90ZSB0aGF0IGRvaW5nIHRoZSB0cmljayBvZiBhc3NpZ25pbmcgYmFjayBzCiAgICAgICAgLy8gCiAgICAgICAgLy8gcyA9IHMucmVmbGVjdFN0cnVjdCgpLmNoYW5nZVNvbWVGaWVsZHMoKTsKICAgICAgICAvLwogICAgICAgIC8vIGlzIG5vdCBwb3NzaWJsZSBiZWNhdXNlIGNoYW5nZVNvbWVGaWVsZHMgaGFzIHZvaWQgcmV0dXJuIHR5cGUuCgogICAgICAgIC8vIHMgaXMgbm93IGNoYW5nZWQgYnkgY2hhbmdlU29tZUZpZWxkcywgYW5kIHRoZSByZXN0IHJlbWFpbnMgdGhlIHNhbWUKICAgICAgICByZXN1bHQgJiY9CiAgICAgICAgICAgICAgIHNlbGYuY2hlY2tBbGxDb250cmFjdEZpZWxkc0FyZVVuY2hhbmdlZCgpICYmCiAgICAgICAgICAgICAgIHMuYTEgPT0gMTIwICYmICAgCiAgICAgICAgICAgICAgIHMuYTIuYjEgPT0gdHJ1ZSAmJgogICAgICAgICAgICAgICBzLmEyLmIyLmMxID09IDYgJiYgICAKICAgICAgICAgICAgICAgcy5hMi5iMyA9PSAxMDsKCiAgICAgICAgLy8gRm9yIGZ1cnRoZXIgZXhhbXBsZXMgb2YgY2hhaW5pbmcgb2YgbXV0YXRpbmcgZnVuY3Rpb25zLCBzZWUgdGhlIHRlc3RzIG11dGF0ZXNDaGFpblN0cnVjdAoKICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgfQoKICAgIC8qCiAgICBUaGUgZm9sbG93aW5nIGZ1bmN0aW9ucyBleGVtcGxpZnkgaG93IHRvIHByb3Blcmx5IGNoYWluIG11dGF0aW5nIGZ1bmN0aW9ucy4KICAgIEVhY2ggZnVuY3Rpb24gaW4gdGhlIGNoYWluIHJldHVybnMgYSBjb3B5IHRvIHRoZSBuZXh0IGZ1bmN0aW9uIGluIHRoZSBjaGFpbi4KICAgIEhlbmNlLCB0byBjaGFuZ2UgdGhlIG9yaWdpbmFsIHZhcmlhYmxlLCB3ZSBuZWVkIHRvIHJlYXNzaWduIHRoZSB2YWx1ZSByZXR1cm5lZCAKICAgIGZyb20gdGhlIGxhc3QgbXV0YXRpbmcgZnVuY3Rpb24uCiAgICAqLwoKICAgIGdldCBmdW4gbXV0YXRlc0NoYWluU3RydWN0MSgpOiBCb29sIHsKICAgICAgICBsZXQgcyA9IHNlbGYuc0E7CiAgICAgICAgcy5yZWZsZWN0U3RydWN0KCkuaW5jcmVtZW50SW50RmllbGRzKCkuZmxpcEJvb2xlYW5GaWVsZHMoKTsgIC8vIHMgY2hhbmdlZCBvbmx5IGJ5IHRoZSBmaXJzdCBmdW5jdGlvbgogICAgICAgIAogICAgICAgIGxldCB0ID0gc2VsZi5zQTsKICAgICAgICB0ID0gdC5yZWZsZWN0U3RydWN0KCkuaW5jcmVtZW50SW50RmllbGRzKCkuZmxpcEJvb2xlYW5GaWVsZHMoKTsgLy8gQXNzaWduIGJhY2sgdG8gdCB0aGUgc3RydWN0IHJldHVybmVkIGJ5IHRoZSBsYXN0IGZ1bmN0aW9uCiAgICAgICAgCiAgICAgICAgLy8gVGhlIGxlc3MgY29uZnVzaW5nIHNvbHV0aW9uIGlzIHRvIHNpbXBseSBicmVhayB0aGUgY2hhaW4uCiAgICAgICAgLy8gVGhpcyBzb2x1dGlvbiBldmVuIHdvcmtzIHdoZW4gdGhlIGxhc3QgZnVuY3Rpb24gaW4gdGhlIGNoYWluIGhhcyB2b2lkIHJldHVybiB0eXBlLgogICAgICAgIC8vIEVhY2ggc3RlcCBjaGFuZ2VzIHoKICAgICAgICBsZXQgeiA9IHNlbGYuc0E7CiAgICAgICAgei5yZWZsZWN0U3RydWN0KCk7CiAgICAgICAgei5pbmNyZW1lbnRJbnRGaWVsZHMoKTsKICAgICAgICB6LmZsaXBCb29sZWFuRmllbGRzKCk7CgogICAgICAgIHJldHVybiBzZWxmLmNoZWNrQWxsQ29udHJhY3RGaWVsZHNBcmVVbmNoYW5nZWQoKSAmJgogICAgICAgICAgICAgICBzLmExID09IDIwICYmICAgIAogICAgICAgICAgICAgICBzLmEyLmIxID09IHRydWUgJiYgICAKICAgICAgICAgICAgICAgcy5hMi5iMi5jMSA9PSA1ICYmICAgCiAgICAgICAgICAgICAgIHMuYTIuYjMgPT0gMTAgJiYgICAgIAoKICAgICAgICAgICAgICAgdC5hMSA9PSAyMSAmJiAgICAKICAgICAgICAgICAgICAgdC5hMi5iMSA9PSBmYWxzZSAmJiAgIAogICAgICAgICAgICAgICB0LmEyLmIyLmMxID09IDYgJiYgICAgCiAgICAgICAgICAgICAgIHQuYTIuYjMgPT0gMTEgJiYKCiAgICAgICAgICAgICAgIHouYTEgPT0gMjEgJiYgICAgCiAgICAgICAgICAgICAgIHouYTIuYjEgPT0gZmFsc2UgJiYgICAKICAgICAgICAgICAgICAgei5hMi5iMi5jMSA9PSA2ICYmICAgIAogICAgICAgICAgICAgICB6LmEyLmIzID09IDExOyAgICAgICAgICAgICAgICAKCiAgICB9CgogICAgZ2V0IGZ1biBtdXRhdGVzQ2hhaW5TdHJ1Y3QyKCk6IEJvb2wgewogICAgICAgIGxldCBzID0gc2VsZi5zQTsKICAgICAgICBzLnJlZmxlY3RTdHJ1Y3QoKS5mbGlwQm9vbGVhbkZpZWxkcygpLmluY3JlbWVudEludEZpZWxkcygpOwogICAgICAgIAogICAgICAgIGxldCB0ID0gc2VsZi5zQTsKICAgICAgICB0ID0gdC5yZWZsZWN0U3RydWN0KCkuZmxpcEJvb2xlYW5GaWVsZHMoKS5pbmNyZW1lbnRJbnRGaWVsZHMoKTsKICAgICAgICAKICAgICAgICBsZXQgeiA9IHNlbGYuc0E7CiAgICAgICAgei5yZWZsZWN0U3RydWN0KCk7CiAgICAgICAgei5mbGlwQm9vbGVhbkZpZWxkcygpOwogICAgICAgIHouaW5jcmVtZW50SW50RmllbGRzKCk7CgogICAgICAgIHJldHVybiBzZWxmLmNoZWNrQWxsQ29udHJhY3RGaWVsZHNBcmVVbmNoYW5nZWQoKSAmJgogICAgICAgICAgICAgICBzLmExID09IDIwICYmICAgIAogICAgICAgICAgICAgICBzLmEyLmIxID09IHRydWUgJiYgICAKICAgICAgICAgICAgICAgcy5hMi5iMi5jMSA9PSA1ICYmICAgCiAgICAgICAgICAgICAgIHMuYTIuYjMgPT0gMTAgJiYgICAgIAoKICAgICAgICAgICAgICAgdC5hMSA9PSAyMSAmJiAgICAKICAgICAgICAgICAgICAgdC5hMi5iMSA9PSBmYWxzZSAmJiAgIAogICAgICAgICAgICAgICB0LmEyLmIyLmMxID09IDYgJiYgICAgCiAgICAgICAgICAgICAgIHQuYTIuYjMgPT0gMTEgJiYKCiAgICAgICAgICAgICAgIHouYTEgPT0gMjEgJiYgICAgCiAgICAgICAgICAgICAgIHouYTIuYjEgPT0gZmFsc2UgJiYgICAKICAgICAgICAgICAgICAgei5hMi5iMi5jMSA9PSA2ICYmICAgIAogICAgICAgICAgICAgICB6LmEyLmIzID09IDExOwogICAgfQoKICAgIGdldCBmdW4gbXV0YXRlc0NoYWluU3RydWN0MygpOiBCb29sIHsKICAgICAgICBsZXQgcyA9IHNlbGYuc0E7CiAgICAgICAgcy5pbmNyZW1lbnRJbnRGaWVsZHMoKS5yZWZsZWN0U3RydWN0KCkuZmxpcEJvb2xlYW5GaWVsZHMoKTsKCiAgICAgICAgbGV0IHQgPSBzZWxmLnNBOwogICAgICAgIHQgPSB0LmluY3JlbWVudEludEZpZWxkcygpLnJlZmxlY3RTdHJ1Y3QoKS5mbGlwQm9vbGVhbkZpZWxkcygpOwogICAgICAgIAogICAgICAgIGxldCB6ID0gc2VsZi5zQTsKICAgICAgICB6LmluY3JlbWVudEludEZpZWxkcygpOwogICAgICAgIHoucmVmbGVjdFN0cnVjdCgpOwogICAgICAgIHouZmxpcEJvb2xlYW5GaWVsZHMoKTsKCiAgICAgICAgcmV0dXJuIHNlbGYuY2hlY2tBbGxDb250cmFjdEZpZWxkc0FyZVVuY2hhbmdlZCgpICYmCiAgICAgICAgICAgICAgIHMuYTEgPT0gMjEgJiYgICAgCiAgICAgICAgICAgICAgIHMuYTIuYjEgPT0gdHJ1ZSAmJiAgIAogICAgICAgICAgICAgICBzLmEyLmIyLmMxID09IDYgJiYgICAKICAgICAgICAgICAgICAgcy5hMi5iMyA9PSAxMSAmJiAgICAgCgogICAgICAgICAgICAgICB0LmExID09IDIxICYmICAgIAogICAgICAgICAgICAgICB0LmEyLmIxID09IGZhbHNlICYmICAgCiAgICAgICAgICAgICAgIHQuYTIuYjIuYzEgPT0gNiAmJiAgICAKICAgICAgICAgICAgICAgdC5hMi5iMyA9PSAxMSAmJgoKICAgICAgICAgICAgICAgei5hMSA9PSAyMSAmJiAgICAKICAgICAgICAgICAgICAgei5hMi5iMSA9PSBmYWxzZSAmJiAgIAogICAgICAgICAgICAgICB6LmEyLmIyLmMxID09IDYgJiYgICAgCiAgICAgICAgICAgICAgIHouYTIuYjMgPT0gMTE7CiAgICB9CgogICAgZ2V0IGZ1biBtdXRhdGVzQ2hhaW5TdHJ1Y3Q0KCk6IEJvb2wgewogICAgICAgIGxldCBzID0gc2VsZi5zQTsKICAgICAgICBzLmluY3JlbWVudEludEZpZWxkcygpLmZsaXBCb29sZWFuRmllbGRzKCkucmVmbGVjdFN0cnVjdCgpOwoKICAgICAgICBsZXQgdCA9IHNlbGYuc0E7CiAgICAgICAgdCA9IHQuaW5jcmVtZW50SW50RmllbGRzKCkuZmxpcEJvb2xlYW5GaWVsZHMoKS5yZWZsZWN0U3RydWN0KCk7CgogICAgICAgIGxldCB6ID0gc2VsZi5zQTsKICAgICAgICB6LmluY3JlbWVudEludEZpZWxkcygpOwogICAgICAgIHouZmxpcEJvb2xlYW5GaWVsZHMoKTsKICAgICAgICB6LnJlZmxlY3RTdHJ1Y3QoKTsKCiAgICAgICAgcmV0dXJuIHNlbGYuY2hlY2tBbGxDb250cmFjdEZpZWxkc0FyZVVuY2hhbmdlZCgpICYmCiAgICAgICAgICAgICAgIHMuYTEgPT0gMjEgJiYgICAgCiAgICAgICAgICAgICAgIHMuYTIuYjEgPT0gdHJ1ZSAmJiAgIAogICAgICAgICAgICAgICBzLmEyLmIyLmMxID09IDYgJiYgICAKICAgICAgICAgICAgICAgcy5hMi5iMyA9PSAxMSAmJiAgICAgCgogICAgICAgICAgICAgICB0LmExID09IDIxICYmICAgIAogICAgICAgICAgICAgICB0LmEyLmIxID09IGZhbHNlICYmICAgCiAgICAgICAgICAgICAgIHQuYTIuYjIuYzEgPT0gNiAmJiAgICAKICAgICAgICAgICAgICAgdC5hMi5iMyA9PSAxMSAmJgoKICAgICAgICAgICAgICAgei5hMSA9PSAyMSAmJiAgICAKICAgICAgICAgICAgICAgei5hMi5iMSA9PSBmYWxzZSAmJiAgIAogICAgICAgICAgICAgICB6LmEyLmIyLmMxID09IDYgJiYgICAgCiAgICAgICAgICAgICAgIHouYTIuYjMgPT0gMTE7CiAgICB9ICAgIAoKICAgIGdldCBmdW4gbXV0YXRlc0NoYWluU3RydWN0NSgpOiBCb29sIHsKICAgICAgICBsZXQgcyA9IHNlbGYuc0E7CiAgICAgICAgcy5mbGlwQm9vbGVhbkZpZWxkcygpLmluY3JlbWVudEludEZpZWxkcygpLnJlZmxlY3RTdHJ1Y3QoKTsKCiAgICAgICAgbGV0IHQgPSBzZWxmLnNBOwogICAgICAgIHQgPSB0LmZsaXBCb29sZWFuRmllbGRzKCkuaW5jcmVtZW50SW50RmllbGRzKCkucmVmbGVjdFN0cnVjdCgpOwoKICAgICAgICBsZXQgeiA9IHNlbGYuc0E7CiAgICAgICAgei5mbGlwQm9vbGVhbkZpZWxkcygpOwogICAgICAgIHouaW5jcmVtZW50SW50RmllbGRzKCk7CiAgICAgICAgei5yZWZsZWN0U3RydWN0KCk7CgogICAgICAgIHJldHVybiBzZWxmLmNoZWNrQWxsQ29udHJhY3RGaWVsZHNBcmVVbmNoYW5nZWQoKSAmJgogICAgICAgICAgICAgICBzLmExID09IDIwICYmICAgIAogICAgICAgICAgICAgICBzLmEyLmIxID09IGZhbHNlICYmICAgCiAgICAgICAgICAgICAgIHMuYTIuYjIuYzEgPT0gNSAmJiAgIAogICAgICAgICAgICAgICBzLmEyLmIzID09IDEwICYmICAgICAKCiAgICAgICAgICAgICAgIHQuYTEgPT0gMjEgJiYgICAgCiAgICAgICAgICAgICAgIHQuYTIuYjEgPT0gZmFsc2UgJiYgICAKICAgICAgICAgICAgICAgdC5hMi5iMi5jMSA9PSA2ICYmICAgIAogICAgICAgICAgICAgICB0LmEyLmIzID09IDExICYmCgogICAgICAgICAgICAgICB6LmExID09IDIxICYmICAgIAogICAgICAgICAgICAgICB6LmEyLmIxID09IGZhbHNlICYmICAgCiAgICAgICAgICAgICAgIHouYTIuYjIuYzEgPT0gNiAmJiAgICAKICAgICAgICAgICAgICAgei5hMi5iMyA9PSAxMTsKICAgIH0KCiAgICBnZXQgZnVuIG11dGF0ZXNDaGFpblN0cnVjdDYoKTogQm9vbCB7CiAgICAgICAgbGV0IHMgPSBzZWxmLnNBOwogICAgICAgIHMuZmxpcEJvb2xlYW5GaWVsZHMoKS5yZWZsZWN0U3RydWN0KCkuaW5jcmVtZW50SW50RmllbGRzKCk7CgogICAgICAgIGxldCB0ID0gc2VsZi5zQTsKICAgICAgICB0ID0gdC5mbGlwQm9vbGVhbkZpZWxkcygpLnJlZmxlY3RTdHJ1Y3QoKS5pbmNyZW1lbnRJbnRGaWVsZHMoKTsKCiAgICAgICAgbGV0IHogPSBzZWxmLnNBOwogICAgICAgIHouZmxpcEJvb2xlYW5GaWVsZHMoKTsKICAgICAgICB6LnJlZmxlY3RTdHJ1Y3QoKTsKICAgICAgICB6LmluY3JlbWVudEludEZpZWxkcygpOwoKICAgICAgICByZXR1cm4gc2VsZi5jaGVja0FsbENvbnRyYWN0RmllbGRzQXJlVW5jaGFuZ2VkKCkgJiYKICAgICAgICAgICAgICAgcy5hMSA9PSAyMCAmJiAgICAKICAgICAgICAgICAgICAgcy5hMi5iMSA9PSBmYWxzZSAmJiAgIAogICAgICAgICAgICAgICBzLmEyLmIyLmMxID09IDUgJiYgICAKICAgICAgICAgICAgICAgcy5hMi5iMyA9PSAxMCAmJiAgICAgCgogICAgICAgICAgICAgICB0LmExID09IDIxICYmICAgIAogICAgICAgICAgICAgICB0LmEyLmIxID09IGZhbHNlICYmICAgCiAgICAgICAgICAgICAgIHQuYTIuYjIuYzEgPT0gNiAmJiAgICAKICAgICAgICAgICAgICAgdC5hMi5iMyA9PSAxMSAmJgoKICAgICAgICAgICAgICAgei5hMSA9PSAyMSAmJiAgICAKICAgICAgICAgICAgICAgei5hMi5iMSA9PSBmYWxzZSAmJiAgIAogICAgICAgICAgICAgICB6LmEyLmIyLmMxID09IDYgJiYgICAgCiAgICAgICAgICAgICAgIHouYTIuYjMgPT0gMTE7CiAgICB9CgoKICAgIC8qKioqKioqKioqKioqKiogTWFwcyAqKioqKioqKioqKioqKioqKioqKi8KCiAgICAvLyBBc3NpZ25pbmcgYSBtYXAgdG8gYSB2YXJpYWJsZSBwcmVzZXJ2ZXMgY29udGVudHMKCiAgICBnZXQgZnVuIG1hcEFzc2lnbjEoKTogQm9vbCB7IAogICAgICAgIGxldCBzID0gc2VsZi5tQTsKCiAgICAgICAgLy8gVGhlIGVudHJpZXMgb2YgcyBhbmQgc2VsZi5tQSBhcmUgZXF1YWwsIGFuZCB0aGUgdmFsdWVzIGRpZCBub3QgY2hhbmdlCiAgICAgICAgbGV0IHJlc3VsdCA9IAogICAgICAgICAgICAgICBzZWxmLm1BLmdldCgxKSEhLmExID09IHMuZ2V0KDEpISEuYTEgJiYgCiAgICAgICAgICAgICAgIHNlbGYubUEuZ2V0KDEpISEuYTIuYjEgPT0gcy5nZXQoMSkhIS5hMi5iMSAmJgogICAgICAgICAgICAgICBzZWxmLm1BLmdldCgxKSEhLmEyLmIyLmMxID09IHMuZ2V0KDEpISEuYTIuYjIuYzEgJiYKICAgICAgICAgICAgICAgc2VsZi5tQS5nZXQoMSkhIS5hMi5iMyA9PSBzLmdldCgxKSEhLmEyLmIzICYmCgogICAgICAgICAgICAgICBzZWxmLm1BLmdldCgyKSEhLmExID09IHMuZ2V0KDIpISEuYTEgJiYgCiAgICAgICAgICAgICAgIHNlbGYubUEuZ2V0KDIpISEuYTIuYjEgPT0gcy5nZXQoMikhIS5hMi5iMSAmJgogICAgICAgICAgICAgICBzZWxmLm1BLmdldCgyKSEhLmEyLmIyLmMxID09IHMuZ2V0KDIpISEuYTIuYjIuYzEgJiYKICAgICAgICAgICAgICAgc2VsZi5tQS5nZXQoMikhIS5hMi5iMyA9PSBzLmdldCgyKSEhLmEyLmIzICYmCgogICAgICAgICAgICAgICBzZWxmLm1BLmdldCgzKSEhLmExID09IHMuZ2V0KDMpISEuYTEgJiYgCiAgICAgICAgICAgICAgIHNlbGYubUEuZ2V0KDMpISEuYTIuYjEgPT0gcy5nZXQoMykhIS5hMi5iMSAmJgogICAgICAgICAgICAgICBzZWxmLm1BLmdldCgzKSEhLmEyLmIyLmMxID09IHMuZ2V0KDMpISEuYTIuYjIuYzEgJiYKICAgICAgICAgICAgICAgc2VsZi5tQS5nZXQoMykhIS5hMi5iMyA9PSBzLmdldCgzKSEhLmEyLmIzICYmCgogICAgICAgICAgICAgICBzLmdldCgxKSEhLmExID09IDIwICYmIAogICAgICAgICAgICAgICBzLmdldCgxKSEhLmEyLmIxID09IHRydWUgJiYKICAgICAgICAgICAgICAgcy5nZXQoMSkhIS5hMi5iMi5jMSA9PSA1ICYmCiAgICAgICAgICAgICAgIHMuZ2V0KDEpISEuYTIuYjMgPT0gMTAgJiYKCiAgICAgICAgICAgICAgIHMuZ2V0KDIpISEuYTEgPT0gMjAgJiYgCiAgICAgICAgICAgICAgIHMuZ2V0KDIpISEuYTIuYjEgPT0gdHJ1ZSAmJgogICAgICAgICAgICAgICBzLmdldCgyKSEhLmEyLmIyLmMxID09IDEwMCAmJgogICAgICAgICAgICAgICBzLmdldCgyKSEhLmEyLmIzID09IDAgJiYKCiAgICAgICAgICAgICAgIHMuZ2V0KDMpISEuYTEgPT0gNSAmJiAKICAgICAgICAgICAgICAgcy5nZXQoMykhIS5hMi5iMSA9PSBmYWxzZSAmJgogICAgICAgICAgICAgICBzLmdldCgzKSEhLmEyLmIyLmMxID09IDE1MCAmJgogICAgICAgICAgICAgICBzLmdldCgzKSEhLmEyLmIzID09IDAgJiYKICAgICAgICAgICAgICAgc2VsZi5jaGVja0FsbENvbnRyYWN0RmllbGRzQXJlVW5jaGFuZ2VkKCk7CiAgICAgICAgCiAgICAgICAgLy8gQW5kIG5vIG90aGVyIGVudHJpZXMKICAgICAgICBmb3JlYWNoIChrLCBfIGluIHMpIHsKICAgICAgICAgICAgcmVzdWx0ICYmPSAoayA9PSAxIHx8IGsgPT0gMiB8fCBrID09IDMpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KCiAgICAvLyBBc3NpZ25tZW50IG9mIG1hcHMgaXMgZG9uZSBieSB2YWx1ZQoKICAgIGdldCBmdW4gbWFwQXNzaWduMigpOiBCb29sIHsgCiAgICAgICAgLy8gTWFrZSBhIGxvY2FsIGNvcHkgb2YgdGhlIG1hcAogICAgICAgIGxldCBzID0gc2VsZi5tQTsKCiAgICAgICAgLy8gTW9kaWZ5IGFuIGVudHJ5IGluIHRoZSBsb2NhbCBjb3B5CiAgICAgICAgcy5zZXQoMSwgU0Ege2ExOiAwLCBhMjogU0Ige2IxOiBmYWxzZSwgYjI6IHNlbGYuc0MsIGIzOiAyfX0pOwoKICAgICAgICAvLyBUaGUgY29tcGlsZXIgZG9lcyBub3QgYWxsb3cgZGlyZWN0bHkgY2hhbmdpbmcgdGhlIGNvbnRlbnRzIG9mIGEgc3RydWN0IGluc2lkZSBhbiBlbnRyeToKICAgICAgICAvLyBzLmdldCgyKSEhLmEyLmIyLmMxID0gNzsKICAgICAgICAvLyBPbmx5IHBhdGggZXhwcmVzc2lvbnMgYXJlIGFsbG93ZWQgb24gdGhlIGxlZnQgb2YgdGhlIGFzc2lnbm1lbnQgb3BlcmF0b3IgPQogICAgICAgIAogICAgICAgIC8vIHNlbGYubUEgcmVtYWlucyB1bmNoYW5nZWQgKGluY2x1ZGluZyB0aGUgcmVzdCBvZiBmaWVsZHMpCiAgICAgICAgLy8gVGhlIHJlc3Qgb2YgdGhlIGVudHJpZXMgaW4gcyByZW1haW4gaWRlbnRpY2FsIHRvIHNlbGYubUEuCiAgICAgICAgbGV0IHJlc3VsdCA9IAogICAgICAgICAgICAgICBzZWxmLmNoZWNrQWxsQ29udHJhY3RGaWVsZHNBcmVVbmNoYW5nZWQoKSAmJgogICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgcy5nZXQoMSkhIS5hMSA9PSAwICYmIAogICAgICAgICAgICAgICBzLmdldCgxKSEhLmEyLmIxID09IGZhbHNlICYmCiAgICAgICAgICAgICAgIHMuZ2V0KDEpISEuYTIuYjIuYzEgPT0gNSAmJgogICAgICAgICAgICAgICBzLmdldCgxKSEhLmEyLmIzID09IDIgJiYKCiAgICAgICAgICAgICAgIHMuZ2V0KDIpISEuYTEgPT0gMjAgJiYgCiAgICAgICAgICAgICAgIHMuZ2V0KDIpISEuYTIuYjEgPT0gdHJ1ZSAmJgogICAgICAgICAgICAgICBzLmdldCgyKSEhLmEyLmIyLmMxID09IDEwMCAmJgogICAgICAgICAgICAgICBzLmdldCgyKSEhLmEyLmIzID09IDAgJiYKCiAgICAgICAgICAgICAgIHMuZ2V0KDMpISEuYTEgPT0gNSAmJiAKICAgICAgICAgICAgICAgcy5nZXQoMykhIS5hMi5iMSA9PSBmYWxzZSAmJgogICAgICAgICAgICAgICBzLmdldCgzKSEhLmEyLmIyLmMxID09IDE1MCAmJgogICAgICAgICAgICAgICBzLmdldCgzKSEhLmEyLmIzID09IDA7CgogICAgICAgIC8vIEFuZCBubyBvdGhlciBlbnRyaWVzCiAgICAgICAgZm9yZWFjaCAoaywgXyBpbiBzKSB7CiAgICAgICAgICAgIHJlc3VsdCAmJj0gKGsgPT0gMSB8fCBrID09IDIgfHwgayA9PSAzKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CgogICAgZ2V0IGZ1biBwYXJhbU1hcDEoKTogQm9vbCB7CiAgICAgICAgCiAgICAgICAgLy8gVGhpcyBzaG91bGQgbm90IG1vZGlmeSBzZWxmLm1BLgoKICAgICAgICBsZXQgcyA9IGdldE5ld01hcChzZWxmLm1BKTsKCiAgICAgICAgbGV0IHJlc3VsdCA9IAogICAgICAgICAgICAgICBzZWxmLmNoZWNrQWxsQ29udHJhY3RGaWVsZHNBcmVVbmNoYW5nZWQoKSAmJgogICAgICAgICAgICAgICBzLmdldCgxKSEhLmExID09IDAgJiYgCiAgICAgICAgICAgICAgIHMuZ2V0KDEpISEuYTIuYjEgPT0gZmFsc2UgJiYKICAgICAgICAgICAgICAgcy5nZXQoMSkhIS5hMi5iMi5jMSA9PSAwICYmCiAgICAgICAgICAgICAgIHMuZ2V0KDEpISEuYTIuYjMgPT0gMDsKICAgICAgICAKICAgICAgICAvLyBBbmQgbm8gb3RoZXIgZW50cmllcyAKICAgICAgICBmb3JlYWNoIChrLCBfIGluIHMpIHsKICAgICAgICAgICAgcmVzdWx0ICYmPSBrID09IDE7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgfQoKICAgIGdldCBmdW4gcGFyYW1NYXAyKCk6IEJvb2wgewogICAgICAgIAogICAgICAgIC8vIFRoaXMgc2hvdWxkIG5vdCBtb2RpZnkgc2VsZi5tQS4KICAgICAgICAvLyBJbiB0aGUgY29weTogaXQgd2lsbCBkZWxldGUgZW50cmllcyAyIGFuZCAzIGFuZCBtb2RpZnkgZW50cnkgMS4KICAgICAgICBsZXQgcyA9IGNvcHlBbmRNb2RpZnlNYXAoc2VsZi5tQSk7CgogICAgICAgIGxldCByZXN1bHQgPSAKICAgICAgICAgICAgICAgc2VsZi5jaGVja0FsbENvbnRyYWN0RmllbGRzQXJlVW5jaGFuZ2VkKCkgJiYKICAgICAgICAgICAgICAgcy5nZXQoMSkhIS5hMSA9PSAyMCAmJiAKICAgICAgICAgICAgICAgcy5nZXQoMSkhIS5hMi5iMSA9PSB0cnVlICYmCiAgICAgICAgICAgICAgIHMuZ2V0KDEpISEuYTIuYjIuYzEgPT0gNDUgJiYKICAgICAgICAgICAgICAgcy5nZXQoMSkhIS5hMi5iMyA9PSAxMDsKICAgICAgICAKICAgICAgICAvLyBBbmQgbm8gb3RoZXIgZW50cmllcyAKICAgICAgICBmb3JlYWNoIChrLCBfIGluIHMpIHsKICAgICAgICAgICAgcmVzdWx0ICYmPSBrID09IDE7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgfQoKICAgIGdldCBmdW4gbXV0YXRlUGFyYW1NYXAxKCk6IEJvb2wgewoKICAgICAgICBsZXQgcyA9IE1hcFdyYXBwZXIge206IHNlbGYubUF9OwoKICAgICAgICAvLyBUaGlzIHNob3VsZCByZWFzc2lnbiBzLm0sIGJ1dCBsZWF2ZSBzZWxmLm1BIHVuY2hhbmdlZC4KCiAgICAgICAgcy5yZWFzc2lnbk1hcCgpOwoKICAgICAgICBsZXQgcmVzdWx0ID0gCiAgICAgICAgICAgICAgIHNlbGYuY2hlY2tBbGxDb250cmFjdEZpZWxkc0FyZVVuY2hhbmdlZCgpICYmCiAgICAgICAgICAgICAgIHMubS5nZXQoMSkhIS5hMSA9PSAwICYmIAogICAgICAgICAgICAgICBzLm0uZ2V0KDEpISEuYTIuYjEgPT0gZmFsc2UgJiYKICAgICAgICAgICAgICAgcy5tLmdldCgxKSEhLmEyLmIyLmMxID09IDAgJiYKICAgICAgICAgICAgICAgcy5tLmdldCgxKSEhLmEyLmIzID09IDA7CiAgICAgICAgCiAgICAgICAgLy8gQW5kIG5vIG90aGVyIGVudHJpZXMgCiAgICAgICAgZm9yZWFjaCAoaywgXyBpbiBzLm0pIHsKICAgICAgICAgICAgcmVzdWx0ICYmPSBrID09IDE7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgfQoKICAgIGdldCBmdW4gbXV0YXRlUGFyYW1NYXAyKCk6IEJvb2wgewoKICAgICAgICBsZXQgcyA9IE1hcFdyYXBwZXIge206IHNlbGYubUF9OwoKICAgICAgICAvLyBUaGlzIHNob3VsZCBtdXRhdGUgZW50cnkgMSBpbiBzLm0sIGFuZCBkZWxldGUgZW50cmllcyAyIGFuZCAzLCBidXQgbGVhdmUgc2VsZi5tQSB1bmNoYW5nZWQuCiAgICAgICAgCiAgICAgICAgcy5jaGFuZ2VTb21lRW50cmllcygpOwoKICAgICAgICBsZXQgcmVzdWx0ID0gCiAgICAgICAgICAgICAgIHNlbGYuY2hlY2tBbGxDb250cmFjdEZpZWxkc0FyZVVuY2hhbmdlZCgpICYmCiAgICAgICAgICAgICAgIHMubS5nZXQoMSkhIS5hMSA9PSAyMCAmJiAKICAgICAgICAgICAgICAgcy5tLmdldCgxKSEhLmEyLmIxID09IHRydWUgJiYKICAgICAgICAgICAgICAgcy5tLmdldCgxKSEhLmEyLmIyLmMxID09IDM1ICYmCiAgICAgICAgICAgICAgIHMubS5nZXQoMSkhIS5hMi5iMyA9PSAxMDsKICAgICAgICAKICAgICAgICAvLyBBbmQgbm8gb3RoZXIgZW50cmllcyAKICAgICAgICBmb3JlYWNoIChrLCBfIGluIHMubSkgewogICAgICAgICAgICByZXN1bHQgJiY9IGsgPT0gMTsKICAgICAgICB9CgogICAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CgogICAgZ2V0IGZ1biB0ZXN0UmV0dXJuZWRNYXBzMSgpOiBCb29sIHsKICAgICAgICAvLyBUaGUgImdldCIgZnVuY3Rpb24gZm9yIG1hcHMgYWx3YXlzIGNyZWF0ZXMgYSBjb3B5IG9mIHRoZSBpbnB1dCBtYXAgCiAgICAgICAgLy8gYmVjYXVzZSAiZ2V0IiBpcyBhIG5vbi1tdXRhdGluZyBmdW5jdGlvbi4gVGhpcyBtZWFucyB0aGF0CiAgICAgICAgLy8gdGhlIGZvbGxvd2luZyBleHByZXNzaW9uIHdpbGwgbm90IGNoYW5nZSB0aGUgc3RydWN0IGluIGVudHJ5IDIgb2Ygc2VsZi5tQSwKICAgICAgICAvLyBldmVuIGlmICJjaGFuZ2VTb21lRmllbGRzIiBpcyBhIG11dGF0aW5nIGZ1bmN0aW9uIGZvciBzdHJ1Y3RzLgogICAgICAgIC8vIFRoZSBtdXRhdGluZyBmdW5jdGlvbiAiY2hhbmdlU29tZUZpZWxkcyIgaXMgY2hhbmdpbmcgdGhlIGNvcHkKICAgICAgICAvLyByZXR1cm5lZCBieSAiZ2V0Ii4KCiAgICAgICAgc2VsZi5tQS5nZXQoMikhIS5jaGFuZ2VTb21lRmllbGRzKCk7CgogICAgICAgIC8vIEV2ZXJ5dGhpbmcgcmVtYWlucyB0aGUgc2FtZQoKICAgICAgICByZXR1cm4gc2VsZi5jaGVja0FsbENvbnRyYWN0RmllbGRzQXJlVW5jaGFuZ2VkKCk7CiAgICB9IAoKICAgIC8qIAogICAgVGhlIGZvbGxvd2luZyB0ZXN0IGNhbm5vdCBiZSBjYXJyaWVkIG91dCBiZWNhdXNlIEZ1bkMgcmVwb3J0cyBlcnJvcnMuIFNlZSBpc3N1ZSAjODY2LgogICAgQnV0IHRoZSBjb21tZW50cyBpbnNpZGUgdGhlIHRlc3QgYXJlIGdvb2QgaHlwb3RoZXNlcyBvZiB3aGF0IEkgZXhwZWN0IGl0IHdpbGwgaGFwcGVuIAogICAgd2hlbiB0aGUgaXNzdWUgaXMgcmVzb2x2ZWQsIGJlY2F1c2UgdGhpcyBpcyB3aGF0IGhhcHBlbnMgaW4gdGhlIGNhc2Ugb2Ygc3RydWN0cyAoc2VlIAogICAgZnVuY3Rpb24gdGVzdFJldHVybmVkU3RydWN0cykuCgogICAgZ2V0IGZ1biB0ZXN0UmV0dXJuZWRNYXBzMigpOiBCb29sIHsKICAgICAgICAvLyBUaGUgY2FsbCB0byB0aGUgbm9uLW11dGF0aW5nIGV4dGVuZHMgZnVuY3Rpb24gInVud3JhcEFuZENvcHlNYXAiIGFsd2F5cyBtYWtlcyBhIGNvcHkKICAgICAgICAvLyBvZiB0aGUgcGFyYW1ldGVyLiBUaGVyZWZvcmUsIHBhc3NpbmcgdGhlIHJlc3VsdCB0byB0aGUgbXV0YXRpbmcgZnVuY3Rpb24gCiAgICAgICAgLy8gImRlbCIgd2lsbCBtb2RpZnkgdGhlIGNvcHksIG5vdCB0aGUgb3JpZ2luYWwuIAoKICAgICAgICBsZXQgd20gPSBNYXBXcmFwcGVyIHttOiBzZWxmLm1BfTsKCiAgICAgICAgd20udW53cmFwQW5kQ29weU1hcCgpLmRlbCgxKTsgIC8vIEZ1bkMgZXJyb3I6IGlzc3VlICM4NjYKCiAgICAgICAgLy8gVGhlIGNvbnRyYWN0IGZpZWxkcyByZW1haW4gdGhlIHNhbWUgYW5kIGFsc28gd20KICAgICAgICBsZXQgcmVzdWx0ID0gCiAgICAgICAgICAgICAgIHNlbGYuY2hlY2tBbGxDb250cmFjdEZpZWxkc0FyZVVuY2hhbmdlZCgpICYmCiAgICAgICAgICAgICAgIHdtLm0uZ2V0KDEpISEuYTEgPT0gMjAgJiYgCiAgICAgICAgICAgICAgIHdtLm0uZ2V0KDEpISEuYTIuYjEgPT0gdHJ1ZSAmJgogICAgICAgICAgICAgICB3bS5tLmdldCgxKSEhLmEyLmIyLmMxID09IDUgJiYKICAgICAgICAgICAgICAgd20ubS5nZXQoMSkhIS5hMi5iMyA9PSAxMCAmJgoKICAgICAgICAgICAgICAgd20ubS5nZXQoMikhIS5hMSA9PSAyMCAmJiAKICAgICAgICAgICAgICAgd20ubS5nZXQoMikhIS5hMi5iMSA9PSB0cnVlICYmCiAgICAgICAgICAgICAgIHdtLm0uZ2V0KDIpISEuYTIuYjIuYzEgPT0gMTAwICYmCiAgICAgICAgICAgICAgIHdtLm0uZ2V0KDIpISEuYTIuYjMgPT0gMCAmJgoKICAgICAgICAgICAgICAgd20ubS5nZXQoMykhIS5hMSA9PSA1ICYmIAogICAgICAgICAgICAgICB3bS5tLmdldCgzKSEhLmEyLmIxID09IGZhbHNlICYmCiAgICAgICAgICAgICAgIHdtLm0uZ2V0KDMpISEuYTIuYjIuYzEgPT0gMTUwICYmCiAgICAgICAgICAgICAgIHdtLm0uZ2V0KDMpISEuYTIuYjMgPT0gMDsKCiAgICAgICAgZm9yZWFjaCAoaywgXyBpbiB3bS5tKSB7CiAgICAgICAgICAgIHJlc3VsdCAmJj0gKGsgPT0gMSB8fCBrID09IDIgfHwgayA9PSAzKTsKICAgICAgICB9CgogICAgICAgIC8vIEluc3RlYWQsIHBhc3NpbmcgIndtIiB0byB0aGUgbXV0YXRpbmcgZnVuY3Rpb24gInVud3JhcE1hcCIsIAogICAgICAgIC8vIHdpbGwgcmV0dXJuIGEgY29weSBvZiAid20ubSIsIHdoaWNoIGlzIHRoZW4gZ2l2ZW4gYXMgaW5wdXQgdG8gImRlbCIuCiAgICAgICAgLy8gVGhpcyBtZWFucyB0aGF0IHRoZSBmb2xsb3dpbmcgZXhwcmVzc2lvbiBkb2VzIG5vdCBkZWxldGUgZW50cnkgMQogICAgICAgIC8vIGZyb20gd20ubSwgYnV0IGRlbGV0ZWQgZnJvbSB0aGUgY29weSBvZiB3bS5tOgoKICAgICAgICB3bS51bndyYXBNYXAoKS5kZWwoMSk7ICAvLyBGdW5DIGVycm9yOiBpc3N1ZSAjODY2CgogICAgICAgIC8vIFRoZSBjb250cmFjdCBmaWVsZHMgcmVtYWluIHRoZSBzYW1lIGFuZCBhbHNvIHdtCiAgICAgICAgcmVzdWx0ICYmPQogICAgICAgICAgICAgICBzZWxmLmNoZWNrQWxsQ29udHJhY3RGaWVsZHNBcmVVbmNoYW5nZWQoKSAmJgogICAgICAgICAgICAgICB3bS5tLmdldCgxKSEhLmExID09IDIwICYmIAogICAgICAgICAgICAgICB3bS5tLmdldCgxKSEhLmEyLmIxID09IHRydWUgJiYKICAgICAgICAgICAgICAgd20ubS5nZXQoMSkhIS5hMi5iMi5jMSA9PSA1ICYmCiAgICAgICAgICAgICAgIHdtLm0uZ2V0KDEpISEuYTIuYjMgPT0gMTAgJiYKCiAgICAgICAgICAgICAgIHdtLm0uZ2V0KDIpISEuYTEgPT0gMjAgJiYgCiAgICAgICAgICAgICAgIHdtLm0uZ2V0KDIpISEuYTIuYjEgPT0gdHJ1ZSAmJgogICAgICAgICAgICAgICB3bS5tLmdldCgyKSEhLmEyLmIyLmMxID09IDEwMCAmJgogICAgICAgICAgICAgICB3bS5tLmdldCgyKSEhLmEyLmIzID09IDAgJiYKCiAgICAgICAgICAgICAgIHdtLm0uZ2V0KDMpISEuYTEgPT0gNSAmJiAKICAgICAgICAgICAgICAgd20ubS5nZXQoMykhIS5hMi5iMSA9PSBmYWxzZSAmJgogICAgICAgICAgICAgICB3bS5tLmdldCgzKSEhLmEyLmIyLmMxID09IDE1MCAmJgogICAgICAgICAgICAgICB3bS5tLmdldCgzKSEhLmEyLmIzID09IDA7CgogICAgICAgIGZvcmVhY2ggKGssIF8gaW4gd20ubSkgewogICAgICAgICAgICByZXN1bHQgJiY9IChrID09IDEgfHwgayA9PSAyIHx8IGsgPT0gMyk7CiAgICAgICAgfQoKICAgICAgICAvLyBTaW5jZSB1bndyYXBNYXAgYWx3YXlzIHJldHVybnMgYSBjb3B5IG9mIHdtLm0sIGl0IGlzIG5vdCBwb3NzaWJsZSAKICAgICAgICAvLyB0byBkZWxldGUgZW50cmllcyBpbmRpcmVjdGx5IHRocm91Z2ggdGhlIHVzZSBvZiB1bndyYXBNYXAuCiAgICAgICAgLy8gVGhlcmVmb3JlLCB0aGUgb25seSB3YXkgaXMgdG8gZGlyZWN0bHkgdW53cmFwIHRoZSBtYXA6CgogICAgICAgIHdtLm0uZGVsKDEpOwoKICAgICAgICAvLyBUaGUgY29udHJhY3QgZmllbGRzIHJlbWFpbiB0aGUgc2FtZSBhbmQgd20gb25seSBsb3N0IGVudHJ5IDEKICAgICAgICByZXN1bHQgJiY9CiAgICAgICAgICAgICAgIHNlbGYuY2hlY2tBbGxDb250cmFjdEZpZWxkc0FyZVVuY2hhbmdlZCgpICYmCgogICAgICAgICAgICAgICB3bS5tLmdldCgyKSEhLmExID09IDIwICYmIAogICAgICAgICAgICAgICB3bS5tLmdldCgyKSEhLmEyLmIxID09IHRydWUgJiYKICAgICAgICAgICAgICAgd20ubS5nZXQoMikhIS5hMi5iMi5jMSA9PSAxMDAgJiYKICAgICAgICAgICAgICAgd20ubS5nZXQoMikhIS5hMi5iMyA9PSAwICYmCgogICAgICAgICAgICAgICB3bS5tLmdldCgzKSEhLmExID09IDUgJiYgCiAgICAgICAgICAgICAgIHdtLm0uZ2V0KDMpISEuYTIuYjEgPT0gZmFsc2UgJiYKICAgICAgICAgICAgICAgd20ubS5nZXQoMykhIS5hMi5iMi5jMSA9PSAxNTAgJiYKICAgICAgICAgICAgICAgd20ubS5nZXQoMykhIS5hMi5iMyA9PSAwOwoKICAgICAgICBmb3JlYWNoIChrLCBfIGluIHdtLm0pIHsKICAgICAgICAgICAgcmVzdWx0ICYmPSAoayA9PSAyIHx8IGsgPT0gMyk7CiAgICAgICAgfQoKICAgICAgICAvLyBIZW5jZSwgY2hhaW5pbmcgbXV0YXRpbmcgZnVuY3Rpb25zIHRvIGF0dGVtcHQgdG8gZGVsZXRlIGFub3RoZXIgZW50cnksCiAgICAgICAgLy8gd2lsbCBub3QgY2hhbmdlIHdtLCBiZWNhdXNlIHRob3NlIGZ1bmN0aW9ucyBhbHdheXMgcmV0dXJuIGNvcGllczoKCiAgICAgICAgd20ucmVmbGVjdE1hcCgpLnVud3JhcE1hcCgpLmRlbCgyKTsgIC8vIEZ1bkMgZXJyb3I6IGlzc3VlICM4NjYKCiAgICAgICAgLy8gVGhlIGNvbnRyYWN0IGZpZWxkcyByZW1haW4gdGhlIHNhbWUgYW5kIHdtIHJlbWFpbnMgYXMgaW4gdGhlIHByZXZpb3VzIHN0ZXAKICAgICAgICByZXN1bHQgJiY9CiAgICAgICAgICAgICAgIHNlbGYuY2hlY2tBbGxDb250cmFjdEZpZWxkc0FyZVVuY2hhbmdlZCgpICYmCgogICAgICAgICAgICAgICB3bS5tLmdldCgyKSEhLmExID09IDIwICYmIAogICAgICAgICAgICAgICB3bS5tLmdldCgyKSEhLmEyLmIxID09IHRydWUgJiYKICAgICAgICAgICAgICAgd20ubS5nZXQoMikhIS5hMi5iMi5jMSA9PSAxMDAgJiYKICAgICAgICAgICAgICAgd20ubS5nZXQoMikhIS5hMi5iMyA9PSAwICYmCgogICAgICAgICAgICAgICB3bS5tLmdldCgzKSEhLmExID09IDUgJiYgCiAgICAgICAgICAgICAgIHdtLm0uZ2V0KDMpISEuYTIuYjEgPT0gZmFsc2UgJiYKICAgICAgICAgICAgICAgd20ubS5nZXQoMykhIS5hMi5iMi5jMSA9PSAxNTAgJiYKICAgICAgICAgICAgICAgd20ubS5nZXQoMykhIS5hMi5iMyA9PSAwOwoKICAgICAgICBmb3JlYWNoIChrLCBfIGluIHdtLm0pIHsKICAgICAgICAgICAgcmVzdWx0ICYmPSAoayA9PSAyIHx8IGsgPT0gMyk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgCiAgICBGSU5JU0hFUyBUZXN0IHRoYXQgY2Fubm90IGJlIGNhcnJpZWQgb3V0LgogICAgKi8KCiAgICBnZXQgZnVuIG11dGF0ZU5lc3RlZE1hcDEoKTogQm9vbCB7CiAgICAgICAgLy8gTWFrZSBhIGxvY2FsIGNvcHkgb2Ygc2VsZi5tQyBmb3IgdGhlIHRlc3RzLgogICAgICAgIGxldCBtID0gc2VsZi5tQzsKCiAgICAgICAgLy8gVGhlIG1hcCBtIGhhcyB0aGUgc2luZ2xlIGVudHJ5IDEwMCAtPiBNYXBXcmFwIHttOiAxMCAtPiBjb3B5IG9mIHNlbGYuc0F9CiAgICAgICAgCiAgICAgICAgLy8gTW9kaWZ5IHRoZSBpbnRlcm5hbCBzdHJ1Y3QgaW4gbSAKICAgICAgICAvLyBUaGlzIHNob3VsZCBub3QgY2hhbmdlIHNlbGYubUMuCgogICAgICAgIC8vIE5vdGUgdGhhdCBpdCBpcyBub3QgcG9zc2libGUgdG8gY2hhbmdlIHRoZSBpbnRlcm5hbCBzdHJ1Y3QgZGlyZWN0bHkgdXNpbmc6CgogICAgICAgIC8vIG0uZ2V0KDEwMCkhIS5tLmdldCgxMCkhIS5hMi5iMi5jMSA9IFhYWDsKICAgICAgICAKICAgICAgICAvLyBiZWNhdXNlIHRoZSBsZWZ0IHNpZGUgb2YgYW4gYXNzaWdubWVudCBtdXN0IGJlIGEgcGF0aCBleHByZXNzaW9uLgogICAgICAgIC8vIEhlbmNlLCB3ZSBuZWVkIHRvIGFzc2lnbiB0aGUgc3RydWN0IGZpcnN0IGludG8gYSB2YXJpYWJsZToKCiAgICAgICAgbGV0IHMgPSBtLmdldCgxMDApISEubS5nZXQoMTApISE7CgogICAgICAgIC8vIEJ1dCByZWNhbGwgdGhhdCBzIGlzIGEgQ09QWSBvZiB0aGUgc3RydWN0IGluc2lkZSB0aGUgbmVzdGVkIG1hcCAoc2luY2UgYXNzaWdubWVudHMgYXJlIGFsd2F5cyBieSB2YWx1ZSkuCiAgICAgICAgLy8gSW5kZWVkLCBpZiB3ZSBjaGFuZ2UgcywgdGhlIG5lc3RlZCBtYXAgaW4gbSBkb2VzIG5vdCBjaGFuZ2UuCgogICAgICAgIHMuYTIuYjIuYzEgPSAxMDAwOwoKICAgICAgICAvLyBDaGVjayB0aGF0IHMgZG9lcyBjaGFuZ2UgCgogICAgICAgIGxldCByZXN1bHQgPSBzLmExID09IDIwICYmIAogICAgICAgICAgICAgICAgICAgICBzLmEyLmIxID09IHRydWUgJiYKICAgICAgICAgICAgICAgICAgICAgcy5hMi5iMi5jMSA9PSAxMDAwICYmCiAgICAgICAgICAgICAgICAgICAgIHMuYTIuYjMgPT0gMTA7CgogICAgICAgIC8vIEJ1dCBtIGRvZXMgbm90IGNoYW5nZQogICAgICAgIGZvcmVhY2ggKGsxLCB2MSBpbiBtKSB7CiAgICAgICAgICAgIGZvcmVhY2ggKGsyLCB2MiBpbiB2MS5tKSB7CiAgICAgICAgICAgICAgICByZXN1bHQgJiY9CiAgICAgICAgICAgICAgICAgICAgICAgICBrMSA9PSAxMDAgJiYgCiAgICAgICAgICAgICAgICAgICAgICAgICBrMiA9PSAxMCAmJgogICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICB2Mi5hMSA9PSAyMCAmJiAKICAgICAgICAgICAgICAgICAgICAgICAgIHYyLmEyLmIxID09IHRydWUgJiYKICAgICAgICAgICAgICAgICAgICAgICAgIHYyLmEyLmIyLmMxID09IDUgJiYKICAgICAgICAgICAgICAgICAgICAgICAgIHYyLmEyLmIzID09IDEwOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyBIZW5jZSwgd2UgbmVlZCB0byBhc3NpZ24gcyBiYWNrIGludG8gbQoKICAgICAgICAvLyBIb3dldmVyLCB0aGUgZm9sbG93aW5nIGV4cHJlc3Npb24gd2lsbCBub3Qgd29yaywKICAgICAgICAvLyBiZWNhdXNlIHRoZSAiZ2V0IiBmdW5jdGlvbiBhbHdheXMgbWFrZXMgYSBjb3B5IG9mICJtIiAoc2VlIHRlc3QgInRlc3RSZXR1cm5lZE1hcHMxIiBhYm92ZSkuCiAgICAgICAgLy8gbS5nZXQoMTAwKSEhLm0uc2V0KDEwLCBzKTsKCiAgICAgICAgLy8gVGhpcyBtZWFucyB3ZSBhcmUgZm9yY2VkIHRvIHVwZGF0ZSB0aGUgZW50aXJlIGVudHJ5IGZvciBrZXkgMTAwLiAKICAgICAgICAKICAgICAgICAvLyBUaGUgZmFjdCB0aGF0ICJnZXQiIGFsd2F5cyByZXR1cm5zIGNvcGllcyBvZiBuZXN0ZWQgc3RydWN0dXJlcyBoYXMgb25lIGJpZyBjb25zZXF1ZW5jZTogCiAgICAgICAgLy8gaXQgaXMgbm90IHBvc3NpYmxlIHRvIHVwZGF0ZSBhIGRlZXBseSBuZXN0ZWQgbWFwIHdpdGhvdXQgcmVidWlsZGluZyB0aGUgbWFwIG9mIHRoZSByb290CiAgICAgICAgLy8ga2V5IHRoYXQgbGVhZHMgdG8gdGhlIHVwZGF0ZWQgbmVzdGVkIG1hcCwgaS5lLiwKICAgICAgICAvLyBpZiB0aGUgbWFwIGlzOgogICAgICAgIC8vIGtleTEgLT4gWwogICAgICAgIC8vICAgICAgICAgIGtleTEuMSAtPiBba2V5MS4xLjEgLT4gdmFsMV0sIAogICAgICAgIC8vICAgICAgICAgIGtleTEuMiAtPiBba2V5MS4yLjEgLT4gdmFsMl0KICAgICAgICAvLyAgICAgICAgIF0KICAgICAgICAvLyBUaGVuLCB1cGRhdGluZyB0aGUgZW50cnkga2V5MS4xLjEgd2l0aCB2YWx1ZSB2YWwzIHdvdWxkIHJlcXVpcmUgCiAgICAgICAgLy8gdXBkYXRpbmcga2V5MSB3aXRoIAogICAgICAgIC8vICAgICAgICAgWwogICAgICAgIC8vICAgICAgICAgIGtleTEuMSAtPiBba2V5MS4xLjEgLT4gdmFsM10sIAogICAgICAgIC8vICAgICAgICAgIGtleTEuMiAtPiBba2V5MS4yLjEgLT4gdmFsMl0KICAgICAgICAvLyAgICAgICAgIF0KCiAgICAgICAgLy8gRmlyc3QgYnVpbGQgdGhlIG1hcCBjb250YWluaW5nIHRoZSB1cGRhdGVkIHMgYW5kIHdyYXAgaXQKICAgICAgICBsZXQgbmVzdGVkTWFwMTogbWFwPEludCxTQT4gPSBlbXB0eU1hcCgpOwogICAgICAgIG5lc3RlZE1hcDEuc2V0KDEwLCBzKTsKICAgICAgICBsZXQgd3JhcHBlZE5lc3RlZDEgPSBNYXBXcmFwcGVyIHttOiBuZXN0ZWRNYXAxfTsKCiAgICAgICAgLy8gQXMgYSBzaWRlIG5vdGU6IHdlIGNhbiBhbHNvIGFjaGlldmUgdGhlIHNhbWUgcmVzdWx0IGJ5IGRvaW5nIHRoaXM6CiAgICAgICAgbGV0IHdyYXBwZWROZXN0ZWQyID0gTWFwV3JhcHBlciB7bTogZW1wdHlNYXAoKX07CiAgICAgICAgd3JhcHBlZE5lc3RlZDIubS5zZXQoMTAsIHMpOwoKICAgICAgICAvLyBJbmRlZWQsIHdyYXBwZWROZXN0ZWQxIGFuZCB3cmFwcGVkTmVzdGVkMiBhcmUgZXF1YWwKCiAgICAgICAgZm9yZWFjaCAoazIsIHYyIGluIHdyYXBwZWROZXN0ZWQxLm0pIHsKICAgICAgICAgICAgICAgIHJlc3VsdCAmJj0KICAgICAgICAgICAgICAgIGsyID09IDEwICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIHYyLmExID09IDIwICYmIAogICAgICAgICAgICAgICAgdjIuYTIuYjEgPT0gdHJ1ZSAmJgogICAgICAgICAgICAgICAgdjIuYTIuYjIuYzEgPT0gMTAwMCAmJgogICAgICAgICAgICAgICAgdjIuYTIuYjMgPT0gMTA7CiAgICAgICAgfQoKICAgICAgICBmb3JlYWNoIChrMiwgdjIgaW4gd3JhcHBlZE5lc3RlZDIubSkgewogICAgICAgICAgICAgICAgcmVzdWx0ICYmPQogICAgICAgICAgICAgICAgazIgPT0gMTAgJiYKICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdjIuYTEgPT0gMjAgJiYgCiAgICAgICAgICAgICAgICB2Mi5hMi5iMSA9PSB0cnVlICYmCiAgICAgICAgICAgICAgICB2Mi5hMi5iMi5jMSA9PSAxMDAwICYmCiAgICAgICAgICAgICAgICB2Mi5hMi5iMyA9PSAxMDsKICAgICAgICB9CgogICAgICAgIC8vIEZpbmFsbHksIGFzc2lnbiB0aGUgd3JhcHBlZCBtYXAgdG8gdGhlIGtleSAxMDAKICAgICAgICBtLnNldCgxMDAsIHdyYXBwZWROZXN0ZWQxKTsKCiAgICAgICAgLy8gQ2hlY2sgdGhhdCBtIGNoYW5nZWQKCiAgICAgICAgZm9yZWFjaCAoazEsIHYxIGluIG0pIHsKICAgICAgICAgICAgZm9yZWFjaCAoazIsIHYyIGluIHYxLm0pIHsKICAgICAgICAgICAgICAgIHJlc3VsdCAmJj0KICAgICAgICAgICAgICAgICAgICAgICAgIGsxID09IDEwMCAmJiAKICAgICAgICAgICAgICAgICAgICAgICAgIGsyID09IDEwICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgIHYyLmExID09IDIwICYmIAogICAgICAgICAgICAgICAgICAgICAgICAgdjIuYTIuYjEgPT0gdHJ1ZSAmJgogICAgICAgICAgICAgICAgICAgICAgICAgdjIuYTIuYjIuYzEgPT0gMTAwMCAmJgogICAgICAgICAgICAgICAgICAgICAgICAgdjIuYTIuYjMgPT0gMTA7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vIFRoZSByZXN0IG9mIHRoZSBmaWVsZHMgaW4gdGhlIGNvbnRyYWN0IGRpZCBub3QgY2hhbmdlIChpbmNsdWRpbmcgc2VsZi5tQykuCiAgICAgICAgcmVzdWx0ICYmPSBzZWxmLmNoZWNrQWxsQ29udHJhY3RGaWVsZHNBcmVVbmNoYW5nZWQoKTsKCiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KCiAgICAvKioqKioqKioqKioqKioqIENvbnRyYWN0cyAqKioqKioqKioqKioqKioqKioqKi8KCiAgICBnZXQgZnVuIGNvbnRyYWN0QXNzaWduMSgpOiBCb29sIHsKICAgICAgICAKICAgICAgICAvLyBDb250cmFjdCBhc3NpZ25tZW50IHdvcmtzIGJ5IHZhbHVlLCB3aGljaCBtZWFucyB0aGF0IGEgY29weSBvZiB0aGUgY29udHJhY3QgaXMgY3JlYXRlZCAKICAgICAgICAvLyBkdXJpbmcgYXNzaWdubWVudC4KICAgICAgICAKICAgICAgICBsZXQgYyA9IHNlbGY7CgogICAgICAgIC8vIFdoYXQgZG9lcyBpdCBtZWFuIHRoYXQgYyBpcyBhIGNvcHk/IEl0IGRvZXMgTk9UIG1lYW4gdGhhdCAKICAgICAgICAvLyB0aGVyZSBpcyBhIG5ldyBjb250cmFjdCBjIGRlcGxveWVkIGluIHRoZSBUT04gbmV0d29yay4gSW4gZmFjdCwgYm90aCBjIGFuZCBzZWxmCiAgICAgICAgLy8gaGF2ZSB0aGUgc2FtZSBhZGRyZXNzLiBXaHk/IEFuIGFkZHJlc3MgaXMgZGV0ZXJtaW5lZCBieSB0aGUgaW5pdGlhbCBzdGF0ZSBhbmQgY29kZQogICAgICAgIC8vIG9mIHRoZSBjb250cmFjdCwgYW5kIHNpbmNlIGMgd2FzIGNyZWF0ZWQgZnJvbSB0aGUgc3RhdGUgb2Ygc2VsZiBBRlRFUiBzZWxmIHdhcyBkZXBsb3llZCwKICAgICAgICAvLyBjIG11c3QgaGF2ZSB0aGUgc2FtZSBhZGRyZXNzLiBJbmRlZWQsIHRoZXJlIGlzIGEgdGVzdCBpbiAic2VtYW50aWNzLnNwZWMudHMiIHRlc3RpbmcgdGhhdAogICAgICAgIC8vIHRoZSBhZGRyZXNzIG9mICJzZWxmIiBkb2VzIG5vdCBjaGFuZ2UgYWZ0ZXIgInNlbGYiIGlzIHJlYXNzaWduZWQgd2l0aCBhIG1vZGlmaWVkIGNvcHkgb2YgaXRzZWxmLgogICAgICAgIAogICAgICAgIC8vIEV2ZW4gdGhvdWdoIHRoZSBzdGF0ZXMgb2YgYyBhbmQgc2VsZiBtYXkgZGl2ZXJnZSBmcm9tIHRoaXMgbW9tZW50IAogICAgICAgIC8vIChmb3IgZXhhbXBsZSwgYnkgZXhwbGljaXRseSBjaGFuZ2luZyBhIGZpZWxkIGluIGMpLAogICAgICAgIC8vIHRoZSBzdGF0ZSBvZiBjIGRvZXMgbm90IGhhdmUgZXhpc3RlbmNlIGJleW9uZCB0aGUgZXhlY3V0aW9uIG9mIHRoZSBUVk0sIGkuZS4sCiAgICAgICAgLy8gYXMgbG9uZyBhcyAic2VsZiA9IGMiIGlzIG5ldmVyIGV4ZWN1dGVkLCB0aGUgc3RhdGUgb2YgYyB3aWxsIGJlIGxvc3QgYXMgc29vbiBhcyAKICAgICAgICAvLyB0aGUgVFZNIGZpbmlzaGVzIGV4ZWN1dGluZyB0aGUgdHJhbnNhY3Rpb24sIGJlY2F1c2UgdGhlIHN0YXRlIG9mIGMgd2lsbCBuZXZlciAKICAgICAgICAvLyBiZSBwZXJzaXN0ZWQgYmFjayBpbnRvIHRoZSBuZXR3b3JrLiBTbywgaW4gYSBzZW5zZSwgYyBpcyBsaWtlIGEgc3RydWN0IHN0b3JpbmcgdGVtcG9yYWwgdmFsdWVzIAogICAgICAgIC8vIGZvciB0aGUgZmllbGRzIGluIHNlbGYuCgogICAgICAgIC8vIE5ldmVydGhlbGVzcywgaXQgaXMgcG9zc2libGUgdG8gY2FsbCBkZWNsYXJlZCBjb250cmFjdCBmdW5jdGlvbnMgb24gYy4KICAgICAgICAvLyBGb3IgZXhhbXBsZSwgZ2V0dGVyIGNoZWNrQWxsQ29udHJhY3RGaWVsZHNBcmVVbmNoYW5nZWQgaXMgY2FsbGVkIGJvdGggb24gc2VsZgogICAgICAgIC8vIGFuZCBjIGJlbG93LCB3aGljaCBpbXBsaWVzIHRoYXQgYm90aCBzZWxmIGFuZCBjIGhhdmUgaWRlbnRpY2FsIHN0YXRlIHNvIGZhci4KCiAgICAgICAgbGV0IHJlc3VsdCA9IAogICAgICAgICAgICAgICBzZWxmLmNoZWNrQWxsQ29udHJhY3RGaWVsZHNBcmVVbmNoYW5nZWQoKSAmJgoKICAgICAgICAgICAgICAgLy8gTm90ZSB0aGF0IHRoaXMgd2lsbCBjaGVjayB0aGF0IHRoZSBzdGF0ZSBvZiB0aGUgY29weSBpcyBpZGVudGljYWwgdG8gc2VsZi4KICAgICAgICAgICAgICAgYy5jaGVja0FsbENvbnRyYWN0RmllbGRzQXJlVW5jaGFuZ2VkKCk7CgogICAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CgogICAgZ2V0IGZ1biBjb250cmFjdEFzc2lnbjIoKTogQm9vbCB7CiAgICAgICAgCiAgICAgICAgLy8gQ29udHJhY3QgYXNzaWdubWVudCB3b3JrcyBieSB2YWx1ZSwgd2hpY2ggbWVhbnMgdGhhdCBhIGNvcHkgb2YgdGhlIGNvbnRyYWN0IGlzIGNyZWF0ZWQgCiAgICAgICAgLy8gZHVyaW5nIGFzc2lnbm1lbnQuCiAgICAgICAgCiAgICAgICAgbGV0IGMgPSBzZWxmOwoKICAgICAgICAvLyBEZWxldGUgZW50cmllcyAxIGFuZCAyIGluIGMubUEuIFRoaXMgc2hvdWxkIG5vdCBhZmZlY3Qgc2VsZi4KICAgICAgICBjLm1BLmRlbCgxKTsKICAgICAgICBjLm1BLmRlbCgyKTsKCiAgICAgICAgbGV0IHJlc3VsdCA9IAogICAgICAgICAgICAgICBzZWxmLmNoZWNrQWxsQ29udHJhY3RGaWVsZHNBcmVVbmNoYW5nZWQoKSAmJgogICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgYy51Qi5iMSA9PSBmYWxzZSAmJgogICAgICAgICAgICAgICBjLnVCLmIyLmMxID09IDAgJiYKICAgICAgICAgICAgICAgYy51Qi5iMyA9PSAxNCAmJgogICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgYy5zQS5hMSA9PSAyMCAmJiAKICAgICAgICAgICAgICAgYy5zQS5hMi5iMSA9PSB0cnVlICYmCiAgICAgICAgICAgICAgIGMuc0EuYTIuYjIuYzEgPT0gNSAmJgogICAgICAgICAgICAgICBjLnNBLmEyLmIzID09IDEwICYmCgogICAgICAgICAgICAgICBjLnNCLmIxID09IGZhbHNlICYmCiAgICAgICAgICAgICAgIGMuc0IuYjIuYzEgPT0gMyAmJgogICAgICAgICAgICAgICBjLnNCLmIzID09IDEwICYmCgogICAgICAgICAgICAgICBjLnNDLmMxID09IDUgJiYKCiAgICAgICAgICAgICAgIGMubUIuaXNFbXB0eSgpICYmIAoKICAgICAgICAgICAgICAgLy8gdGhlIG1hcCBjLm1BIGhhcyBvbmUga2V5LXZhbHVlIHBhaXI6CgogICAgICAgICAgICAgICBjLm1BLmdldCgzKSEhLmExID09IDUgJiYgCiAgICAgICAgICAgICAgIGMubUEuZ2V0KDMpISEuYTIuYjEgPT0gZmFsc2UgJiYKICAgICAgICAgICAgICAgYy5tQS5nZXQoMykhIS5hMi5iMi5jMSA9PSAxNTAgJiYKICAgICAgICAgICAgICAgYy5tQS5nZXQoMykhIS5hMi5iMyA9PSAwOwoKICAgICAgICAvLyBBbmQgbm8gb3RoZXIgZW50cmllcwogICAgICAgIGZvcmVhY2ggKGssIF8gaW4gYy5tQSkgewogICAgICAgICAgICByZXN1bHQgJiY9IGsgPT0gMzsKICAgICAgICB9CgogICAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CgoKICAgIGdldCBmdW4gcGFyYW1Db250cmFjdCgpOiBCb29sIHsKICAgICAgICAKICAgICAgICAvLyBUaGlzIHNob3VsZCBub3QgbW9kaWZ5IHNlbGYuCiAgICAgICAgLy8gVGhpcyBmdW5jdGlvbiB3aWxsIGNvcHkgc2VsZiBhbmQgZG8gdGhlIGZvbGxvd2luZyBjaGFuZ2VzIHRvIHRoZSBjb3B5OiAKICAgICAgICAvLyBDaGFuZ2UgdGhlIHVCIGZpZWxkIGFuZCBkZWxldGUgZW50cnkgMSBpbiBtQS4KCiAgICAgICAgbGV0IGMgPSBjb3B5QW5kTW9kaWZ5Q29udHJhY3Qoc2VsZik7CgogICAgICAgIGxldCByZXN1bHQgPSAKICAgICAgICAgICAgICAgc2VsZi5jaGVja0FsbENvbnRyYWN0RmllbGRzQXJlVW5jaGFuZ2VkKCkgJiYKICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgIGMudUIuYjEgPT0gdHJ1ZSAmJgogICAgICAgICAgICAgICBjLnVCLmIyLmMxID09IDk5ICYmCiAgICAgICAgICAgICAgIGMudUIuYjMgPT0gOTggJiYKICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgIGMuc0EuYTEgPT0gMjAgJiYgCiAgICAgICAgICAgICAgIGMuc0EuYTIuYjEgPT0gdHJ1ZSAmJgogICAgICAgICAgICAgICBjLnNBLmEyLmIyLmMxID09IDUgJiYKICAgICAgICAgICAgICAgYy5zQS5hMi5iMyA9PSAxMCAmJgoKICAgICAgICAgICAgICAgYy5zQi5iMSA9PSBmYWxzZSAmJgogICAgICAgICAgICAgICBjLnNCLmIyLmMxID09IDMgJiYKICAgICAgICAgICAgICAgYy5zQi5iMyA9PSAxMCAmJgoKICAgICAgICAgICAgICAgYy5zQy5jMSA9PSA1ICYmCgogICAgICAgICAgICAgICBjLm1CLmlzRW1wdHkoKSAmJiAKCiAgICAgICAgICAgICAgIC8vIHRoZSBtYXAgYy5tQSBoYXMgdHdvIGtleS12YWx1ZSBwYWlyczoKCiAgICAgICAgICAgICAgIGMubUEuZ2V0KDIpISEuYTEgPT0gMjAgJiYgCiAgICAgICAgICAgICAgIGMubUEuZ2V0KDIpISEuYTIuYjEgPT0gdHJ1ZSAmJgogICAgICAgICAgICAgICBjLm1BLmdldCgyKSEhLmEyLmIyLmMxID09IDEwMCAmJgogICAgICAgICAgICAgICBjLm1BLmdldCgyKSEhLmEyLmIzID09IDAgJiYKCiAgICAgICAgICAgICAgIGMubUEuZ2V0KDMpISEuYTEgPT0gNSAmJiAKICAgICAgICAgICAgICAgYy5tQS5nZXQoMykhIS5hMi5iMSA9PSBmYWxzZSAmJgogICAgICAgICAgICAgICBjLm1BLmdldCgzKSEhLmEyLmIyLmMxID09IDE1MCAmJgogICAgICAgICAgICAgICBjLm1BLmdldCgzKSEhLmEyLmIzID09IDA7CgogICAgICAgIC8vIEFuZCBubyBvdGhlciBlbnRyaWVzCiAgICAgICAgZm9yZWFjaCAoaywgXyBpbiBjLm1BKSB7CiAgICAgICAgICAgIHJlc3VsdCAmJj0gKGsgPT0gMiB8fCBrID09IDMpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KCiAgICBnZXQgZnVuIG11dGF0ZVBhcmFtQ29udHJhY3QoKTogQm9vbCB7CgogICAgICAgIC8vIEZpcnN0LCBtYWtlIGEgY29weSBvZiB0aGUgY29udHJhY3QKICAgICAgICBsZXQgYyA9IHNlbGY7CiAgICAgICAgCiAgICAgICAgLy8gVGhpcyBzaG91bGQgbm90IG1vZGlmeSBzZWxmLgogICAgICAgIC8vIEluIHRoZSBjb3B5OiBpdCB3aWxsIGNoYW5nZSB0aGUgdUIgZmllbGQgYW5kIHRoZSBzQS5hMi5iMi5jMSBmaWVsZC4KICAgICAgICAKICAgICAgICBjLmNoYW5nZVNvbWVDb250cmFjdEZpZWxkcygpOwoKICAgICAgICAvKiBJZiB3ZSB3ZXJlIG5vdCBpbiBhIGdldHRlciBmdW5jdGlvbiB3ZSBjb3VsZCBwZXJzaXN0IHRoZSBjaGFuZ2VzIGluIHRoZSBjb3B5IAogICAgICAgICAgIGJhY2sgaW50byBwZXJzaXN0ZW50IHN0b3JhZ2UsIGJ5IHdyaXRpbmc6CiAgICAgICAgICAgCiAgICAgICAgICAgc2VsZiA9IGM7CiAgICAgICAgICAgCiAgICAgICAgICAgTmV2ZXJ0aGVsZXNzLCB0aGUgY29tcGlsZXIgZG9lcyBub3QgcmVwb3J0IHN1Y2ggbGluZSBhcyBhbiBlcnJvciBpbnNpZGUgYSBnZXR0ZXIgCiAgICAgICAgICAgZnVuY3Rpb246IHNlZSBpc3N1ZSAjODE4CiAgICAgICAgKi8KCiAgICAgICAgbGV0IHJlc3VsdCA9IAogICAgICAgICAgICAgICBzZWxmLmNoZWNrQWxsQ29udHJhY3RGaWVsZHNBcmVVbmNoYW5nZWQoKSAmJgoKICAgICAgICAgICAgICAgYy51Qi5iMSA9PSB0cnVlICYmCiAgICAgICAgICAgICAgIGMudUIuYjIuYzEgPT0gNzcgJiYKICAgICAgICAgICAgICAgYy51Qi5iMyA9PSA4OCAmJgoKICAgICAgICAgICAgICAgYy5zQS5hMSA9PSAyMCAmJiAKICAgICAgICAgICAgICAgYy5zQS5hMi5iMSA9PSB0cnVlICYmCiAgICAgICAgICAgICAgIGMuc0EuYTIuYjIuYzEgPT0gMzUgJiYKICAgICAgICAgICAgICAgYy5zQS5hMi5iMyA9PSAxMCAmJgoKICAgICAgICAgICAgICAgYy5zQi5iMSA9PSBmYWxzZSAmJgogICAgICAgICAgICAgICBjLnNCLmIyLmMxID09IDMgJiYKICAgICAgICAgICAgICAgYy5zQi5iMyA9PSAxMCAmJgoKICAgICAgICAgICAgICAgYy5zQy5jMSA9PSA1ICYmCgogICAgICAgICAgICAgICBjLm1CLmlzRW1wdHkoKSAmJiAKCiAgICAgICAgICAgICAgIGMubUEuZ2V0KDEpISEuYTEgPT0gMjAgJiYgCiAgICAgICAgICAgICAgIGMubUEuZ2V0KDEpISEuYTIuYjEgPT0gdHJ1ZSAmJgogICAgICAgICAgICAgICBjLm1BLmdldCgxKSEhLmEyLmIyLmMxID09IDUgJiYKICAgICAgICAgICAgICAgYy5tQS5nZXQoMSkhIS5hMi5iMyA9PSAxMCAmJgoKICAgICAgICAgICAgICAgYy5tQS5nZXQoMikhIS5hMSA9PSAyMCAmJiAKICAgICAgICAgICAgICAgYy5tQS5nZXQoMikhIS5hMi5iMSA9PSB0cnVlICYmCiAgICAgICAgICAgICAgIGMubUEuZ2V0KDIpISEuYTIuYjIuYzEgPT0gMTAwICYmCiAgICAgICAgICAgICAgIGMubUEuZ2V0KDIpISEuYTIuYjMgPT0gMCAmJgoKICAgICAgICAgICAgICAgYy5tQS5nZXQoMykhIS5hMSA9PSA1ICYmIAogICAgICAgICAgICAgICBjLm1BLmdldCgzKSEhLmEyLmIxID09IGZhbHNlICYmCiAgICAgICAgICAgICAgIGMubUEuZ2V0KDMpISEuYTIuYjIuYzEgPT0gMTUwICYmCiAgICAgICAgICAgICAgIGMubUEuZ2V0KDMpISEuYTIuYjMgPT0gMDsKCiAgICAgICAgLy8gQW5kIG5vIG90aGVyIGVudHJpZXMKICAgICAgICBmb3JlYWNoIChrLCBfIGluIGMubUEpIHsKICAgICAgICAgICAgcmVzdWx0ICYmPSAoayA9PSAxIHx8IGsgPT0gMiB8fCBrID09IDMpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KCiAgICBnZXQgZnVuIGFkZHJlc3MoKTogQWRkcmVzcyB7CiAgICAgICAgcmV0dXJuIG15QWRkcmVzcygpOwogICAgfQoKICAgIC8vIENoZWNrIGlmIGZpZWxkcyB1QiBhbmQgc0EuYTIuYjIuYzEgYXJlIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBwYXJhbWV0ZXJzLAogICAgLy8gYW5kIHRoYXQgdGhlIHJlc3Qgb2YgZmllbGRzIHJlbWFpbmVkIHVuY2hhbmdlZC4KCiAgICBmdW4gY2hlY2tGaWVsZHNFcXVhbFRvKHNCOiBTQiwgbjogSW50KTogQm9vbCB7CiAgICAgICAgbGV0IHJlc3VsdCA9IAogICAgICAgICAgICAgICBzZWxmLnVCLmIxID09IHNCLmIxICYmCiAgICAgICAgICAgICAgIHNlbGYudUIuYjIuYzEgPT0gc0IuYjIuYzEgJiYKICAgICAgICAgICAgICAgc2VsZi51Qi5iMyA9PSBzQi5iMyAmJgoKICAgICAgICAgICAgICAgc2VsZi5zQS5hMSA9PSAyMCAmJiAKICAgICAgICAgICAgICAgc2VsZi5zQS5hMi5iMSA9PSB0cnVlICYmCiAgICAgICAgICAgICAgIHNlbGYuc0EuYTIuYjIuYzEgPT0gbiAmJgogICAgICAgICAgICAgICBzZWxmLnNBLmEyLmIzID09IDEwICYmCgogICAgICAgICAgICAgICBzZWxmLnNCLmIxID09IGZhbHNlICYmCiAgICAgICAgICAgICAgIHNlbGYuc0IuYjIuYzEgPT0gMyAmJgogICAgICAgICAgICAgICBzZWxmLnNCLmIzID09IDEwICYmCgogICAgICAgICAgICAgICBzZWxmLnNDLmMxID09IDUgJiYKCiAgICAgICAgICAgICAgIHNlbGYubUIuaXNFbXB0eSgpICYmIAoKICAgICAgICAgICAgICAgc2VsZi5tQS5nZXQoMSkhIS5hMSA9PSAyMCAmJiAKICAgICAgICAgICAgICAgc2VsZi5tQS5nZXQoMSkhIS5hMi5iMSA9PSB0cnVlICYmCiAgICAgICAgICAgICAgIHNlbGYubUEuZ2V0KDEpISEuYTIuYjIuYzEgPT0gNSAmJgogICAgICAgICAgICAgICBzZWxmLm1BLmdldCgxKSEhLmEyLmIzID09IDEwICYmCgogICAgICAgICAgICAgICBzZWxmLm1BLmdldCgyKSEhLmExID09IDIwICYmIAogICAgICAgICAgICAgICBzZWxmLm1BLmdldCgyKSEhLmEyLmIxID09IHRydWUgJiYKICAgICAgICAgICAgICAgc2VsZi5tQS5nZXQoMikhIS5hMi5iMi5jMSA9PSAxMDAgJiYKICAgICAgICAgICAgICAgc2VsZi5tQS5nZXQoMikhIS5hMi5iMyA9PSAwICYmCgogICAgICAgICAgICAgICBzZWxmLm1BLmdldCgzKSEhLmExID09IDUgJiYgCiAgICAgICAgICAgICAgIHNlbGYubUEuZ2V0KDMpISEuYTIuYjEgPT0gZmFsc2UgJiYKICAgICAgICAgICAgICAgc2VsZi5tQS5nZXQoMykhIS5hMi5iMi5jMSA9PSAxNTAgJiYKICAgICAgICAgICAgICAgc2VsZi5tQS5nZXQoMykhIS5hMi5iMyA9PSAwOwoKICAgICAgICAvLyBBbmQgbm8gb3RoZXIgZW50cmllcwogICAgICAgIGZvcmVhY2ggKGssIF8gaW4gc2VsZi5tQSkgewogICAgICAgICAgICByZXN1bHQgJiY9IChrID09IDEgfHwgayA9PSAyIHx8IGsgPT0gMyk7CiAgICAgICAgfQoKICAgICAgICAvLyBUaGUgbWFwIHNlbGYubUMgaGFzIGEgc2luZ2xlIGVudHJ5IDEwMCAtPiBNYXBXcmFwcGVyIHttOiAxMCAtPiBvcmlnaW5hbCBzZWxmLnNBfS4KICAgICAgICBmb3JlYWNoIChrMSwgdjEgaW4gc2VsZi5tQykgewogICAgICAgICAgICBmb3JlYWNoIChrMiwgdjIgaW4gdjEubSkgewogICAgICAgICAgICAgICAgcmVzdWx0ICYmPQogICAgICAgICAgICAgICAgICAgICAgICAgazEgPT0gMTAwICYmIAogICAgICAgICAgICAgICAgICAgICAgICAgazIgPT0gMTAgJiYKICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgdjIuYTEgPT0gMjAgJiYgCiAgICAgICAgICAgICAgICAgICAgICAgICB2Mi5hMi5iMSA9PSB0cnVlICYmCiAgICAgICAgICAgICAgICAgICAgICAgICB2Mi5hMi5iMi5jMSA9PSA1ICYmCiAgICAgICAgICAgICAgICAgICAgICAgICB2Mi5hMi5iMyA9PSAxMDsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KCiAgICBmdW4gbXV0YXRlQ29udHJhY3RTdGF0ZSgpOiBCb29sIHsKICAgICAgICAvLyBGaXJzdCwgbWFrZSBhIGNvcHkgb2YgdGhlIGNvbnRyYWN0CiAgICAgICAgbGV0IGMgPSBzZWxmOwogICAgICAgIAogICAgICAgIC8vIEluIHRoZSBjb3B5LCBjaGFuZ2UgdGhlIHVCIGZpZWxkIGFuZCB0aGUgc0EuYTIuYjIuYzEgZmllbGQuCiAgICAgICAgCiAgICAgICAgYy5jaGFuZ2VTb21lQ29udHJhY3RGaWVsZHMoKTsKCiAgICAgICAgbGV0IHJlc3VsdCA9IAogICAgICAgICAgICAgICBzZWxmLmNoZWNrQWxsQ29udHJhY3RGaWVsZHNBcmVVbmNoYW5nZWQoKSAmJgoKICAgICAgICAgICAgICAgLy8gVGhpcyBsaW5lIHRlc3RzIHRoYXQgbWV0aG9kIGNhbGxzIG9uIGNvcGllcyBhY3R1YWxseSB1c2UgdGhlIHN0YXRlIG9mIHRoZSBjb3B5LgogICAgICAgICAgICAgICBjLmNoZWNrRmllbGRzRXF1YWxUbyhTQiB7YjE6IHRydWUsIGIyOiBTQyB7YzE6IDc3fSwgYjM6IDg4fSwgMzUpOwoKICAgICAgICAvLyBQZXJzaXN0IHRoZSBjb3B5IGludG8gc2VsZgogICAgICAgIAogICAgICAgIHNlbGYgPSBjOwoKICAgICAgICAvLyBOb3csIGNoZWNrIHRoYXQgdGhlIGNoYW5nZXMgaW4gYyBhcmUgbm93IGluIHNlbGYuCiAgICAgICAgLy8gTm90ZSB0aGF0IGNoZWNrRmllbGRzRXF1YWxUbyBpcyBjYWxsZWQgb24gc2VsZiBub3cuCgogICAgICAgIHJlc3VsdCAmJj0gc2VsZi5jaGVja0ZpZWxkc0VxdWFsVG8oU0Ige2IxOiB0cnVlLCBiMjogU0Mge2MxOiA3N30sIGIzOiA4OH0sIDM1KTsKCiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KCiAgICBnZXQgZnVuIHRlc3RSZXR1cm5lZENvbnRyYWN0cygpOiBCb29sIHsKICAgICAgICAvLyBUaGUgY2FsbCB0byB0aGUgbm9uLW11dGF0aW5nIGV4dGVuZHMgZnVuY3Rpb24gImNvcHlDb250cmFjdCIgYWx3YXlzIG1ha2VzIGEgY29weQogICAgICAgIC8vIG9mIHRoZSBwYXJhbWV0ZXIgY29udHJhY3QuIFRoZXJlZm9yZSwgcGFzc2luZyB0aGUgcmVzdWx0IHRvIHRoZSBtdXRhdGluZyBmdW5jdGlvbiAKICAgICAgICAvLyAiY2hhbmdlU29tZUNvbnRyYWN0RmllbGRzIiB3aWxsIG1vZGlmeSB0aGUgY29weSwgbm90IHRoZSBvcmlnaW5hbCBjb250cmFjdC4gCiAgICAKICAgICAgICBzZWxmLmNvcHlDb250cmFjdCgpLmNoYW5nZVNvbWVDb250cmFjdEZpZWxkcygpOwoKICAgICAgICBsZXQgcmVzdWx0ID0gCiAgICAgICAgICAgICAgIHNlbGYuY2hlY2tBbGxDb250cmFjdEZpZWxkc0FyZVVuY2hhbmdlZCgpOwoKICAgICAgICAvLyBGb3IgdGhlIGZvbGxvd2luZyB0ZXN0LCBtYWtlIGEgY29weSBvZiBzZWxmLgogICAgICAgIGxldCBjID0gc2VsZjsKCiAgICAgICAgLy8gTm93IGNvbnNpZGVyIHRoaXMgZXhwcmVzc2lvbjoKCiAgICAgICAgYy5yZWZsZWN0Q29udHJhY3QoKS5jaGFuZ2VTb21lQ29udHJhY3RGaWVsZHMoKTsKCiAgICAgICAgLy8gQWdhaW4sIHBhc3NpbmcgImMiIHRvIHRoZSBtdXRhdGluZyBmdW5jdGlvbiAicmVmbGVjdENvbnRyYWN0IiwKICAgICAgICAvLyB3aWxsIHJlYXNzaWduIGJhY2sgdG8gYyBhIGNvcHkgb2YgYywgYnV0IGl0IHdpbGwgYWxzbyBwYXNzIHRoZSBjb3B5IG9mIGMgdG8gCiAgICAgICAgLy8gY2hhbmdlU29tZUNvbnRyYWN0RmllbGRzLgogICAgICAgIC8vIFRoaXMgbWVhbnMgdGhhdCB0aGUgYWJvdmUgZXhwcmVzc2lvbiB3aWxsIG5vdCBtb2RpZnkgYy4KICAgICAgICAvLyBOb3RlIHRoYXQgc2luY2UgdGhlIHJldHVybiB0eXBlIG9mIGNoYW5nZVNvbWVDb250cmFjdEZpZWxkcyBpcyB2b2lkLAogICAgICAgIC8vIHdlIGNhbm5vdCB1c2UgdGhlIHRyaWNrOgogICAgICAgIC8vIAogICAgICAgIC8vIGMgPSBjLnJlZmxlY3RDb250cmFjdCgpLmNoYW5nZVNvbWVDb250cmFjdEZpZWxkcygpOwogICAgICAgIC8vCiAgICAgICAgLy8gdG8gYWN0dWFsbHkgdXBkYXRlIGMuIEhlbmNlLCB0aGUgb25seSB3YXlzIGFyZSB0byBkaXJlY3RseSBjYWxsIAogICAgICAgIC8vIGNoYW5nZVNvbWVDb250cmFjdEZpZWxkcyBvciBkaXZpZGUgdGhlIGV4cHJlc3Npb24gaW50byBzdGVwczoKICAgICAgICAvLyAKICAgICAgICAvLyBjLmNoYW5nZVNvbWVDb250cmFjdEZpZWxkcygpOwogICAgICAgIC8vIAogICAgICAgIC8vIG9yOgogICAgICAgIC8vIAogICAgICAgIC8vIGMucmVmbGVjdENvbnRyYWN0KCk7ICAKICAgICAgICAvLyBjLmNoYW5nZVNvbWVDb250cmFjdEZpZWxkcygpOwoKICAgICAgICAvLyBOb3RoaW5nIGNoYW5nZWQKICAgICAgICByZXN1bHQgJiY9CiAgICAgICAgICAgICAgIHNlbGYuY2hlY2tBbGxDb250cmFjdEZpZWxkc0FyZVVuY2hhbmdlZCgpICYmCiAgICAgICAgICAgICAgIGMuY2hlY2tBbGxDb250cmFjdEZpZWxkc0FyZVVuY2hhbmdlZCgpOwoKICAgICAgICAvLyBXaGVuIGNoYWluaW5nIG11dGF0aW5nIGZ1bmN0aW9ucywgb25lIG5lZWRzIHRvIHJlYXNzaWduIGMgaW4gb3JkZXIgdG8gbXV0YXRlIGl0LAogICAgICAgIC8vIGJlY2F1c2UgdGhlIGNoYWluIHBhc3NlcyBjb3BpZXMgdG8gdGhlIG5leHQgbXV0YXRpbmcgZnVuY3Rpb24sCiAgICAgICAgLy8gYW5kIHRoZSBjb3B5IHJldHVybmVkIGJ5IHRoZSBsYXN0IG11dGF0aW5nIGZ1bmN0aW9uIHdpbGwgYmUgbG9zdCAKICAgICAgICAvLyBpZiBub3QgcmVhc3NpZ25lZCBiYWNrIGludG8gYzoKICAgICAgICAKICAgICAgICBjID0gYy5yZWZsZWN0Q29udHJhY3QoKS5pbmNyZW1lbnRJbnRGaWVsZHNJblVCKCkuZmxpcEJvb2xlYW5GaWVsZHNJblVCKCk7CgogICAgICAgIC8vIGMgaXMgbm93IGNoYW5nZWQsIHRoZSByZXN0IHJlbWFpbnMgdGhlIHNhbWUuCiAgICAgICAgcmVzdWx0ICYmPQogICAgICAgICAgICAgICBzZWxmLmNoZWNrQWxsQ29udHJhY3RGaWVsZHNBcmVVbmNoYW5nZWQoKSAmJgogICAgICAgICAgICAgICBjLmNoZWNrRmllbGRzRXF1YWxUbyhTQiB7YjE6IHRydWUsIGIyOiBTQyB7YzE6IDF9LCBiMzogMTV9LCA1KTsKCiAgICAgICAgcmV0dXJuIHJlc3VsdDsKCiAgICB9CgogICAgZ2V0IGZ1biBtdXRhdGVDb250cmFjdFN0YXRlRmxhZygpOiBCb29sIHsgICAKICAgICAgICByZXR1cm4gc2VsZi5tdXRhdGVDb250cmFjdFN0YXRlUmVzdWx0OwogICAgfQoKICAgIGdldCBmdW4gY2hhbmdlc1BlcnNpc3RlZCgpOiBCb29sIHsKICAgICAgICByZXR1cm4gc2VsZi5jaGVja0ZpZWxkc0VxdWFsVG8oU0Ige2IxOiB0cnVlLCBiMjogU0Mge2MxOiA3N30sIGIzOiA4OH0sIDM1KTsKICAgIH0KCgogICAgLyoqKioqKioqKioqKioqKiBJbnRlZ2VycyAqKioqKioqKioqKioqKioqKioqKi8KCiAgICAvKgogICAgVGhlIGZvbGxvd2luZyBmdW5jdGlvbnMgZXhlbXBsaWZ5IGhvdyB0byBwcm9wZXJseSBjaGFpbiBtdXRhdGluZyBmdW5jdGlvbnMuCiAgICBFYWNoIGZ1bmN0aW9uIGluIHRoZSBjaGFpbiByZXR1cm5zIGEgY29weSB0byB0aGUgbmV4dCBmdW5jdGlvbiBpbiB0aGUgY2hhaW4uCiAgICBIZW5jZSwgdG8gY2hhbmdlIHRoZSBvcmlnaW5hbCB2YXJpYWJsZSwgd2UgbmVlZCB0byByZWFzc2lnbiB0aGUgdmFsdWUgcmV0dXJuZWQgCiAgICBmcm9tIHRoZSBsYXN0IG11dGF0aW5nIGZ1bmN0aW9uLgoKICAgIEFub3RoZXIgd2F5IHRoYXQgaXMgYWN0dWFsbHkgbGVzcyBjb25mdXNpbmcsIGlzIHRvIHNpbXBseSBicmVhayB0aGUgY2hhaW4KICAgIGludG8gc2luZ2xlIHN0ZXBzLgoKICAgICovCiAgICBnZXQgZnVuIG11dGF0ZXNDaGFpbkludDEoKTogQm9vbCB7CiAgICAgICAgbGV0IHMgPSAyOwogICAgICAgIHMubXVsdGlwbHlCeTIoKS5pbmNyZW1lbnQoKS5kb05vdGhpbmcoKTsgIC8vIHMgaXMgY2hhbmdlZCBvbmx5IGJ5IHRoZSBmaXJzdCBtdXRhdGluZyBmdW5jdGlvbi4KICAgICAgICAKICAgICAgICBsZXQgdCA9IDI7CiAgICAgICAgdCA9IHQubXVsdGlwbHlCeTIoKS5pbmNyZW1lbnQoKS5kb05vdGhpbmcoKTsgLy8gdCByZWFzc2lnbmVkIHdpdGggdGhlIHZhbHVlIHJldHVybmVkIGJ5IHRoZSBsYXN0IGZ1bmN0aW9uLgogICAgICAgIAogICAgICAgIC8vIFRoZSBsZXNzIGNvbmZ1c2luZyBzb2x1dGlvbiBpcyB0byBzaW1wbHkgYnJlYWsgdGhlIGNoYWluLgogICAgICAgIC8vIFRoaXMgc29sdXRpb24gZXZlbiB3b3JrcyB3aGVuIHRoZSBsYXN0IGZ1bmN0aW9uIGluIHRoZSBjaGFpbiBoYXMgdm9pZCByZXR1cm4gdHlwZS4KICAgICAgICAvLyBFYWNoIHN0ZXAgY2hhbmdlcyB6CgogICAgICAgIGxldCB6ID0gMjsKICAgICAgICB6Lm11bHRpcGx5QnkyKCk7CiAgICAgICAgei5pbmNyZW1lbnQoKTsKICAgICAgICB6LmRvTm90aGluZygpOwoKICAgICAgICByZXR1cm4gcyA9PSA0ICYmIHQgPT0gNSAmJiB6ID09IDU7CiAgICB9CgogICAgZ2V0IGZ1biBtdXRhdGVzQ2hhaW5JbnQyKCk6IEJvb2wgewogICAgICAgIGxldCBzID0gMjsKICAgICAgICBzLm11bHRpcGx5QnkyKCkuZG9Ob3RoaW5nKCkuaW5jcmVtZW50KCk7CiAgICAgICAgCiAgICAgICAgbGV0IHQgPSAyOwogICAgICAgIHQgPSB0Lm11bHRpcGx5QnkyKCkuZG9Ob3RoaW5nKCkuaW5jcmVtZW50KCk7ICAKICAgICAgICAKICAgICAgICBsZXQgeiA9IDI7CiAgICAgICAgei5tdWx0aXBseUJ5MigpOwogICAgICAgIHouZG9Ob3RoaW5nKCk7CiAgICAgICAgei5pbmNyZW1lbnQoKTsgIAoKICAgICAgICByZXR1cm4gcyA9PSA0ICYmIHQgPT0gNSAmJiB6ID09IDU7CiAgICB9CgogICAgZ2V0IGZ1biBtdXRhdGVzQ2hhaW5JbnQzKCk6IEJvb2wgewogICAgICAgIGxldCBzID0gMjsKICAgICAgICBzLmRvTm90aGluZygpLm11bHRpcGx5QnkyKCkuaW5jcmVtZW50KCk7CgogICAgICAgIGxldCB0ID0gMjsKICAgICAgICB0ID0gdC5kb05vdGhpbmcoKS5tdWx0aXBseUJ5MigpLmluY3JlbWVudCgpOwogICAgICAgIAogICAgICAgIGxldCB6ID0gMjsKICAgICAgICB6LmRvTm90aGluZygpOwogICAgICAgIHoubXVsdGlwbHlCeTIoKTsKICAgICAgICB6LmluY3JlbWVudCgpOwoKICAgICAgICByZXR1cm4gcyA9PSAyICYmIHQgPT0gNSAmJiB6ID09IDU7CiAgICB9CgogICAgZ2V0IGZ1biBtdXRhdGVzQ2hhaW5JbnQ0KCk6IEJvb2wgewogICAgICAgIGxldCBzID0gMjsKICAgICAgICBzLmRvTm90aGluZygpLmluY3JlbWVudCgpLm11bHRpcGx5QnkyKCk7CgogICAgICAgIGxldCB0ID0gMjsKICAgICAgICB0ID0gdC5kb05vdGhpbmcoKS5pbmNyZW1lbnQoKS5tdWx0aXBseUJ5MigpOwoKICAgICAgICBsZXQgeiA9IDI7CiAgICAgICAgei5kb05vdGhpbmcoKTsKICAgICAgICB6LmluY3JlbWVudCgpOwogICAgICAgIHoubXVsdGlwbHlCeTIoKTsKCiAgICAgICAgcmV0dXJuIHMgPT0gMiAmJiB0ID09IDYgJiYgeiA9PSA2OwogICAgfSAgICAKCiAgICBnZXQgZnVuIG11dGF0ZXNDaGFpbkludDUoKTogQm9vbCB7CiAgICAgICAgbGV0IHMgPSAyOwogICAgICAgIHMuaW5jcmVtZW50KCkuZG9Ob3RoaW5nKCkubXVsdGlwbHlCeTIoKTsKCiAgICAgICAgbGV0IHQgPSAyOwogICAgICAgIHQgPSB0LmluY3JlbWVudCgpLmRvTm90aGluZygpLm11bHRpcGx5QnkyKCk7CgogICAgICAgIGxldCB6ID0gMjsKICAgICAgICB6LmluY3JlbWVudCgpOwogICAgICAgIHouZG9Ob3RoaW5nKCk7CiAgICAgICAgei5tdWx0aXBseUJ5MigpOwoKICAgICAgICByZXR1cm4gcyA9PSAzICYmIHQgPT0gNiAmJiB6ID09IDY7CiAgICB9CgogICAgZ2V0IGZ1biBtdXRhdGVzQ2hhaW5JbnQ2KCk6IEJvb2wgewogICAgICAgIGxldCBzID0gMjsKICAgICAgICBzLmluY3JlbWVudCgpLm11bHRpcGx5QnkyKCkuZG9Ob3RoaW5nKCk7CgogICAgICAgIGxldCB0ID0gMjsKICAgICAgICB0ID0gdC5pbmNyZW1lbnQoKS5tdWx0aXBseUJ5MigpLmRvTm90aGluZygpOwoKICAgICAgICBsZXQgeiA9IDI7CiAgICAgICAgei5pbmNyZW1lbnQoKTsKICAgICAgICB6Lm11bHRpcGx5QnkyKCk7CiAgICAgICAgei5kb05vdGhpbmcoKTsKCiAgICAgICAgcmV0dXJuIHMgPT0gMyAmJiB0ID09IDYgJiYgeiA9PSA2OwogICAgfQoKICAgIC8qKioqKioqKioqKioqKiogQm9vbGVhbiBFeHByZXNzaW9ucyAqKioqKioqKioqKioqKioqKioqKi8KCiAgICAvKioqIFRlc3RzICYmIHNob3J0LWNpcmN1aXRpbmcgd2l0aCBtdXRhdGluZyBmdW5jdGlvbnMgKioqLwogICAgZ2V0IGZ1biBhbmRNdXRhdGVTaG9ydENpcmN1aXQoKTogQm9vbCB7CgogICAgICAgIGxldCBzID0gMTsKCiAgICAgICAgLy8gSXQgd2lsbCBldmFsdWF0ZSB0aGUgZnVsbCBleHByZXNzaW9uIHRvIGZhbHNlIGFuZCBpbmNyZW1lbnQgcyB0byAyCiAgICAgICAgbGV0IG0xID0gdHJ1ZSAmJiBzLmluY3JlbWVudCgpID4gMjsKCiAgICAgICAgbGV0IHJlc3VsdCA9IHMgPT0gMjsKCiAgICAgICAgLy8gU2hvcnQtY2lyY3VpdHMgdG8gZmFsc2UsIHNvIHRoYXQgcyBzaG91bGQgbm90IGJlIGluY3JlbWVudGVkLgogICAgICAgIGxldCBtMiA9IGZhbHNlICYmIHMuaW5jcmVtZW50KCkgPiAyOwoKICAgICAgICByZXN1bHQgJiY9IHMgPT0gMjsKCiAgICAgICAgLy8gU2hvcnQtY2lyY3VpdHMgdG8gZmFsc2UsIHNvIHRoYXQgcyBzaG91bGQgbm90IGJlIGluY3JlbWVudGVkLgogICAgICAgIGxldCBtMyA9IHMgPiAyICYmIHMuaW5jcmVtZW50KCkgPiAyOwoKICAgICAgICByZXN1bHQgJiY9IHMgPT0gMjsKCiAgICAgICAgLy8gSXQgd2lsbCBldmFsdWF0ZSB0aGUgZmlyc3QgYW5kIHNlY29uZCBjb25qdW5jdHMgYW5kIHNob3J0LWNpcmN1aXQgYXQgdGhlIAogICAgICAgIC8vIHNlY29uZCBjb25qdW5jdCB0byBmYWxzZS4gU28gcyB3aWxsIGJlIGluY3JlbWVudGVkIGF0IHRoZSBzZWNvbmQgY29uanVuY3QgdG8gMywgCiAgICAgICAgLy8gYnV0IGl0IHNob3VsZCBub3QgYmUgaW5jcmVtZW50ZWQgdG8gNCBpbiB0aGUgdGhpcmQgY29uanVuY3QuCiAgICAgICAgbGV0IG00ID0gcyA9PSAyICYmIHMuaW5jcmVtZW50KCkgPiAzICYmIHMuaW5jcmVtZW50KCkgPiAzOwoKICAgICAgICByZXN1bHQgJiY9IHMgPT0gMzsKCiAgICAgICAgLy8gSXQgd2lsbCBldmFsdWF0ZSB0aGUgZW50aXJlIGV4cHJlc3Npb24gdG8gdHJ1ZS4gU28sIHMgc2hvdWxkIGJlIGluY3JlbWVudGVkIHR3aWNlLgogICAgICAgIGxldCBtNSA9IHMgPT0gMyAmJiBzLmluY3JlbWVudCgpID4gMyAmJiBzLmluY3JlbWVudCgpID4gNDsKICAgICAgICAKICAgICAgICByZXN1bHQgJiY9IHMgPT0gNTsKCiAgICAgICAgLy8gSXQgd2lsbCBldmFsdWF0ZSB0aGUgZmlyc3QgYW5kIHNlY29uZCBjb25qdW5jdHMgYW5kIHNob3J0LWNpcmN1aXQgYXQgdGhlIAogICAgICAgIC8vIHNlY29uZCBjb25qdW5jdCB0byBmYWxzZS4gU28gcyB3aWxsIGJlIGluY3JlbWVudGVkIGF0IHRoZSBzZWNvbmQgY29uanVuY3QgdG8gNiwgCiAgICAgICAgLy8gYnV0IGl0IHNob3VsZCBub3QgYmUgaW5jcmVtZW50ZWQgdG8gNyBpbiB0aGUgdGhpcmQgY29uanVuY3Qgb3IgdG8gOCBpbiB0aGUgCiAgICAgICAgLy8gZm91cnRoIGNvbmp1bmN0LgogICAgICAgIGxldCBtNiA9IHMgPT0gNSAmJiBzLmluY3JlbWVudCgpID4gNiAmJiBzLmluY3JlbWVudCgpID4gNiAmJiBzLmluY3JlbWVudCgpID4gNjsKCiAgICAgICAgcmVzdWx0ICYmPSBzID09IDY7CgogICAgICAgIHJlc3VsdCAmJj0gIW0xICYmICFtMiAmJiAhbTMgJiYgIW00ICYmIG01ICYmICFtNjsKCiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KCiAgICAvKioqIFRlc3RzICYmIHNob3J0LWNpcmN1aXRpbmcgd2l0aCBpbmZpbml0ZSBsb29wcyAqKiovCiAgICBnZXQgZnVuIGFuZEluZmluaXRlTG9vcFNob3J0Q2lyY3VpdCgpOiBCb29sIHsKCiAgICAgICAgbGV0IHMgPSAxOwoKICAgICAgICAvLyBTaG9ydC1jaXJjdWl0cyB0byBmYWxzZSwgc28gbm8gaW5maW5pdGUgbG9vcCBoYXBwZW5zLgogICAgICAgIC8vIE5vdGUgdGhpcyBpbXBsaWNpdGx5IHRlc3RzIHRoZSBpbnRlcnByZXRlciBhcyB3ZWxsLCBiZWNhdXNlIHRoZSAKICAgICAgICAvLyBpbnRlcnByZXRlciB3aWxsIGJlIGFibGUgdG8gc2ltcGxpZnkgdGhlIGV4cHJlc3Npb24uCiAgICAgICAgbGV0IGwxID0gZmFsc2UgJiYgaW5maW5pdGVMb29wKCk7CgogICAgICAgIC8vIFNob3J0LWNpcmN1aXRzIHRvIGZhbHNlLCBzbyBubyBpbmZpbml0ZSBsb29wIGhhcHBlbnMuCiAgICAgICAgbGV0IGwyID0gcyA+IDEgJiYgaW5maW5pdGVMb29wKCk7CgogICAgICAgIC8vIEl0IHdpbGwgZXZhbHVhdGUgdGhlIGZpcnN0IGFuZCBzZWNvbmQgY29uanVuY3RzIGFuZCBzaG9ydC1jaXJjdWl0IGF0IHRoZSAKICAgICAgICAvLyBzZWNvbmQgY29uanVuY3QgdG8gZmFsc2UuIFNvIHMgd2lsbCBiZSBpbmNyZW1lbnRlZCBhdCB0aGUgc2Vjb25kIGNvbmp1bmN0IHRvIDIsIAogICAgICAgIC8vIEFuZCBubyBpbmZpbml0ZSBsb29wIGhhcHBlbnMgaW4gdGhlIHRoaXJkIGNvbmp1bmN0LgogICAgICAgIGxldCBsMyA9IHMgPT0gMSAmJiBzLmluY3JlbWVudCgpID4gMiAmJiBpbmZpbml0ZUxvb3AoKTsKCiAgICAgICAgbGV0IHJlc3VsdCA9IHMgPT0gMjsKCiAgICAgICAgLy8gSXQgd2lsbCBldmFsdWF0ZSB0aGUgZmlyc3QgYW5kIHNlY29uZCBjb25qdW5jdHMgYW5kIHNob3J0LWNpcmN1aXQgYXQgdGhlIAogICAgICAgIC8vIHNlY29uZCBjb25qdW5jdCB0byBmYWxzZS4gU28gcyB3aWxsIGJlIGluY3JlbWVudGVkIGF0IHRoZSBzZWNvbmQgY29uanVuY3QgdG8gMywgCiAgICAgICAgLy8gQW5kIG5vIGluZmluaXRlIGxvb3AgaGFwcGVucyBpbiB0aGUgdGhpcmQgY29uanVuY3QgYW5kIG5vIGluY3JlbWVudCBoYXBwZW5zIGF0IAogICAgICAgIC8vIHRoZSBmb3VydGggY29uanVuY3QuCiAgICAgICAgbGV0IGw0ID0gcyA9PSAyICYmIHMuaW5jcmVtZW50KCkgPiAzICYmIGluZmluaXRlTG9vcCgpICYmIHMuaW5jcmVtZW50KCkgPiAzOwoKICAgICAgICByZXN1bHQgJiY9IHMgPT0gMzsKCiAgICAgICAgcmVzdWx0ICYmPSAhbDEgJiYgIWwyICYmICFsMyAmJiAhbDQ7CgogICAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CgogICAgLyoqKiBUZXN0cyAmJiBzaG9ydC1jaXJjdWl0aW5nIHdpdGggZXhjZXB0aW9uIHRocm93aW5nICoqKi8KICAgIGdldCBmdW4gYW5kRXhjZXB0aW9uU2hvcnRDaXJjdWl0KCk6IEJvb2wgewoKICAgICAgICBsZXQgcyA9IDE7CgogICAgICAgIC8vIFNob3J0LWNpcmN1aXRzIHRvIGZhbHNlLCBzbyBubyBleGNlcHRpb24gdGhyb3duLgogICAgICAgIGxldCB0MSA9IGZhbHNlICYmIHRocm93RXhjZXB0aW9uKHMtMSk7CgogICAgICAgIC8vIFNob3J0LWNpcmN1aXRzIHRvIGZhbHNlLCBzbyBubyBleGNlcHRpb24gdGhyb3duLgogICAgICAgIGxldCB0MiA9IHMgPiAxICYmIHRocm93RXhjZXB0aW9uKHMtMSk7CgogICAgICAgIC8vIEl0IHdpbGwgZXZhbHVhdGUgdGhlIGZpcnN0IGFuZCBzZWNvbmQgY29uanVuY3RzIGFuZCBzaG9ydC1jaXJjdWl0IGF0IHRoZSAKICAgICAgICAvLyBzZWNvbmQgY29uanVuY3QgdG8gZmFsc2UuIFNvIHMgd2lsbCBiZSBpbmNyZW1lbnRlZCBhdCB0aGUgc2Vjb25kIGNvbmp1bmN0IHRvIDIsIAogICAgICAgIC8vIEFuZCBubyBleGNlcHRpb24gaGFwcGVucyBpbiB0aGUgdGhpcmQgY29uanVuY3QuCiAgICAgICAgbGV0IHQzID0gcyA9PSAxICYmIHMuaW5jcmVtZW50KCkgPiAyICYmIHRocm93RXhjZXB0aW9uKHMtMik7CgogICAgICAgIGxldCByZXN1bHQgPSBzID09IDI7CgogICAgICAgIC8vIEl0IHdpbGwgZXZhbHVhdGUgdGhlIGZpcnN0IGFuZCBzZWNvbmQgY29uanVuY3RzIGFuZCBzaG9ydC1jaXJjdWl0IGF0IHRoZSAKICAgICAgICAvLyBzZWNvbmQgY29uanVuY3QgdG8gZmFsc2UuIFNvIHMgd2lsbCBiZSBpbmNyZW1lbnRlZCBhdCB0aGUgc2Vjb25kIGNvbmp1bmN0IHRvIDMsIAogICAgICAgIC8vIEFuZCBubyBleGNlcHRpb24gaGFwcGVucyBpbiB0aGUgdGhpcmQgY29uanVuY3QgYW5kIG5vIGluY3JlbWVudCBoYXBwZW5zIGF0IAogICAgICAgIC8vIHRoZSBmb3VydGggY29uanVuY3QuCiAgICAgICAgbGV0IHQ0ID0gcyA9PSAyICYmIHMuaW5jcmVtZW50KCkgPiAzICYmIHRocm93RXhjZXB0aW9uKHMtMykgJiYgcy5pbmNyZW1lbnQoKSA+IDM7CgogICAgICAgIHJlc3VsdCAmJj0gcyA9PSAzOwoKICAgICAgICByZXN1bHQgJiY9ICF0MSAmJiAhdDIgJiYgIXQzICYmICF0NDsKCiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KCiAgICAvKioqIFRlc3RzIHx8IHNob3J0LWNpcmN1aXRpbmcgd2l0aCBtdXRhdGluZyBmdW5jdGlvbnMgKioqLwogICAgZ2V0IGZ1biBvck11dGF0ZVNob3J0Q2lyY3VpdCgpOiBCb29sIHsKCiAgICAgICAgbGV0IHMgPSAxOwoKICAgICAgICAvLyBJdCB3aWxsIGV2YWx1YXRlIHRoZSBmdWxsIGV4cHJlc3Npb24gdG8gdHJ1ZSBhbmQgaW5jcmVtZW50IHMgdG8gMgogICAgICAgIGxldCBtMSA9IGZhbHNlIHx8IHMuaW5jcmVtZW50KCkgPj0gMjsKCiAgICAgICAgbGV0IHJlc3VsdCA9IHMgPT0gMjsKCiAgICAgICAgLy8gU2hvcnQtY2lyY3VpdHMgdG8gdHJ1ZSwgc28gdGhhdCBzIHNob3VsZCBub3QgYmUgaW5jcmVtZW50ZWQuCiAgICAgICAgbGV0IG0yID0gdHJ1ZSB8fCBzLmluY3JlbWVudCgpID4gMjsKCiAgICAgICAgcmVzdWx0ICYmPSBzID09IDI7CgogICAgICAgIC8vIFNob3J0LWNpcmN1aXRzIHRvIHRydWUsIHNvIHRoYXQgcyBzaG91bGQgbm90IGJlIGluY3JlbWVudGVkLgogICAgICAgIGxldCBtMyA9IHMgPj0gMiB8fCBzLmluY3JlbWVudCgpID4gMjsKCiAgICAgICAgcmVzdWx0ICYmPSBzID09IDI7CgogICAgICAgIC8vIEl0IHdpbGwgZXZhbHVhdGUgdGhlIGZpcnN0IGFuZCBzZWNvbmQgZGlzanVuY3RzIGFuZCBzaG9ydC1jaXJjdWl0IGF0IHRoZSAKICAgICAgICAvLyBzZWNvbmQgZGlzanVuY3QgdG8gdHJ1ZS4gU28gcyB3aWxsIGJlIGluY3JlbWVudGVkIGF0IHRoZSBzZWNvbmQgZGlzanVuY3QgdG8gMywgCiAgICAgICAgLy8gYnV0IGl0IHNob3VsZCBub3QgYmUgaW5jcmVtZW50ZWQgdG8gNCBpbiB0aGUgdGhpcmQgb25lLgogICAgICAgIGxldCBtNCA9IHMgIT0gMiB8fCBzLmluY3JlbWVudCgpID49IDMgfHwgcy5pbmNyZW1lbnQoKSA+IDM7CgogICAgICAgIHJlc3VsdCAmJj0gcyA9PSAzOwoKICAgICAgICAvLyBJdCB3aWxsIGV2YWx1YXRlIHRoZSBlbnRpcmUgZXhwcmVzc2lvbiB0byBmYWxzZS4gU28sIHMgc2hvdWxkIGJlIGluY3JlbWVudGVkIHR3aWNlLgogICAgICAgIGxldCBtNSA9IHMgIT0gMyB8fCBzLmluY3JlbWVudCgpIDwgMyB8fCBzLmluY3JlbWVudCgpIDwgNDsKICAgICAgICAKICAgICAgICByZXN1bHQgJiY9IHMgPT0gNTsKCiAgICAgICAgLy8gSXQgd2lsbCBldmFsdWF0ZSB0aGUgZmlyc3QgYW5kIHNlY29uZCBkaXNqdW5jdHMgYW5kIHNob3J0LWNpcmN1aXQgYXQgdGhlIAogICAgICAgIC8vIHNlY29uZCBkaXNqdW5jdCB0byB0cnVlLiBTbyBzIHdpbGwgYmUgaW5jcmVtZW50ZWQgYXQgdGhlIHNlY29uZCBkaXNqdW5jdCB0byA2LCAKICAgICAgICAvLyBidXQgaXQgc2hvdWxkIG5vdCBiZSBpbmNyZW1lbnRlZCB0byA3IGluIHRoZSB0aGlyZCBkaXNqdW5jdCBvciB0byA4IGluIHRoZSAKICAgICAgICAvLyBmb3VydGggb25lLgogICAgICAgIGxldCBtNiA9IHMgIT0gNSB8fCBzLmluY3JlbWVudCgpID49IDYgfHwgcy5pbmNyZW1lbnQoKSA+IDYgfHwgcy5pbmNyZW1lbnQoKSA+IDY7CgogICAgICAgIHJlc3VsdCAmJj0gcyA9PSA2OwoKICAgICAgICByZXN1bHQgJiY9IG0xICYmIG0yICYmIG0zICYmIG00ICYmICFtNSAmJiBtNjsKCiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KCiAgICAvKioqIFRlc3RzIHx8IHNob3J0LWNpcmN1aXRpbmcgd2l0aCBpbmZpbml0ZSBsb29wcyAqKiovCiAgICBnZXQgZnVuIG9ySW5maW5pdGVMb29wU2hvcnRDaXJjdWl0KCk6IEJvb2wgewoKICAgICAgICBsZXQgcyA9IDE7CgogICAgICAgIC8vIFNob3J0LWNpcmN1aXRzIHRvIHRydWUsIHNvIG5vIGluZmluaXRlIGxvb3AgaGFwcGVucy4KICAgICAgICAvLyBOb3RlIHRoaXMgaW1wbGljaXRseSB0ZXN0cyB0aGUgaW50ZXJwcmV0ZXIgYXMgd2VsbCwgYmVjYXVzZSB0aGUgCiAgICAgICAgLy8gaW50ZXJwcmV0ZXIgd2lsbCBiZSBhYmxlIHRvIHNpbXBsaWZ5IHRoZSBleHByZXNzaW9uLgogICAgICAgIGxldCBsMSA9IHRydWUgfHwgaW5maW5pdGVMb29wKCk7CgogICAgICAgIC8vIFNob3J0LWNpcmN1aXRzIHRvIHRydWUsIHNvIG5vIGluZmluaXRlIGxvb3AgaGFwcGVucy4KICAgICAgICBsZXQgbDIgPSBzID49IDEgfHwgaW5maW5pdGVMb29wKCk7CgogICAgICAgIC8vIEl0IHdpbGwgZXZhbHVhdGUgdGhlIGZpcnN0IGFuZCBzZWNvbmQgZGlzanVuY3RzIGFuZCBzaG9ydC1jaXJjdWl0IGF0IHRoZSAKICAgICAgICAvLyBzZWNvbmQgZGlzanVuY3QgdG8gdHJ1ZS4gU28gcyB3aWxsIGJlIGluY3JlbWVudGVkIGF0IHRoZSBzZWNvbmQgZGlzanVuY3QgdG8gMiwgCiAgICAgICAgLy8gQW5kIG5vIGluZmluaXRlIGxvb3AgaGFwcGVucyBpbiB0aGUgdGhpcmQgZGlzanVuY3QuCiAgICAgICAgbGV0IGwzID0gcyAhPSAxIHx8IHMuaW5jcmVtZW50KCkgPj0gMiB8fCBpbmZpbml0ZUxvb3AoKTsKCiAgICAgICAgbGV0IHJlc3VsdCA9IHMgPT0gMjsKCiAgICAgICAgLy8gSXQgd2lsbCBldmFsdWF0ZSB0aGUgZmlyc3QgYW5kIHNlY29uZCBkaXNqdW5jdHMgYW5kIHNob3J0LWNpcmN1aXQgYXQgdGhlIAogICAgICAgIC8vIHNlY29uZCBkaXNqdW5jdCB0byB0cnVlLiBTbyBzIHdpbGwgYmUgaW5jcmVtZW50ZWQgYXQgdGhlIHNlY29uZCBkaXNqdW5jdCB0byAzLCAKICAgICAgICAvLyBBbmQgbm8gaW5maW5pdGUgbG9vcCBoYXBwZW5zIGluIHRoZSB0aGlyZCBkaXNqdW5jdCBhbmQgbm8gaW5jcmVtZW50IGhhcHBlbnMgYXQgCiAgICAgICAgLy8gdGhlIGZvdXJ0aCBvbmUuCiAgICAgICAgbGV0IGw0ID0gcyAhPSAyIHx8IHMuaW5jcmVtZW50KCkgPj0gMyB8fCBpbmZpbml0ZUxvb3AoKSB8fCBzLmluY3JlbWVudCgpID4gMzsKCiAgICAgICAgcmVzdWx0ICYmPSBzID09IDM7CgogICAgICAgIHJlc3VsdCAmJj0gbDEgJiYgbDIgJiYgbDMgJiYgbDQ7CgogICAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CgogICAgLyoqKiBUZXN0cyB8fCBzaG9ydC1jaXJjdWl0aW5nIHdpdGggZXhjZXB0aW9uIHRocm93aW5nICoqKi8KICAgIGdldCBmdW4gb3JFeGNlcHRpb25TaG9ydENpcmN1aXQoKTogQm9vbCB7CgogICAgICAgIGxldCBzID0gMTsKCiAgICAgICAgLy8gU2hvcnQtY2lyY3VpdHMgdG8gdHJ1ZSwgc28gbm8gZXhjZXB0aW9uIHRocm93bi4KICAgICAgICBsZXQgdDEgPSB0cnVlIHx8IHRocm93RXhjZXB0aW9uKHMtMSk7CgogICAgICAgIC8vIFNob3J0LWNpcmN1aXRzIHRvIHRydWUsIHNvIG5vIGV4Y2VwdGlvbiB0aHJvd24uCiAgICAgICAgbGV0IHQyID0gcyA+PSAxIHx8IHRocm93RXhjZXB0aW9uKHMtMSk7CgogICAgICAgIC8vIEl0IHdpbGwgZXZhbHVhdGUgdGhlIGZpcnN0IGFuZCBzZWNvbmQgZGlzanVuY3RzIGFuZCBzaG9ydC1jaXJjdWl0IGF0IHRoZSAKICAgICAgICAvLyBzZWNvbmQgZGlzanVuY3QgdG8gdHJ1ZS4gU28gcyB3aWxsIGJlIGluY3JlbWVudGVkIGF0IHRoZSBzZWNvbmQgZGlzanVuY3QgdG8gMiwgCiAgICAgICAgLy8gQW5kIG5vIGV4Y2VwdGlvbiBoYXBwZW5zIGluIHRoZSB0aGlyZCBkaXNqdW5jdC4KICAgICAgICBsZXQgdDMgPSBzICE9IDEgfHwgcy5pbmNyZW1lbnQoKSA+PSAyIHx8IHRocm93RXhjZXB0aW9uKHMtMik7CgogICAgICAgIGxldCByZXN1bHQgPSBzID09IDI7CgogICAgICAgIC8vIEl0IHdpbGwgZXZhbHVhdGUgdGhlIGZpcnN0IGFuZCBzZWNvbmQgZGlzanVuY3RzIGFuZCBzaG9ydC1jaXJjdWl0IGF0IHRoZSAKICAgICAgICAvLyBzZWNvbmQgZGlzanVuY3QgdG8gdHJ1ZS4gU28gcyB3aWxsIGJlIGluY3JlbWVudGVkIGF0IHRoZSBzZWNvbmQgZGlzanVuY3QgdG8gMywgCiAgICAgICAgLy8gQW5kIG5vIGV4Y2VwdGlvbiBoYXBwZW5zIGluIHRoZSB0aGlyZCBkaXNqdW5jdCBhbmQgbm8gaW5jcmVtZW50IGhhcHBlbnMgYXQgCiAgICAgICAgLy8gdGhlIGZvdXJ0aCBvbmUuCiAgICAgICAgbGV0IHQ0ID0gcyAhPSAyIHx8IHMuaW5jcmVtZW50KCkgPj0gMyB8fCB0aHJvd0V4Y2VwdGlvbihzLTMpIHx8IHMuaW5jcmVtZW50KCkgPiAzOwoKICAgICAgICByZXN1bHQgJiY9IHMgPT0gMzsKCiAgICAgICAgcmVzdWx0ICYmPSB0MSAmJiB0MiAmJiB0MyAmJiB0NDsKCiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KCiAgICAvLy8gVGVzdHMgXyA/IF8gOiBfIHNob3J0LWNpcmN1aXRpbmcgd2l0aCBtdXRhdGluZyBmdW5jdGlvbnMKICAgIGdldCBmdW4gdGVybmFyeU11dGF0ZVNob3J0Q2lyY3VpdCgpOiBCb29sIHsKCiAgICAgICAgbGV0IHMgPSAxOwoKICAgICAgICAvLyBJdCB3aWxsIGV2YWx1YXRlIHRoZSBmdWxsIGV4cHJlc3Npb24gdG8gZmFsc2UgYW5kIGluY3JlbWVudCBzIHRvIDIuIFRoZSBmYWxzZSBicmFuY2ggd2lsbCBub3QgaW5jcmVtZW50IHMgYWdhaW4uCiAgICAgICAgbGV0IG0xID0gdHJ1ZSA/IHMuaW5jcmVtZW50KCkgPiAyIDogcy5pbmNyZW1lbnQoKSA+IDI7CgogICAgICAgIGxldCByZXN1bHQgPSBzID09IDI7CgogICAgICAgIC8vIEl0IHdpbGwgZXZhbHVhdGUgdGhlIGZ1bGwgZXhwcmVzc2lvbiB0byB0cnVlIGFuZCBpbmNyZW1lbnQgcyB0byAzLiBUaGUgdHJ1ZSBicmFuY2ggd2lsbCBub3QgaW5jcmVtZW50IHMgYWdhaW4uCiAgICAgICAgbGV0IG0yID0gZmFsc2UgPyBzLmluY3JlbWVudCgpID4gMiA6IHMuaW5jcmVtZW50KCkgPiAyOwoKICAgICAgICByZXN1bHQgJiY9IHMgPT0gMzsKCiAgICAgICAgLy8gQ29uZGl0aW9uIGV2YWx1YXRlcyB0byBmYWxzZSwgc28gdGhhdCBzIHNob3VsZCBub3QgYmUgaW5jcmVtZW50ZWQuIG0zIGlzIHRydWUuCiAgICAgICAgbGV0IG0zID0gcyA+IDMgPyBzLmluY3JlbWVudCgpID4gMiA6IHMgPiAyOwoKICAgICAgICByZXN1bHQgJiY9IHMgPT0gMzsKCiAgICAgICAgLy8gQ29uZGl0aW9uIGV2YWx1YXRlcyB0byB0cnVlLCBzbyB0aGF0IHMgc2hvdWxkIG5vdCBiZSBpbmNyZW1lbnRlZC4gbTQgaXMgdHJ1ZS4KICAgICAgICBsZXQgbTQgPSBzID49IDMgPyBzID4gMiA6IHMuaW5jcmVtZW50KCkgPiAyOwoKICAgICAgICByZXN1bHQgJiY9IHMgPT0gMzsKCiAgICAgICAgLy8gQ29uZGl0aW9uIHdpbGwgaW5jcmVtZW50IHMgdG8gNCBhbmQgZXZhbHVhdGUgdG8gdHJ1ZS4gRmFsc2UgYnJhbmNoIGRvZXMgbm90IGluY3JlbWVudCBzIGFnYWluLiBtNSBpcyB0cnVlLgogICAgICAgIGxldCBtNSA9IHMuaW5jcmVtZW50KCkgPiAzID8gcyA9PSA0IDogcy5pbmNyZW1lbnQoKSA+IDM7CgogICAgICAgIHJlc3VsdCAmJj0gcyA9PSA0OwoKICAgICAgICAvLyBDb25kaXRpb24gd2lsbCBpbmNyZW1lbnQgcyB0byA1IGFuZCBldmFsdWF0ZSB0byBmYWxzZS4gVHJ1ZSBicmFuY2ggZG9lcyBub3QgaW5jcmVtZW50IHMgYWdhaW4uIG02IGlzIGZhbHNlLgogICAgICAgIGxldCBtNiA9IHMuaW5jcmVtZW50KCkgPiA1ID8gcy5pbmNyZW1lbnQoKSA+IDMgOiBzID4gNSA7CiAgICAgICAgCiAgICAgICAgcmVzdWx0ICYmPSBzID09IDU7CgogICAgICAgIC8vIENvbmRpdGlvbiB3aWxsIGluY3JlbWVudCBzIHRvIDYgYW5kIGV2YWx1YXRlIHRvIHRydWUuIFRydWUgYnJhbmNoIGluY3JlbWVudHMgcyBhZ2Fpbi4gbTcgaXMgdHJ1ZS4KICAgICAgICBsZXQgbTcgPSBzLmluY3JlbWVudCgpID4gNSA/IHMuaW5jcmVtZW50KCkgPT0gNyA6IHMgPT0gNjsKCiAgICAgICAgcmVzdWx0ICYmPSBzID09IDc7CgogICAgICAgIC8vIENvbmRpdGlvbiB3aWxsIGluY3JlbWVudCBzIHRvIDggYW5kIGV2YWx1YXRlIHRvIGZhbHNlLiBGYWxzZSBicmFuY2ggaW5jcmVtZW50cyBzIGFnYWluLiBtOCBpcyB0cnVlLgogICAgICAgIGxldCBtOCA9IHMuaW5jcmVtZW50KCkgPiA4ID8gcyA9PSA4IDogcy5pbmNyZW1lbnQoKSA9PSA5OwogICAgICAgIAogICAgICAgIHJlc3VsdCAmJj0gcyA9PSA5OwoKICAgICAgICByZXN1bHQgJiY9ICFtMSAmJiBtMiAmJiBtMyAmJiBtNCAmJiBtNSAmJiAhbTYgJiYgbTcgJiYgbTg7CgogICAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CgogICAgLy8vIFRlc3RzIF8gPyBfIDogXyBzaG9ydC1jaXJjdWl0aW5nIHdpdGggaW5maW5pdGUgbG9vcHMKICAgIGdldCBmdW4gdGVybmFyeUluZmluaXRlTG9vcFNob3J0Q2lyY3VpdCgpOiBCb29sIHsKCiAgICAgICAgbGV0IHMgPSAxOwoKICAgICAgICAvLyBJdCB3aWxsIGV2YWx1YXRlIHRoZSBmdWxsIGV4cHJlc3Npb24gdG8gZmFsc2UuIFRoZSBmYWxzZSBicmFuY2ggd2lsbCBub3QgZXhlY3V0ZSB0aGUgbG9vcC4KICAgICAgICBsZXQgbDEgPSB0cnVlID8gcyA+IDEgOiBpbmZpbml0ZUxvb3AoKTsKCiAgICAgICAgLy8gSXQgd2lsbCBldmFsdWF0ZSB0aGUgZnVsbCBleHByZXNzaW9uIHRvIGZhbHNlLiBUaGUgdHJ1ZSBicmFuY2ggd2lsbCBub3QgZXhlY3V0ZSB0aGUgbG9vcC4KICAgICAgICBsZXQgbDIgPSBmYWxzZSA/IGluZmluaXRlTG9vcCgpIDogcyA+IDE7CgogICAgICAgIC8vIEl0IHdpbGwgZXZhbHVhdGUgdGhlIGZ1bGwgZXhwcmVzc2lvbiB0byBmYWxzZS4gVGhlIGZhbHNlIGJyYW5jaCB3aWxsIG5vdCBleGVjdXRlIHRoZSBsb29wLgogICAgICAgIGxldCBsMyA9IHMgPj0gMSA/IHMgPiAxIDogaW5maW5pdGVMb29wKCk7CgogICAgICAgIC8vIEl0IHdpbGwgZXZhbHVhdGUgdGhlIGZ1bGwgZXhwcmVzc2lvbiB0byBmYWxzZS4gVGhlIHRydWUgYnJhbmNoIHdpbGwgbm90IGV4ZWN1dGUgdGhlIGxvb3AuCiAgICAgICAgbGV0IGw0ID0gcyA+IDEgPyBpbmZpbml0ZUxvb3AoKSA6IHMgPiAxOwoKICAgICAgICBsZXQgcmVzdWx0ID0gIWwxICYmICFsMiAmJiAhbDMgJiYgIWw0OwoKICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgfQoKICAgIC8vLyBUZXN0cyBfID8gXyA6IF8gc2hvcnQtY2lyY3VpdGluZyB3aXRoIGV4Y2VwdGlvbiB0aHJvd2luZwogICAgZ2V0IGZ1biB0ZXJuYXJ5RXhjZXB0aW9uU2hvcnRDaXJjdWl0KCk6IEJvb2wgewoKICAgICAgICBsZXQgcyA9IDE7CgogICAgICAgIC8vIEl0IHdpbGwgZXZhbHVhdGUgdGhlIGZ1bGwgZXhwcmVzc2lvbiB0byBmYWxzZS4gVGhlIGZhbHNlIGJyYW5jaCB3aWxsIG5vdCB0aHJvdyBhbiBleGNlcHRpb24uCiAgICAgICAgbGV0IHQxID0gdHJ1ZSA/IHMgPiAxIDogdGhyb3dFeGNlcHRpb24ocy0xKTsKCiAgICAgICAgLy8gSXQgd2lsbCBldmFsdWF0ZSB0aGUgZnVsbCBleHByZXNzaW9uIHRvIGZhbHNlLiBUaGUgdHJ1ZSBicmFuY2ggd2lsbCBub3QgdGhyb3cgYW4gZXhjZXB0aW9uLgogICAgICAgIGxldCB0MiA9IGZhbHNlID8gdGhyb3dFeGNlcHRpb24ocy0xKSA6IHMgPiAxOwoKICAgICAgICAvLyBJdCB3aWxsIGV2YWx1YXRlIHRoZSBmdWxsIGV4cHJlc3Npb24gdG8gZmFsc2UuIFRoZSBmYWxzZSBicmFuY2ggd2lsbCBub3QgdGhyb3cgYW4gZXhjZXB0aW9uLgogICAgICAgIGxldCB0MyA9IHMgPj0gMSA/IHMgPiAxIDogdGhyb3dFeGNlcHRpb24ocy0xKTsKCiAgICAgICAgLy8gSXQgd2lsbCBldmFsdWF0ZSB0aGUgZnVsbCBleHByZXNzaW9uIHRvIGZhbHNlLiBUaGUgdHJ1ZSBicmFuY2ggd2lsbCBub3QgdGhyb3cgYW4gZXhjZXB0aW9uLgogICAgICAgIGxldCB0NCA9IHMgPiAxID8gdGhyb3dFeGNlcHRpb24ocy0xKSA6IHMgPiAxOwoKICAgICAgICBsZXQgcmVzdWx0ID0gIXQxICYmICF0MiAmJiAhdDMgJiYgIXQ0OwoKICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgfQoKCiAgICAvKioqKioqKioqKioqKioqIEFkZHJlc3NlcyAqKioqKioqKioqKioqKioqKioqKi8KCiAgICBnZXQgZnVuIHRlc3RBZGRyZXNzRXF1YWxpdHkoKTogQm9vbCB7CiAgICAgICAgCiAgICAgICAgLy8gQWRkcmVzc2VzIGFyZSBpbW11dGFibGUuCgogICAgICAgIGxldCBhZGRyMSA9IG15QWRkcmVzcygpOwogICAgICAgIGxldCBhZGRyMiA9IGNvbnRyYWN0QWRkcmVzcyhpbml0T2YgU2VtYW50aWNzVGVzdGVyKCkpOwoKICAgICAgICAvLyBUaGUgdHdvIGFkZHJlc3NlcyBhcmUgdGhlIHNhbWUKICAgICAgICBsZXQgcmVzdWx0ID0gYWRkcjEgPT0gYWRkcjI7CgogICAgICAgIC8vIE1ha2UgYSBjb3B5IG9mIGFkZHIxIChhc3NpZ25tZW50cyBhcmUgYnkgdmFsdWUpLgogICAgICAgIGxldCBhZGRyMyA9IGFkZHIxOwoKICAgICAgICAvLyBUaGUgYWRkcmVzc2VzIGFyZSBzdGlsbCBlcXVhbC4KICAgICAgICByZXN1bHQgJiY9IGFkZHIxID09IGFkZHIzOwoKICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgfQoKICAgIGdldCBmdW4gdGVzdEludmVyc2VzUGFyc2VTdGRBZGRyZXNzQW5kTmV3QWRkcmVzcygpOiBCb29sIHsKICAgICAgICBsZXQgYWRkciA9IG15QWRkcmVzcygpOwoKICAgICAgICAvLyBVc2luZyBwYXJzZVN0ZEFkZHJlc3MgZm9sbG93ZWQgYnkgbmV3QWRkcmVzcyBwcm9kdWNlIHRoZSBzYW1lIHJlc3VsdHMKICAgICAgICBsZXQgcGFyc2VkQWRkcjogU3RkQWRkcmVzcyA9IHBhcnNlU3RkQWRkcmVzcyhhZGRyLmFzU2xpY2UoKSk7CiAgICAgICAgbGV0IGFkZHIyOiBBZGRyZXNzID0gbmV3QWRkcmVzcyhwYXJzZWRBZGRyLndvcmtjaGFpbiwgcGFyc2VkQWRkci5hZGRyZXNzKTsKCiAgICAgICAgbGV0IHJlc3VsdCA9IGFkZHIgPT0gYWRkcjI7CgogICAgICAgIC8vIFVzaW5nIG5ld0FkZHJlc3MgZm9sbG93ZWQgYnkgcGFyc2VTdGRBZGRyZXNzIHByb2R1Y2UgdGhlIHNhbWUgcmVzdWx0cwoKICAgICAgICAvLyBUaGUgdHdvIGNvbXBvbmVudHMgb2Ygb3VyIGFkZHJlc3MKICAgICAgICBsZXQgY2hhaW5JZCA9IDA7CiAgICAgICAgbGV0IGFjY291bnRJZCA9IChpbml0T2YgU2VtYW50aWNzVGVzdGVyKCkpLnRvQ2VsbCgpLmhhc2goKTsKCiAgICAgICAgbGV0IGFkZHIzOiBBZGRyZXNzID0gbmV3QWRkcmVzcyhjaGFpbklkLCBhY2NvdW50SWQpOwogICAgICAgIGxldCBwYXJzZWRBZGRyMjogU3RkQWRkcmVzcyA9IHBhcnNlU3RkQWRkcmVzcyhhZGRyMy5hc1NsaWNlKCkpOwoKICAgICAgICByZXN1bHQgJiY9IGNoYWluSWQgPT0gcGFyc2VkQWRkcjIud29ya2NoYWluICYmIGFjY291bnRJZCA9PSBwYXJzZWRBZGRyMi5hZGRyZXNzOwoKICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgfQoKICAgIC8qKioqKioqKioqKioqKiogU2xpY2VzICoqKioqKioqKioqKioqKioqKioqLwoKICAgIC8vIFRlc3Qgc2xpY2VzIGdlbmVyYXRlZCBmcm9tIGNlbGxzIHdpdGhvdXQgcmVmZXJlbmNlcyB0byBvdGhlciBjZWxscy4KICAgIGdldCBmdW4gdGVzdFNsaWNlRXF1YWxpdHkxKCk6IEJvb2wgewogICAgICAgIGxldCBjZWxsID0gYmVnaW5DZWxsKCkuc3RvcmVJbnQoMTAsIDYpLnN0b3JlSW50KDUsIDYpLnN0b3JlSW50KDIsIDYpLmVuZENlbGwoKTsKCiAgICAgICAgLy8gV2UgaGF2ZSB0d28gc2xpY2VzIG9mIHRoZSBzYW1lIGNlbGwuCiAgICAgICAgLy8gV2hlbiByZWFkaW5nIHRoZSBkYXRhIGluIGJvdGggc2xpY2VzLCB3ZSB3aWxsIG5lZWQgdG8gcmVhZCB0aHJlZSA2LWJpdCBpbnRlZ2VycyBpbiBlYWNoIHNsaWNlLgogICAgICAgIGxldCBzbGljZTEgPSBjZWxsLmFzU2xpY2UoKTsKICAgICAgICBsZXQgc2xpY2UyID0gY2VsbC5hc1NsaWNlKCk7CgogICAgICAgIC8vIE5hdHVyYWxseSwgdGhleSBhcmUgZXF1YWwgc28gZmFyCiAgICAgICAgbGV0IHJlc3VsdCA9IHNsaWNlMSA9PSBzbGljZTI7CgogICAgICAgIC8vIEJ1dCBub3csIGxldCB1cyByZWFkIHRoZSBmaXJzdCBpbnRlZ2VyIGluIHNsaWNlMSwgYnV0IG5vdCBpbiBzbGljZTIuCiAgICAgICAgLy8gTmFtaW5nIGNvbnZlbnRpb24gb2YgaW50ZWdlciB2YXJpYWJsZXM6IAogICAgICAgIC8vIGkxX3MxIG1lYW5zICJpbnRlZ2VyIDEgb2Ygc2xpY2UgMSIsIAogICAgICAgIC8vIGkyX3MxIG1lYW5zICJpbnRlZ2VyIDIgb2Ygc2xpY2UgMSIsCiAgICAgICAgLy8gaTFfczIgbWVhbnMgICJpbnRlZ2VyIDEgb2Ygc2xpY2UgMiIuLi4uIGFuZCBzbyBvbi4KICAgICAgICBsZXQgaTFfczEgPSBzbGljZTEubG9hZEludCg2KTsgICAvLyAxMAoKICAgICAgICAvLyBUaGUgc2xpY2VzIGFyZSBkaWZmZXJlbnQgc28gZmFyLCBiZWNhdXNlIHNsaWNlMiBzdGlsbCBuZWVkcyB0byByZWFkIDMgaW50ZWdlcnMsIHdoaWxlIHNsaWNlMSBvbmx5IG5lZWRzIHRvIHJlYWQgMi4KICAgICAgICByZXN1bHQgJiY9IHNsaWNlMSAhPSBzbGljZTIgJiYgaTFfczEgPT0gMTA7CgogICAgICAgIC8vIE5vdyByZWFkIHRoZSBmaXJzdCBpbnRlZ2VyIGluIHRoZSBzZWNvbmQgc2xpY2UuCiAgICAgICAgbGV0IGkxX3MyID0gc2xpY2UyLmxvYWRJbnQoNik7ICAgLy8gMTAKCiAgICAgICAgLy8gU28gZmFyLCBib3RoIHNsaWNlcyBhcmUgaW4gdGhlIHNhbWUgc3RhdGUuIEhlbmNlLCB0aGV5IGFyZSBlcXVhbC4KICAgICAgICByZXN1bHQgJiY9IHNsaWNlMSA9PSBzbGljZTIgJiYgaTFfczIgPT0gMTA7CgogICAgICAgIC8vIE5vdyByZWFkIHRoZSByZW1haW5pbmcgdHdvIGludGVnZXJzIGluIHRoZSBmaXJzdCBzbGljZQogICAgICAgIGxldCBpMl9zMSA9IHNsaWNlMS5sb2FkSW50KDYpOyAgIC8vIDUKICAgICAgICBsZXQgaTNfczEgPSBzbGljZTEubG9hZEludCg2KTsgICAvLyAyCgogICAgICAgIC8vIEJ1dCByZWFkIG9ubHkgb25lIGludGVnZXIgaW4gdGhlIHNlY29uZCBzbGljZS4KICAgICAgICBsZXQgaTJfczIgPSBzbGljZTIubG9hZEludCg2KTsgICAvLyA1CgogICAgICAgIC8vIFRoZSBzbGljZXMgYXJlIGRpZmZlcmVudCwgYmVjYXVzZSB0aGUgZmlyc3Qgc2xpY2UgaXMgY3VycmVudGx5IGVtcHR5LCB3aGlsZSB0aGUgc2Vjb25kIHNsaWNlIHN0aWxsIG5lZWRzIHRvIHJlYWQgdGhlIHRoaXJkIGludGVnZXIuCiAgICAgICAgcmVzdWx0ICYmPSBzbGljZTEgIT0gc2xpY2UyICYmIGkyX3MxID09IDUgJiYgaTNfczEgPT0gMiAmJiBpMl9zMiA9PSA1OwoKICAgICAgICAvLyBSZWFkIHRoZSB0aGlyZCBpbnRlZ2VyIGluIHRoZSBzZWNvbmQgc2xpY2UuIFRoZSBzbGljZSBpcyBub3cgYWxzbyBlbXB0eS4KICAgICAgICBsZXQgaTNfczIgPSBzbGljZTIubG9hZEludCg2KTsgICAvLyAyCgogICAgICAgIC8vIEJvdGggc2xpY2VzIGFyZSBub3cgZXF1YWwuCiAgICAgICAgcmVzdWx0ICYmPSBzbGljZTEgPT0gc2xpY2UyICYmIGkzX3MyID09IDI7CgogICAgICAgIC8vIFRoaXMgd2lsbCBjaGVjayB0aGF0IHRoZSBmaXJzdCBzbGljZSBpcyBlbXB0eS4KICAgICAgICBzbGljZTEuZW5kUGFyc2UoKTsKCiAgICAgICAgLy8gVGhleSBhcmUgYm90aCBzdGlsbCBlbXB0eSwgaGVuY2UgZXF1YWwuCiAgICAgICAgcmVzdWx0ICYmPSBzbGljZTEgPT0gc2xpY2UyOwoKICAgICAgICAvLyBOb3cgY2hlY2sgdGhhdCB0aGUgc2Vjb25kIHNsaWNlIGlzIGFsc28gZW1wdHkuCiAgICAgICAgc2xpY2UyLmVuZFBhcnNlKCk7CgogICAgICAgIC8vIE5hdHVyYWxseSwgYm90aCBzbGljZXMgYXJlIHN0aWxsIGVxdWFsIGFuZCBlbXB0eS4KICAgICAgICByZXN1bHQgJiY9IHNsaWNlMSA9PSBzbGljZTIgJiYgc2xpY2UxLmVtcHR5KCkgJiYgc2xpY2UyLmVtcHR5KCk7CgogICAgICAgIC8vIE5vdywgbGV0IHVzIG9idGFpbiBhIHRoaXJkIHNsaWNlIGZyb20gdGhlIHN0YXJ0aW5nIGNlbGwuCiAgICAgICAgbGV0IHNsaWNlMyA9IGNlbGwuYXNTbGljZSgpOwoKICAgICAgICAvLyBMb2FkIHRoZSBmaXJzdCBpbnRlZ2VyIGZyb20gdGhlIHNsaWNlLiBUaGVyZSBhcmUgc3RpbGwgdHdvIHRvIGdvLgogICAgICAgIGxldCBpMV9zMyA9IHNsaWNlMy5sb2FkSW50KDYpOyAgLy8gMTAKCiAgICAgICAgcmVzdWx0ICYmPSBpMV9zMyA9PSAxMDsKCiAgICAgICAgLy8gTm93LCBtYWtlIGEgY29weSBvZiB0aGUgc2xpY2UgKGFzc2lnbm1lbnRzIGFyZSBieSB2YWx1ZSkKICAgICAgICAvLyBUaGlzIG1lYW5zIHRoYXQgc2xpY2U0IHN0aWxsIGhhcyB0d28gaW50ZWdlcnMgdG8gcmVhZCBhcyB3ZWxsLiAKICAgICAgICBsZXQgc2xpY2U0ID0gc2xpY2UzOwoKICAgICAgICAvLyBOYXR1cmFsbHksIHRoZSBzbGljZXMgYXJlIGVxdWFsLgogICAgICAgIHJlc3VsdCAmJj0gc2xpY2UzID09IHNsaWNlNDsKCiAgICAgICAgLy8gQnV0IG5vdywgcmVhZCB0aGUgc2Vjb25kIGludGVnZXIgaW4gc2xpY2UzLCBidXQgTk9UIGluIHNsaWNlNC4KICAgICAgICBsZXQgaTJfczMgPSBzbGljZTMubG9hZEludCg2KTsgICAvLyA1CgogICAgICAgIC8vIFRoZSBzbGljZXMgYXJlIG5vdyBkaWZmZXJlbnQuCiAgICAgICAgcmVzdWx0ICYmPSBzbGljZTMgIT0gc2xpY2U0ICYmIGkyX3MzID09IDU7CgogICAgICAgIC8vIFJlYWQgdGhlIGxhc3QgaW50ZWdlciBpbiBzbGljZTMuIFRoZSB0aGlyZCBzbGljZSBpcyBub3cgZW1wdHksIGJ1dCBzbGljZTQgc3RpbGwgaGFzIHR3byBpbnRlZ2VycyB0byByZWFkLgogICAgICAgIGxldCBpM19zMyA9IHNsaWNlMy5sb2FkSW50KDYpOyAgLy8gMgoKICAgICAgICAvLyBFdmlkZW50bHksIHRoZSBzbGljZXMgYXJlIGRpZmZlcmVudC4KICAgICAgICByZXN1bHQgJiY9IHNsaWNlMyAhPSBzbGljZTQgJiYgaTNfczMgPT0gMjsKCiAgICAgICAgLy8gTm93IHJlYWQgdGhlIHNlY29uZCBpbnRlZ2VyIGluIHRoZSBmb3VydGggc2xpY2UuCiAgICAgICAgbGV0IGkyX3M0ID0gc2xpY2U0LmxvYWRJbnQoNik7ICAvLyA1CgogICAgICAgIC8vIFRoZSBzbGljZXMgYXJlIHN0aWxsIGRpZmZlcmVudCwgYmVjYXVzZSBzbGljZTMgaXMgZW1wdHksIGJ1dCBzbGljZTQgc3RpbGwgaGFzIG9uZSBpbnRlZ2VyIHRvIHJlYWQuCiAgICAgICAgcmVzdWx0ICYmPSBzbGljZTMgIT0gc2xpY2U0ICYmIGkyX3M0ID09IDU7CgogICAgICAgIC8vIFJlYWQgdGhlIHRoaXJkIGludGVnZXIgaW4gdGhlIGZvdXJ0aCBzbGljZS4gc2xpY2U0IGlzIG5vdyBhbHNvIGVtcHR5LgogICAgICAgIGxldCBpM19zNCA9IHNsaWNlNC5sb2FkSW50KDYpOyAgIC8vIDIKCiAgICAgICAgLy8gQm90aCBzbGljZXMgYXJlIG5vdyBlcXVhbCwgYW5kIGJvdGggYXJlIGVtcHR5LgogICAgICAgIHJlc3VsdCAmJj0gc2xpY2UzID09IHNsaWNlNCAmJiBpM19zNCA9PSAyICYmIHNsaWNlMy5lbXB0eSgpICYmIHNsaWNlNC5lbXB0eSgpOwoKICAgICAgICAvLyBOb3csIGxldCB1cyBvYnRhaW4gYSBmaWZ0aCBzbGljZSBmcm9tIHRoZSBzdGFydGluZyBjZWxsLgogICAgICAgIGxldCBzbGljZTUgPSBjZWxsLmFzU2xpY2UoKTsKCiAgICAgICAgLy8gQWdhaW4sIGxvYWQgdGhlIGZpcnN0IGludGVnZXIgZnJvbSB0aGUgc2xpY2UuIFRoZXJlIGFyZSBzdGlsbCB0d28gdG8gZ28uCiAgICAgICAgbGV0IGkxX3M1ID0gc2xpY2U1LmxvYWRJbnQoNik7ICAvLyAxMAoKICAgICAgICByZXN1bHQgJiY9IGkxX3M1ID09IDEwOwoKICAgICAgICAvLyBHaXZlIHRoZSBzbGljZSB0byBhIGdsb2JhbCBmdW5jdGlvbi4gU2luY2UgYXJndW1lbnRzIGFyZSBieSB2YWx1ZSwgdGhlIGdsb2JhbCBmdW5jdGlvbiB3aWxsIG1ha2UgYSBjb3B5IG9mIHRoZSBzbGljZS4KICAgICAgICAvLyBUaGUgZ2xvYmFsIGZ1bmN0aW9uIHdpbGwgcmVhZCB0aGUgcmVtYWluaW5nIHR3byBpbnRlZ2VycyBpbiB0aGUgc2xpY2UgY29weS4gQnV0IHNsaWNlNSB3aWxsIHJlbWFpbiB1bmNoYW5nZWQuCgogICAgICAgIHJlc3VsdCAmJj0gZnVsbHlSZWFkU2xpY2Uoc2xpY2U1KTsgICAgLy8gUmV0dXJucyB0cnVlOiBtZWFuaW5nIHRoYXQgdGhlIGZ1bmN0aW9uIHJlYWQgNSBhbmQgMiBmcm9tIHRoZSBjb3B5IGFuZCBjaGVja2VkIHRoYXQgdGhlIGNvcHkgaXMgZW1wdHkKCiAgICAgICAgLy8gQnV0IHdlIGNhbiBzdGlsbCByZWFkIHRoZSB0d28gaW50ZWdlcnMgaW4gc2xpY2U1LgogICAgICAgIGxldCBpMl9zNSA9IHNsaWNlNS5sb2FkSW50KDYpOyAgIC8vIDUKICAgICAgICBsZXQgaTNfczUgPSBzbGljZTUubG9hZEludCg2KTsgICAvLyAyCgogICAgICAgIC8vIEFuZCBjaGVjayB0aGF0IHNsaWNlNSBpcyBub3cgZW1wdHkKICAgICAgICByZXN1bHQgJiY9IGkyX3M1ID09IDUgJiYgaTNfczUgPT0gMiAmJiBzbGljZTUuZW1wdHkoKTsKCiAgICAgICAgLy8gTm93LCBsZXQgdXMgZG8gdGhlIHNhbWUgZXhwZXJpbWVudCB3aXRoIGEgc2l4dGggc2xpY2UsIGJ1dCB0aGlzIHRpbWUgcGFzcyBpdCB0byBhIG11dGF0aW5nIGZ1bmN0aW9uLgogICAgICAgIGxldCBzbGljZTYgPSBjZWxsLmFzU2xpY2UoKTsKCiAgICAgICAgLy8gQWdhaW4sIGxvYWQgdGhlIGZpcnN0IGludGVnZXIgZnJvbSB0aGUgc2xpY2UuIFRoZXJlIGFyZSBzdGlsbCB0d28gdG8gZ28uCiAgICAgICAgbGV0IGkxX3M2ID0gc2xpY2U2LmxvYWRJbnQoNik7ICAvLyAxMAoKICAgICAgICByZXN1bHQgJiY9IGkxX3M2ID09IDEwOwoKICAgICAgICAvLyBHaXZlIHRoZSBzbGljZSB0byBhIG11dGF0aW5nIGZ1bmN0aW9uLiAKICAgICAgICAvLyBUaGUgbXV0YXRpbmcgZnVuY3Rpb24gd2lsbCByZWFkIHRoZSByZW1haW5pbmcgdHdvIGludGVnZXJzIGluIHRoZSBzbGljZS4gCiAgICAgICAgLy8gQWZ0ZXIgdGhlIGNhbGwsIHNsaWNlNiBpcyBub3cgZW1wdHkuCgogICAgICAgIHJlc3VsdCAmJj0gc2xpY2U2LmZ1bGx5UmVhZEFuZE1vZGlmeVNsaWNlKCk7ICAgIC8vIFJldHVybnMgdHJ1ZTogbWVhbmluZyB0aGF0IHRoZSBmdW5jdGlvbiByZWFkIDUgYW5kIDIgZnJvbSB0aGUgc2xpY2UgYW5kIGNoZWNrZWQgdGhhdCB0aGUgc2xpY2UgaXMgZW1wdHkKCiAgICAgICAgLy8gQ2hlY2sgdGhhdCBzbGljZTYgaXMgbm93IGVtcHR5CiAgICAgICAgcmVzdWx0ICYmPSBzbGljZTYuZW1wdHkoKTsKCiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KCiAgICAvLyBUZXN0IHNsaWNlcyBnZW5lcmF0ZWQgZnJvbSBjZWxscyBoYXZpbmcgcmVmZXJlbmNlcyB0byBvdGhlciBjZWxscy4KICAgIGdldCBmdW4gdGVzdFNsaWNlRXF1YWxpdHkyKCk6IEJvb2wgewogICAgICAgIAogICAgICAgIC8vIENyZWF0ZSB0d28gY2VsbHMgd2l0aCBleGFjdGx5IHRoZSBzYW1lIGRhdGEKICAgICAgICBsZXQgY2VsbDEgPSBiZWdpbkNlbGwoKS5zdG9yZUludCgxMCwgNikuc3RvcmVCb29sKHRydWUpLnN0b3JlVWludCgyLCA2KS5lbmRDZWxsKCk7CiAgICAgICAgbGV0IGNlbGwyID0gYmVnaW5DZWxsKCkuc3RvcmVJbnQoMTAsIDYpLnN0b3JlQm9vbCh0cnVlKS5zdG9yZVVpbnQoMiwgNikuZW5kQ2VsbCgpOwoKICAgICAgICAvLyBUd28gY2VsbHMgd2l0aCB0aGUgc2FtZSBkYXRhLCBidXQgZWFjaCBoYXZpbmcgYSByZWZlcmVuY2UgdG8gY2VsbDEgYW5kIGNlbGwyIHJlc3BlY3RpdmVseS4KICAgICAgICBsZXQgY2VsbDMgPSBiZWdpbkNlbGwoKS5zdG9yZUludCg1LCA2KS5zdG9yZVJlZihjZWxsMSkuZW5kQ2VsbCgpOwogICAgICAgIGxldCBjZWxsNCA9IGJlZ2luQ2VsbCgpLnN0b3JlSW50KDUsIDYpLnN0b3JlUmVmKGNlbGwyKS5lbmRDZWxsKCk7CgogICAgICAgIC8vIExldCB1cyBjcmVhdGUgYW5vdGhlciBjZWxsIHdoaWNoIGRpZmZlcnMgYnkgdGhlIHJlZmVyZW5jZS4KICAgICAgICBsZXQgY2VsbDUgPSBiZWdpbkNlbGwoKS5zdG9yZUludCg1LCA2KS5zdG9yZVJlZihlbXB0eUNlbGwoKSkuZW5kQ2VsbCgpOwoKICAgICAgICAvLyBOb3csIGNyZWF0ZSBzbGljZXMgZm9yIGNlbGxzIDMsNCw1LgogICAgICAgIGxldCBzbGljZTMgPSBjZWxsMy5hc1NsaWNlKCk7CiAgICAgICAgbGV0IHNsaWNlNCA9IGNlbGw0LmFzU2xpY2UoKTsKICAgICAgICBsZXQgc2xpY2U1ID0gY2VsbDUuYXNTbGljZSgpOwoKICAgICAgICAvLyBTbGljZXMgMyBhbmQgNCBhcmUgZXF1YWwsIGJlY2F1c2UgdGhleSBzdGlsbCBuZWVkIHRvIHJlYWQgYW4gaW50ZWdlciBhbmQgYSByZWZlcmVuY2UgdG8gdHdvIGVxdWFsIGNlbGxzIChjZWxscyAxIGFuZCAyKS4gCiAgICAgICAgbGV0IHJlc3VsdCA9IHNsaWNlMyA9PSBzbGljZTQ7CgogICAgICAgIC8vIFNsaWNlIDUgZGlmZmVycyBmcm9tIHNsaWNlcyAzIGFuZCA0LCBiZWNhdXNlIHNsaWNlIDUgc3RpbGwgbmVlZHMgdG8gcmVhZCBhbiBpbnRlZ2VyIGFuZCBhIHJlZmVyZW5jZSB0byBhbiBlbXB0eSBjZWxsLgogICAgICAgIHJlc3VsdCAmJj0gc2xpY2U1ICE9IHNsaWNlMyAmJiBzbGljZTUgIT0gc2xpY2U0OwoKICAgICAgICAvLyBSZWFkIHRoZSBpbnRlZ2VyIGluIHNsaWNlIDMKICAgICAgICBsZXQgZDFfczMgPSBzbGljZTMubG9hZEludCg2KTsgICAvLyA1CgogICAgICAgIHJlc3VsdCAmJj0gZDFfczMgPT0gNTsKCiAgICAgICAgLy8gTm93LCBzbGljZXMgMyBhbmQgNCBhcmUgZGlmZmVyZW50LCBiZWNhdXNlIHNsaWNlIDQgaGFzIG5vdCByZWFkIGl0cyBpbnRlZ2VyLgogICAgICAgIHJlc3VsdCAmJj0gc2xpY2UzICE9IHNsaWNlNDsKCiAgICAgICAgLy8gUmVhZCB0aGUgaW50ZWdlciBpbiBzbGljZSA0CiAgICAgICAgbGV0IGQxX3M0ID0gc2xpY2U0LmxvYWRJbnQoNik7ICAgLy8gNQoKICAgICAgICByZXN1bHQgJiY9IGQxX3MzID09IDU7CgogICAgICAgIC8vIE5vdywgc2xpY2VzIDMgYW5kIDQgYXJlIGVxdWFsLCBiZWNhdXNlIHNsaWNlIDMgYW5kIDQgc3RpbGwgbmVlZCB0byByZWFkIHRoZSByZWZlcmVuY2UgY2VsbCwKICAgICAgICAvLyBhbmQgYm90aCBzbGljZXMgaGF2ZSByZWZlcmVuY2VzIHdpdGggdGhlIHNhbWUgZGF0YSAoY2VsbHMgMSBhbmQgMikuCiAgICAgICAgcmVzdWx0ICYmPSBzbGljZTMgPT0gc2xpY2U0OwoKICAgICAgICAvLyBSZWFkIGludGVnZXIgaW4gc2xpY2UgNQogICAgICAgIGxldCBkMV9zNSA9IHNsaWNlNS5sb2FkSW50KDYpOyAgIC8vIDUKCiAgICAgICAgcmVzdWx0ICYmPSBkMV9zNSA9PSA1OwoKICAgICAgICAvLyBzbGljZSA1IGRpZmZlcnMgZnJvbSBzbGljZXMgMyBhbmQgNCBiZWNhdXNlIHNsaWNlIDUgaGFzIGEgcmVmZXJlbmNlIHRvIGFuIGVtcHR5IGNlbGwuCiAgICAgICAgcmVzdWx0ICYmPSBzbGljZTUgIT0gc2xpY2UzICYmIHNsaWNlNSAhPSBzbGljZTQ7CgogICAgICAgIC8vIE5vdyByZWFkIHRoZSByZWZlcmVuY2VzIGZyb20gdGhlIHNsaWNlcwogICAgICAgIGxldCBkMl9zMyA9IHNsaWNlMy5sb2FkUmVmKCk7ICAvLyBjZWxsMQogICAgICAgIGxldCBkMl9zNCA9IHNsaWNlNC5sb2FkUmVmKCk7ICAvLyBjZWxsMgogICAgICAgIGxldCBkMl9zNSA9IHNsaWNlNS5sb2FkUmVmKCk7ICAvLyBlbXB0eSBjZWxsCgogICAgICAgIHJlc3VsdCAmJj0gZDJfczMgPT0gY2VsbDEgJiYgZDJfczQgPT0gY2VsbDIgJiYgZDJfczUgPT0gZW1wdHlDZWxsKCk7CgogICAgICAgIC8vIEF0IHRoaXMgbW9tZW50LCB0aGUgdGhyZWUgc2xpY2VzIGFyZSBlcXVhbCwgYmVjYXVzZSB0aGV5IGFyZSBub3cgZW1wdHkuCiAgICAgICAgcmVzdWx0ICYmPSBzbGljZTMgPT0gc2xpY2U0ICYmIHNsaWNlMyA9PSBzbGljZTU7CgogICAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CgogICAgLyoqKioqKioqKioqKioqKiBDZWxscyAqKioqKioqKioqKioqKioqKioqKi8KCiAgICAvLyBUZXN0IGNlbGxzIGdlbmVyYXRlZCBieSBzdHJ1Y3RzLgogICAgZ2V0IGZ1biB0ZXN0Q2VsbEVxdWFsaXR5MSgpOiBCb29sIHsKICAgICAgICAKICAgICAgICAvLyBDZWxscyBhcmUgaW1tdXRhYmxlLgoKICAgICAgICAvLyBDcmVhdGUgdHdvIGNlbGxzIGZyb20gdHdvIHN0cnVjdHMKICAgICAgICAvLyBUaGVzZSBhcmUgdGhlIHNhbWUgc3RydWN0cywgYnV0IHRoZWlyIGZpZWxkcyBhcmUgZGVjbGFyZWQgaW4gZGlmZmVyZW50IG9yZGVyLgogICAgICAgIGxldCBzdHJ1Y3QxID0gU0Ige2IxOiB0cnVlLCBiMjogU0Mge2MxOiAxMH0sIGIzOiA1MH07CiAgICAgICAgbGV0IHN0cnVjdDIgPSBTQiB7YjI6IFNDIHtjMTogMTB9LCBiMzogNTAsIGIxOiB0cnVlfTsKCiAgICAgICAgbGV0IGNlbGwxID0gc3RydWN0MS50b0NlbGwoKTsKICAgICAgICBsZXQgY2VsbDIgPSBzdHJ1Y3QyLnRvQ2VsbCgpOwogICAgICAgIAogICAgICAgIC8vIFRoZSB0d28gY2VsbHMgYXJlIGVxdWFsLgogICAgICAgIGxldCByZXN1bHQgPSBjZWxsMSA9PSBjZWxsMjsKCiAgICAgICAgLy8gTWFrZSBhIGNvcHkgb2YgY2VsbDEgKGFzc2lnbm1lbnRzIGFyZSBieSB2YWx1ZSkuCiAgICAgICAgbGV0IGNlbGwzID0gY2VsbDE7CgogICAgICAgIC8vIFRoZSBjZWxscyBhcmUgc3RpbGwgZXF1YWwuCiAgICAgICAgcmVzdWx0ICYmPSBjZWxsMSA9PSBjZWxsMzsKCiAgICAgICAgLy8gRXh0cmFjdCB0aGUgc3RydWN0IGZyb20gdGhlIGNlbGwgY29weS4KICAgICAgICBsZXQgc3RydWN0MyA9IFNCLmZyb21DZWxsKGNlbGwzKTsKCiAgICAgICAgLy8gVGhlIHN0cnVjdHMgYXJlIGVxdWFsLgogICAgICAgIHJlc3VsdCAmJj0gc3RydWN0MS5iMSA9PSBzdHJ1Y3QzLmIxICYmIHN0cnVjdDEuYjIuYzEgPT0gc3RydWN0My5iMi5jMSAmJiBzdHJ1Y3QxLmIzID09IHN0cnVjdDMuYjM7CgogICAgICAgIC8vIExldCB1cyBtb2RpZnkgc3RydWN0My4KICAgICAgICBzdHJ1Y3QzLmIyLmMxID0gMTAwOwoKICAgICAgICAvLyBPYnRhaW4gdGhlIGNlbGwgb2YgdGhlIG1vZGlmaWVkIHN0cnVjdAogICAgICAgIGxldCBjZWxsNCA9IHN0cnVjdDMudG9DZWxsKCk7CgogICAgICAgIC8vIGNlbGwxIGFuZCBjZWxsNCBhcmUgbm93IGRpZmZlcmVudC4KICAgICAgICByZXN1bHQgJiY9IGNlbGwxICE9IGNlbGw0OwoKICAgICAgICAvLyBMZXQgdXMgbW9kaWZ5IHN0cnVjdDEgYXMgZG9uZSB0byBzdHJ1Y3QzCiAgICAgICAgc3RydWN0MS5iMi5jMSA9IDEwMDsKCiAgICAgICAgLy8gT2J0YWluIHRoZSBjZWxsIG9mIHRoZSBtb2RpZmllZCBzdHJ1Y3QxCiAgICAgICAgbGV0IGNlbGw1ID0gc3RydWN0MS50b0NlbGwoKTsKCiAgICAgICAgLy8gVGhlIGNlbGxzIGFyZSBub3cgZXF1YWwKICAgICAgICByZXN1bHQgJiY9IGNlbGw1ID09IGNlbGw0OwoKICAgICAgICAvLyBCdXQgbm90ZSB0aGF0IGNlbGw1IGFuZCBjZWxsMSBhcmUgZGlmZmVyZW50CiAgICAgICAgcmVzdWx0ICYmPSBjZWxsNSAhPSBjZWxsMTsKCiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KCiAgICAvLyBUZXN0IGNlbGxzIGdlbmVyYXRlZCBieSBidWlsZGVycy4KICAgIGdldCBmdW4gdGVzdENlbGxFcXVhbGl0eTIoKTogQm9vbCB7CgogICAgICAgIC8vIENlbGxzIGFyZSBpbW11dGFibGUuCgogICAgICAgIC8vIENyZWF0ZSA1IGNlbGxzIGFzIGZvbGxvd3M6CgogICAgICAgIC8vIFR3byB3aXRoIGV4YWN0bHkgdGhlIHNhbWUgZGF0YQogICAgICAgIGxldCBjZWxsMSA9IGJlZ2luQ2VsbCgpLnN0b3JlSW50KDEwLCA2KS5zdG9yZUJvb2wodHJ1ZSkuc3RvcmVVaW50KDIsIDYpLmVuZENlbGwoKTsKICAgICAgICBsZXQgY2VsbDIgPSBiZWdpbkNlbGwoKS5zdG9yZUludCgxMCwgNikuc3RvcmVCb29sKHRydWUpLnN0b3JlVWludCgyLCA2KS5lbmRDZWxsKCk7CgogICAgICAgIC8vIEEgdGhpcmQgd2l0aCB0aGUgc2FtZSBkYXRhLCBidXQgaW4gZGlmZmVyZW50IG9yZGVyCiAgICAgICAgbGV0IGNlbGwzID0gYmVnaW5DZWxsKCkuc3RvcmVCb29sKHRydWUpLnN0b3JlSW50KDEwLCA2KS5zdG9yZVVpbnQoMiwgNikuZW5kQ2VsbCgpOwoKICAgICAgICAvLyBBIGZvdXJ0aCBhbmQgZmlmdGggd2l0aCBvbmx5IGRpZmZlcmVuY2UgdGhlIHN0b3JlZCBib29sZWFuIGFuZCBvcmRlcmluZyBvZiBkYXRhCiAgICAgICAgbGV0IGNlbGw0ID0gYmVnaW5DZWxsKCkuc3RvcmVJbnQoMTAsIDYpLnN0b3JlQm9vbChmYWxzZSkuc3RvcmVVaW50KDIsIDYpLmVuZENlbGwoKTsKICAgICAgICBsZXQgY2VsbDUgPSBiZWdpbkNlbGwoKS5zdG9yZUJvb2woZmFsc2UpLnN0b3JlSW50KDEwLCA2KS5zdG9yZVVpbnQoMiwgNikuZW5kQ2VsbCgpOwoKICAgICAgICAvLyBUaGVuLCB0aGUgZmlyc3QgYW5kIHNlY29uZCBjZWxscyBhcmUgZXF1YWwKICAgICAgICBsZXQgcmVzdWx0ID0gY2VsbDEgPT0gY2VsbDI7CgogICAgICAgIC8vIFRoZSBmaXJzdCBjZWxsIGRpZmZlcnMgZnJvbSB0aGUgdGhpcmQsIGZvdXJ0aCwgYW5kIGZpZnRoCiAgICAgICAgcmVzdWx0ICYmPSBjZWxsMSAhPSBjZWxsMyAmJiBjZWxsMSAhPSBjZWxsNCAmJiBjZWxsMSAhPSBjZWxsNTsKCiAgICAgICAgLy8gU2FtZSBmb3IgdGhlIHNlY29uZCBjZWxsCiAgICAgICAgcmVzdWx0ICYmPSBjZWxsMiAhPSBjZWxsMyAmJiBjZWxsMiAhPSBjZWxsNCAmJiBjZWxsMiAhPSBjZWxsNTsKCiAgICAgICAgLy8gVGhlIHRoaXJkIGNlbGwgZGlmZmVycyBmcm9tIGZvdXJ0aCBhbmQgZmlmdGgKICAgICAgICByZXN1bHQgJiY9IGNlbGwzICE9IGNlbGw0ICYmIGNlbGwzICE9IGNlbGw1OwoKICAgICAgICAvLyBUaGUgZm91cnRoIGFuZCBmaWZ0aCBjZWxscyBkaWZmZXIKICAgICAgICByZXN1bHQgJiY9IGNlbGw0ICE9IGNlbGw1OwoKICAgICAgICAvLyBOb3csIGxldCB1cyBtYWtlIGEgc2xpY2UgZnJvbSB0aGUgZmlyc3QgYW5kIHRoaXJkIGNlbGxzLgogICAgICAgIGxldCBzbGljZTEgPSBjZWxsMS5hc1NsaWNlKCk7CiAgICAgICAgbGV0IHNsaWNlMyA9IGNlbGwzLmFzU2xpY2UoKTsKCiAgICAgICAgLy8gUmVhZCB0aGUgZmlyc3QgZGF0YSBpbiBib3RoIHNsaWNlcwogICAgICAgIC8vIE5hbWluZyBjb252ZW50aW9uIG9mIGRhdGEgdmFyaWFibGVzOgogICAgICAgIC8vIGQxX3MxIG1lYW5zICJkYXRhIDEgb2Ygc2xpY2UgMSIsIAogICAgICAgIC8vIGQyX3MxIG1lYW5zICJkYXRhIDIgb2Ygc2xpY2UgMSIsIAogICAgICAgIC8vIGQxX3MzIG1lYW5zICJkYXRhIDEgb2Ygc2xpY2UgMyIsCiAgICAgICAgLy8gYW5kIHNvIG9uIAogICAgICAgIGxldCBkMV9zMSA9IHNsaWNlMS5sb2FkSW50KDYpOyAgIC8vIDEwCiAgICAgICAgbGV0IGQxX3MzID0gc2xpY2UzLmxvYWRCb29sKCk7ICAgLy8gdHJ1ZQoKICAgICAgICByZXN1bHQgJiY9IGQxX3MxID09IDEwICYmIGQxX3MzID09IHRydWU7CgogICAgICAgIC8vIFRyYW5zZm9ybSB3aGF0IHJlbWFpbnMgaW4gdGhlIHNsaWNlcyB0byBjZWxscy4KICAgICAgICAvLyBUaGUgdHdvIGNlbGxzIGRpZmZlciwgYmVjYXVzZSBzbGljZTEgbmVlZHMgdG8gcmVhZCBhIGJvb2xlYW4gZm9sbG93ZWQgYnkgYW4gaW50CiAgICAgICAgLy8gYnV0IHNsaWNlMyBuZWVkcyB0byByZWFkIHR3byBpbnRlZ2VycyBzdGlsbC4KICAgICAgICByZXN1bHQgJiY9IHNsaWNlMS5hc0NlbGwoKSAhPSBzbGljZTMuYXNDZWxsKCk7CgogICAgICAgIC8vIEtlZXAgcmVhZGluZyBmcm9tIHNsaWNlMQogICAgICAgIGxldCBkMl9zMSA9IHNsaWNlMS5sb2FkQm9vbCgpOyAgLy8gdHJ1ZQoKICAgICAgICByZXN1bHQgJiY9IGQyX3MxID09IHRydWU7CgogICAgICAgIC8vIFRoZSBjZWxscyBzdGlsbCBkaWZmZXIKICAgICAgICByZXN1bHQgJiY9IHNsaWNlMS5hc0NlbGwoKSAhPSBzbGljZTMuYXNDZWxsKCk7CgogICAgICAgIC8vIEJ1dCBub3cgcmVhZCB0aGUgb3RoZXIgc2xpY2UKICAgICAgICBsZXQgZDJfczMgPSBzbGljZTMubG9hZEludCg2KTsgIC8vIDEwCgogICAgICAgIHJlc3VsdCAmJj0gZDJfczMgPT0gMTA7CgogICAgICAgIC8vIFRyYW5zZm9ybSB0aGUgc2xpY2VzIHRvIGNlbGxzCiAgICAgICAgbGV0IGNlbGw2ID0gc2xpY2UxLmFzQ2VsbCgpOwogICAgICAgIGxldCBjZWxsNyA9IHNsaWNlMy5hc0NlbGwoKTsKCiAgICAgICAgLy8gVGhlIGNlbGxzIGFyZSBub3cgZXF1YWwsIGJlY2F1c2UgdGhleSBib3RoIGhhdmUgc3RvcmVkIHRoZSB1bnNpZ25lZCBpbnRlZ2VyIDIuCiAgICAgICAgcmVzdWx0ICYmPSBjZWxsNiA9PSBjZWxsNzsKCiAgICAgICAgLy8gSW5kZWVkLCB3ZSBjYW4gcmVhZCB0aGUgdW5zaWduZWQgaW50ZWdlciBmcm9tIHRoZSBjZWxscwogICAgICAgIGxldCBzbGljZTQgPSBjZWxsNi5hc1NsaWNlKCk7CiAgICAgICAgbGV0IHNsaWNlNSA9IGNlbGw3LmFzU2xpY2UoKTsKICAgICAgICBsZXQgZF9zNCA9IHNsaWNlNC5sb2FkVWludCg2KTsgIC8vIDIKICAgICAgICBsZXQgZF9zNSA9IHNsaWNlNS5sb2FkVWludCg2KTsgIC8vIDIKCiAgICAgICAgcmVzdWx0ICYmPSBkX3M0ID09IDIgJiYgZF9zNSA9PSAyOwoKICAgICAgICAvLyBBbmQgd2hlbiB0cmFuc2Zvcm1pbmcgdGhlIHNsaWNlcyBiYWNrIHRvIGNlbGxzLCB0aG9zZSBjZWxscyBhcmUgZW1wdHkKICAgICAgICByZXN1bHQgJiY9IHNsaWNlNC5hc0NlbGwoKSA9PSBlbXB0eUNlbGwoKSAmJiBzbGljZTUuYXNDZWxsKCkgPT0gZW1wdHlDZWxsKCk7CgogICAgICAgIC8vIE9ic2VydmUgdGhhdCBzbGljZXMgMSBhbmQgMyBkaWQgbm90IGdldCBhZmZlY3RlZCB3aGVuIHRoZXkgZ290IHRyYW5zZm9ybWVkIGJhY2sgdG8gY2VsbHMgNiBhbmQgNy4KICAgICAgICAvLyBUaGlzIG1lYW5zIHRoYXQgd2UgY2FuIHN0aWxsIHJlYWQgdGhlIHVuc2lnbmVkIGludGVnZXIgcGVuZGluZyBpbiBzbGljZXMgMSBhbmQgMy4KICAgICAgICBsZXQgZDNfczEgPSBzbGljZTEubG9hZFVpbnQoNik7ICAvLyAyCiAgICAgICAgbGV0IGQzX3MzID0gc2xpY2UzLmxvYWRVaW50KDYpOyAgLy8gMgoKICAgICAgICByZXN1bHQgJiY9IGQzX3MxID09IDIgJiYgZDNfczMgPT0gMjsKCiAgICAgICAgLy8gQW5kIG5vdywgd2hlbiB0cmFuc2Zvcm1pbmcgdGhvc2Ugc2xpY2VzIGJhY2sgdG8gY2VsbHMsIHRoZXkgYXJlIGVtcHR5IGFuZCBlcXVhbC4KICAgICAgICBsZXQgY2VsbDggPSBzbGljZTEuYXNDZWxsKCk7CiAgICAgICAgbGV0IGNlbGw5ID0gc2xpY2UzLmFzQ2VsbCgpOwoKICAgICAgICByZXN1bHQgJiY9IGNlbGw4ID09IGNlbGw5ICYmIGNlbGw4ID09IGVtcHR5Q2VsbCgpICYmIGNlbGw5ID09IGVtcHR5Q2VsbCgpOwogICAgICAgIAogICAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CgogICAgLy8gVGVzdCBjZWxscyBnZW5lcmF0ZWQgYnkgYnVpbGRlcnMsIGhhdmluZyByZWZlcmVuY2VzIHRvIG90aGVyIGNlbGxzLgogICAgZ2V0IGZ1biB0ZXN0Q2VsbEVxdWFsaXR5MygpOiBCb29sIHsKCiAgICAgICAgLy8gQ2VsbHMgYXJlIGltbXV0YWJsZS4KCiAgICAgICAgLy8gVHdvIGNlbGxzIHdpdGggZXhhY3RseSB0aGUgc2FtZSBkYXRhCiAgICAgICAgbGV0IGNlbGwxID0gYmVnaW5DZWxsKCkuc3RvcmVJbnQoMTAsIDYpLnN0b3JlQm9vbCh0cnVlKS5zdG9yZVVpbnQoMiwgNikuZW5kQ2VsbCgpOwogICAgICAgIGxldCBjZWxsMiA9IGJlZ2luQ2VsbCgpLnN0b3JlSW50KDEwLCA2KS5zdG9yZUJvb2wodHJ1ZSkuc3RvcmVVaW50KDIsIDYpLmVuZENlbGwoKTsKCiAgICAgICAgLy8gVGhleSBhcmUgZXF1YWwKICAgICAgICBsZXQgcmVzdWx0ID0gY2VsbDEgPT0gY2VsbDI7CgogICAgICAgIC8vIFR3byBjZWxscyB3aXRoIHRoZSBzYW1lIGRhdGEsIGJ1dCBlYWNoIGhhdmluZyBhIHJlZmVyZW5jZSB0byBjZWxsMSBhbmQgY2VsbDIgcmVzcGVjdGl2ZWx5LgogICAgICAgIGxldCBjZWxsMyA9IGJlZ2luQ2VsbCgpLnN0b3JlSW50KDUsIDYpLnN0b3JlUmVmKGNlbGwxKS5lbmRDZWxsKCk7CiAgICAgICAgbGV0IGNlbGw0ID0gYmVnaW5DZWxsKCkuc3RvcmVJbnQoNSwgNikuc3RvcmVSZWYoY2VsbDIpLmVuZENlbGwoKTsKCiAgICAgICAgLy8gVGhlIGNlbGxzIGFyZSBlcXVhbCwgYmVjYXVzZSB0aGV5IGhhdmUgcmVmZXJlbmNlcyB0byBlcXVhbCBjZWxscy4KICAgICAgICByZXN1bHQgJiY9IGNlbGwzID09IGNlbGw0OwoKICAgICAgICAvLyBMZXQgdXMgY3JlYXRlIGFub3RoZXIgY2VsbCB3aGljaCBkaWZmZXJzIGJ5IHRoZSByZWZlcmVuY2UuCiAgICAgICAgbGV0IGNlbGw1ID0gYmVnaW5DZWxsKCkuc3RvcmVJbnQoNSwgNikuc3RvcmVSZWYoZW1wdHlDZWxsKCkpLmVuZENlbGwoKTsKCiAgICAgICAgLy8gY2VsbDUgaXMgZGlmZmVyZW50IGZyb20gYm90aCBjZWxsMyBhbmQgY2VsbDQgKGFuZCBvZiBjb3Vyc2UsIGZyb20gY2VsbDEgYW5kIGNlbGwyKS4KICAgICAgICByZXN1bHQgJiY9IGNlbGw1ICE9IGNlbGwzICYmIGNlbGw1ICE9IGNlbGw0ICYmIGNlbGw1ICE9IGNlbGwxICYmIGNlbGw1ICE9IGNlbGwyOwoKICAgICAgICAvLyBPYnRhaW4gYSBzbGljZSBmb3IgY2VsbHMgMyw0LDUuCiAgICAgICAgbGV0IHNsaWNlMyA9IGNlbGwzLmFzU2xpY2UoKTsKICAgICAgICBsZXQgc2xpY2U0ID0gY2VsbDQuYXNTbGljZSgpOwogICAgICAgIGxldCBzbGljZTUgPSBjZWxsNS5hc1NsaWNlKCk7CgogICAgICAgIC8vIExvYWQgdGhlIGZpcnN0IGNvbW1vbiBpbnRlZ2VyIG9uIHRoZSB0aHJlZSBzbGljZXMuCiAgICAgICAgbGV0IGQxX3MzID0gc2xpY2UzLmxvYWRJbnQoNik7ICAvLyA1CiAgICAgICAgbGV0IGQxX3M0ID0gc2xpY2U0LmxvYWRJbnQoNik7ICAvLyA1CiAgICAgICAgbGV0IGQxX3M1ID0gc2xpY2U1LmxvYWRJbnQoNik7ICAvLyA1CgogICAgICAgIHJlc3VsdCAmJj0gZDFfczMgPT0gNSAmJiBkMV9zNCA9PSA1ICYmIGQxX3M1ID09IDU7CgogICAgICAgIC8vIFRyYW5zZm9ybWluZyB0aGUgc2xpY2VzIHRvIGNlbGxzIHByb2R1Y2UgdHdvIGVxdWFsIGNlbGxzIGFuZCBvbmUgdGhhdCBkaWZmZXJzOgogICAgICAgIC8vIGNlbGxzIGZyb20gc2xpY2VzIDMgYW5kIDQgYXJlIGVxdWFsIGJlY2F1c2UgdGhlIHNsaWNlcyBzdGlsbCBuZWVkIHRvIHJlYWQgCiAgICAgICAgLy8gdGhlIHJlZmVyZW5jZXMsIHdoaWNoIGFyZSByZWZlcmVuY2VzIHRvIGVxdWFsIGNlbGxzLgogICAgICAgIC8vIEluc3RlYWQsIHRoZSBjZWxsIGZyb20gc2xpY2UgNSBkaWZmZXJzIGJlY2F1c2UgaXQgaGFzIGEgcmVmZXJlbmNlIHRvIGFuIGVtcHR5IGNlbGwuCiAgICAgICAgcmVzdWx0ICYmPSBzbGljZTMuYXNDZWxsKCkgPT0gc2xpY2U0LmFzQ2VsbCgpICYmIHNsaWNlMy5hc0NlbGwoKSAhPSBzbGljZTUuYXNDZWxsKCkgJiYgc2xpY2U0LmFzQ2VsbCgpICE9IHNsaWNlNS5hc0NlbGwoKTsKCiAgICAgICAgLy8gTm93IHJlYWQgdGhlIHJlZmVyZW5jZXMgZnJvbSB0aGUgc2xpY2VzCiAgICAgICAgbGV0IGQyX3MzID0gc2xpY2UzLmxvYWRSZWYoKTsgIC8vIGNlbGwxCiAgICAgICAgbGV0IGQyX3M0ID0gc2xpY2U0LmxvYWRSZWYoKTsgIC8vIGNlbGwyCiAgICAgICAgbGV0IGQyX3M1ID0gc2xpY2U1LmxvYWRSZWYoKTsgIC8vIGVtcHR5IGNlbGwKCiAgICAgICAgcmVzdWx0ICYmPSBkMl9zMyA9PSBjZWxsMSAmJiBkMl9zNCA9PSBjZWxsMiAmJiBkMl9zNSA9PSBlbXB0eUNlbGwoKTsKCiAgICAgICAgLy8gVHJhbnNmb3JtaW5nIHRoZSBzbGljZXMgYmFjayB0byBjZWxscywgaXQgd2lsbCBwcm9kdWNlIHRocmVlIGVxdWFsIGNlbGxzLCBiZWNhdXNlIHRoZSBjZWxscyBhcmUgbm93IGVtcHR5LAogICAgICAgIC8vIGkuZS4sIHRoZXJlIGlzIG5vIG1vcmUgZGF0YSB0byByZWFkIGZyb20gdGhlIHNsaWNlcy4KICAgICAgICBsZXQgY2VsbDYgPSBzbGljZTMuYXNDZWxsKCk7CiAgICAgICAgbGV0IGNlbGw3ID0gc2xpY2U0LmFzQ2VsbCgpOwogICAgICAgIGxldCBjZWxsOCA9IHNsaWNlNS5hc0NlbGwoKTsKCiAgICAgICAgcmVzdWx0ICYmPSBjZWxsNiA9PSBjZWxsNyAmJiBjZWxsNiA9PSBjZWxsOCAmJiBjZWxsNiA9PSBlbXB0eUNlbGwoKSAmJiBjZWxsNyA9PSBlbXB0eUNlbGwoKSAmJiBjZWxsOCA9PSBlbXB0eUNlbGwoKTsKCiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KfQo="},"compiler":{"name":"tact","version":"invalid","parameters":"{\"entrypoint\":\"e2e-emulated/contracts/semantics.tact\",\"options\":{\"debug\":true,\"external\":true}}"}}